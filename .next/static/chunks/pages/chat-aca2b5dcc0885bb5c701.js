_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[23],{kHJC:function(e,t,a){},lIq4:function(e,t,a){e.exports={container:"chat_container__3ZHmO",chatAndRandomOnlineUserContaner:"chat_chatAndRandomOnlineUserContaner__bY7tB",UserContaner:"chat_UserContaner__31eCg",listContacs:"chat_listContacs__16iTn",bottom:"chat_bottom__3CU3k",searchContainer:"chat_searchContainer__2w1wg",inputcss:"chat_inputcss__3AjM4",header:"chat_header__1EszN",chat:"chat_chat__N51MX",chatContainer:"chat_chatContainer__3BkyH",headerOfChatuserNameAndName:"chat_headerOfChatuserNameAndName__2LqfD",userImageContainer:"chat_userImageContainer__2ymDj",userName:"chat_userName__37SK5",messages:"chat_messages__2kX26",oneMessage:"chat_oneMessage__1A4yV",messageText:"chat_messageText__3cXj_",sendMessage:"chat_sendMessage__2c-k6",inputContainer:"chat_inputContainer__uedp2",btns:"chat_btns__2y6XH",sendMessageBtn:"chat_sendMessageBtn__21vJx",openOrCloseEmojiPicker:"chat_openOrCloseEmojiPicker__1m39t",emojiPickerContainer:"chat_emojiPickerContainer__gmNZL",emojiLogo:"chat_emojiLogo__4KSTL",btnsend:"chat_btnsend__a1iAT",userContainer:"chat_userContainer__13jMh",imgContainer:"chat_imgContainer__IpHHZ",FollowAndUnfollowContainer:"chat_FollowAndUnfollowContainer__3Ew5y",notSeenMessageNumbe:"chat_notSeenMessageNumbe__2SBtr",isWritingContainer:"chat_isWritingContainer__e6yTb",ldsellipsis:"chat_ldsellipsis__113dY",ldsellipsis1:"chat_ldsellipsis1__1oeKY",ldsellipsis2:"chat_ldsellipsis2__wi3pK",ldsellipsis3:"chat_ldsellipsis3__KW1Sl",seen:"chat_seen__2sLob",Style:"chat_Style__q-4t3",yourMessageVu:"chat_yourMessageVu__TwFQ2",changeColorContainer:"chat_changeColorContainer__2OoQT",chatColor:"chat_chatColor__a5hxO",colorPicker:"chat_colorPicker__3s1ZE",color:"chat_color__3deXf",containerBtnSideNavBar:"chat_containerBtnSideNavBar__viwHv",bar1:"chat_bar1__3HXvi",bar2:"chat_bar2__HgbJ9",bar3:"chat_bar3__27Ss7",change:"chat_change__3DVjr",navBarShowUser:"chat_navBarShowUser__3No37",headerShowContacts:"chat_headerShowContacts__jKnKs"}},obeH:function(e,t,a){"use strict";a.r(t),a.d(t,"__N_SSP",(function(){return N}));var s=a("nKUr"),n=a("o0o1"),c=a.n(n),r=a("HaE+"),i=a("rePB"),o=a("KQm4"),l=a("ODXe"),d=a("q1tI"),j=a.n(d),u=a("lIq4"),h=a.n(u),b=a("PrJm"),m=a("RhP/"),f=(a("kHJC"),a("LzO8")),O=a("qJ0o"),_=a("W+wH"),g=a("Q25a");function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var N=!0;t.default=function(e){var t=j.a.useState(!1),a=Object(l.a)(t,2),n=a[0],i=a[1],d=j.a.useState(9),u=Object(l.a)(d,2),x=u[0],N=(u[1],j.a.useState([])),y=Object(l.a)(N,2),S=y[0],w=y[1],M=j.a.useState({currentImageUrl:void 0,userName:void 0,_id:void 0}),U=Object(l.a)(M,2),P=U[0],E=U[1],B=j.a.useState(""),T=Object(l.a)(B,2),H=T[0],I=T[1],D=j.a.useState([]),L=Object(l.a)(D,2),A=L[0],W=L[1],q=j.a.useRef(null),V=j.a.useContext(g.a),K=Object(l.a)(V,2),X=K[0],J=(K[1],j.a.useContext(_.a)),Z=Object(l.a)(J,2),F=Z[0],R=(Z[1],j.a.useState((function(){return 0}))),Q=Object(l.a)(R,2),z=Q[0],Y=Q[1],G=j.a.useState(!1),$=Object(l.a)(G,2),ee=$[0],te=$[1],ae=j.a.useState({colorone:"#1876f3",colortwo:"#e4e6eb"}),se=Object(l.a)(ae,2),ne=se[0],ce=se[1],re=j.a.useState({width:0,height:0}),ie=Object(l.a)(re,2),oe=ie[0],le=ie[1],de=j.a.useState(!1),je=Object(l.a)(de,2),ue=je[0],he=je[1],be=j.a.useRef(null);j.a.useEffect((function(){le({height:window.innerHeight,width:window.innerWidth})}),[]),j.a.useEffect((function(){void 0!=P._id&&Object(O.b)({secondUser:P._id,skip:z},e.token).then((function(e){W((function(t){return[].concat(Object(o.a)(e.data.data.reverse()),Object(o.a)(t))}))})).catch((function(e){console.log(e)}))}),[z]),j.a.useEffect((function(){void 0!=X._id&&X._id.length>2&&Object(O.d)({},e.token).then((function(e){var t=e.data.data.map((function(e){return e.firstUser._id==X._id?Promise.resolve(v(v({},e.secoundUser),{},{color:e.color,notSeenMessageNumber:e.notSeenMessageNumber})):Promise.resolve(v(v({},e.firstUser),{},{color:e.color,notSeenMessageNumber:e.notSeenMessageNumber}))}));Promise.all(t).then((function(e){w(Object(o.a)(e))}))})).catch((function(e){return console.log(e.message)}))}),[X]),j.a.useEffect((function(){void 0!=P._id&&(Object(O.b)({secondUser:P._id,skip:0},e.token).then((function(e){W(Object(o.a)(e.data.data.reverse())),q.current.scrollTop=q.current.scrollHeight+q.current.clientHeight})).catch((function(e){console.log(e)})),F.emit("vu",{state:!0,otherUserId:P._id}))}),[P]),j.a.useEffect((function(){function e(e){return t.apply(this,arguments)}function t(){return(t=Object(r.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return new Audio("./msgSound.mp3").play(),te(!1),F.emit("vu",{state:!0,otherUserId:P._id}),e.next=6,S.map((function(e){return t.senderId==e._id&&P._id!=e._id?(e.notSeenMessageNumber=e.notSeenMessageNumber+1,Promise.resolve(e)):Promise.resolve(e)}));case 6:a=e.sent,Promise.all(a).then((function(e){w(e)})),t.senderId==P._id&&(W((function(e){var a=Math.random().toString(36).substring(7);return[].concat(Object(o.a)(e),[{users:[t.senderId],message:t.text,_id:a}])})),q.current.scrollTop=q.current.scrollHeight+q.current.clientHeight);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function a(e){e.userWhoReciveWriting==X._id&&e.senderid==P._id&&te(e.isWriting)}var s=function(e){if(0!=document.getElementsByClassName(h.a.yourMessageVu).length)for(var t=A.length-1;t>0;t--)void 0!=document.getElementsByClassName(h.a.yourMessageVu)[t]&&"rgb(24, 118, 243)"!=document.getElementsByClassName(h.a.yourMessageVu)[t].childNodes[1].style.color&&(document.getElementsByClassName(h.a.yourMessageVu)[t].childNodes[1].style.color="rgb(24, 118, 243)")};return void 0!=F&&null!=F&&(F.on("isWritingState",a),F.on("getMessageFromUserToUser",e),F.on("setvu",s)),function(){void 0!=F&&null!=F&&(F.off("getMessageFromUserToUser",e),F.off("isWritingState",a),F.off("setvu",s))}}));var me=function(e){var t=e.unified.split("-"),a=[];t.forEach((function(e){return a.push("0x"+e)}));var s=String.fromCodePoint.apply(String,a);I((function(e){return e+s}))},fe=function(){i((function(e){return!e}))},Oe=function(t){Object(f.p)(t.target.value,e.token).then((function(e){void 0!=e.data.data&&w((function(t){return Object(o.a)(e.data.data)}))}))},_e=function(e){E(e)},ge=function(){H.length>0&&void 0!=P._id&&Object(O.a)({receiver:P._id,message:H,FirstTime:A.length},e.token).then((function(e){W((function(e){var t=Math.random().toString(36).substring(7);return[].concat(Object(o.a)(e),[{users:[X._id],message:H,_id:t}])})),q.current.scrollTop=q.current.scrollHeight+q.current.clientHeight,F.emit("sendMessageFromUserToUser",{otherUserId:P._id,text:H,senderId:X._id}),I("")})).catch((function(e){console.log(e)}))},xe=function(e){void 0!=P._id&&(e.target.value.length>0?F.emit("isWriting",{isWriting:!0,otherUserId:P._id,senderid:X._id}):F.emit("isWriting",{isWriting:!1,otherUserId:P._id,senderid:X._id})),I(e.target.value)},ve=function(e){0===e.target.scrollTop&&Y((function(e){return e+20}))},Ne=function(e){ce((function(t){return v(v({},t),{},{colorone:e})}))},Ce=function(e){ce(void 0==e?function(e){return v(v({},e),{},{colorone:"#1876f3"})}:function(t){return v(v({},t),{},{colorone:e})})};return oe.width>oe.height?Object(s.jsxs)("div",{className:h.a.container,children:[Object(s.jsx)(b.a,{token:e.token}),Object(s.jsxs)("div",{className:h.a.chatAndRandomOnlineUserContaner,children:[Object(s.jsxs)("div",{className:h.a.UserContaner,children:[Object(s.jsx)("div",{className:h.a.header,children:Object(s.jsx)("h1",{children:"contacts"})}),Object(s.jsx)("div",{className:h.a.listContacs,children:S.map((function(e){return Object(s.jsx)(p,{setColorOfChat:Ce,getUserdata:_e,userData:e},e._id)}))}),Object(s.jsx)("div",{className:h.a.bottom,children:Object(s.jsx)("div",{className:h.a.searchContainer,children:Object(s.jsxs)("div",{className:h.a.inputcss,children:[Object(s.jsx)("input",{onChange:function(e){return Oe(e)},type:"text",required:!0}),Object(s.jsx)("label",{children:Object(s.jsx)("span",{children:"Search users"})})]})})})]}),Object(s.jsxs)("div",{className:h.a.chat,children:[Object(s.jsx)("div",{className:h.a.header,children:Object(s.jsx)("h1",{children:"Messages"})}),Object(s.jsxs)("div",{className:h.a.chatContainer,children:[Object(s.jsxs)("div",{className:h.a.headerOfChatuserNameAndName,children:[Object(s.jsx)("div",{className:h.a.userImageContainer,children:Object(s.jsx)("img",{src:P.currentImageUrl||"/avatar.png"})}),Object(s.jsx)("div",{className:h.a.userName,children:Object(s.jsx)("h3",{children:P.userName})}),ee&&Object(s.jsx)("div",{className:h.a.isWritingContainer,children:Object(s.jsxs)("div",{className:h.a.ldsellipsis,children:[Object(s.jsx)("div",{}),Object(s.jsx)("div",{}),Object(s.jsx)("div",{}),Object(s.jsx)("div",{})]})}),Object(s.jsx)("div",{className:h.a.changeColorContainer,children:Object(s.jsx)(k,{receiver:P._id,token:e.token,getNewColorfn:Ne,chatColor:ne})})]}),Object(s.jsx)("div",{onScroll:function(e){return ve(e)},ref:q,className:h.a.messages,children:A.map((function(e){return Object(s.jsx)("div",{className:h.a.oneMessage,children:e.users[0]==P._id?Object(s.jsx)("div",{className:h.a.messageText,"text-data":void 0!=e.date?e.date.slice(0,10)+" "+e.date.slice(11,16):"false",style:{"--i":"0%",float:"left",backgroundColor:"#e4e6eb",color:"black"},children:Object(s.jsx)("p",{children:e.message})}):Object(s.jsxs)("div",{className:"".concat(h.a.messageText," ").concat(h.a.yourMessageVu," "),"text-data":void 0!=e.date?e.date.slice(0,10)+" "+e.date.slice(11,16):"false",style:{"--i":"-100%",float:"right",backgroundColor:ne.colorone,color:"white"},children:[Object(s.jsx)("p",{children:e.message}),Object(s.jsx)("span",{style:1==e.seen?{color:"#1876f3"}:{color:"black"},className:h.a.seen,children:"\u2714"})]})},e._id)}))})]}),Object(s.jsx)("div",{className:h.a.sendMessage,children:Object(s.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},children:[Object(s.jsx)("div",{className:h.a.inputContainer,children:Object(s.jsxs)("div",{className:h.a.inputcss,children:[Object(s.jsx)("input",{value:H,onChange:function(e){return xe(e)},type:"text",required:!0}),Object(s.jsx)("label",{children:Object(s.jsx)("span",{children:"Message"})})]})}),Object(s.jsxs)("div",{className:h.a.btns,children:[Object(s.jsxs)("div",{className:h.a.openOrCloseEmojiPicker,onClick:function(){return fe()},children:[Object(s.jsx)("div",{className:h.a.emojiLogo,children:Object(s.jsx)(m.a,{emoji:{id:"smiling_face_with_3_hearts",skin:3},size:16})}),n&&Object(s.jsx)("div",{className:h.a.emojiPickerContainer,children:Object(s.jsx)(m.b,{perLine:x,onSelect:function(e){return me(e)}})})]}),Object(s.jsx)("button",{type:"submit",className:h.a.btnsend,onClick:function(){return ge()},children:Object(s.jsx)("span",{className:h.a.sendMessageBtn,children:Object(s.jsx)(C,{})})})]})]})})]})]})]}):Object(s.jsxs)("div",{className:h.a.container,children:[Object(s.jsx)(b.a,{token:e.token}),Object(s.jsxs)("div",{className:h.a.navBarShowUser,children:[Object(s.jsx)("h1",{className:h.a.headerShowContacts,children:"Contacts"}),Object(s.jsxs)("div",{className:h.a.containerBtnSideNavBar,ref:be,onClick:function(){return be.current.classList.toggle(h.a.change),void he((function(e){return!e}))},children:[Object(s.jsx)("div",{className:h.a.bar1}),Object(s.jsx)("div",{className:h.a.bar2}),Object(s.jsx)("div",{className:h.a.bar3})]})]}),Object(s.jsxs)("div",{style:ue?{marginLeft:"0px"}:{marginLeft:"-100%"},className:h.a.UserContaner,children:[Object(s.jsx)("div",{className:h.a.header,children:Object(s.jsx)("h1",{children:"contacts"})}),Object(s.jsx)("div",{className:h.a.listContacs,children:S.map((function(e){return Object(s.jsx)(p,{setColorOfChat:Ce,getUserdata:_e,userData:e},e._id)}))}),Object(s.jsx)("div",{className:h.a.bottom,children:Object(s.jsx)("div",{className:h.a.searchContainer,children:Object(s.jsxs)("div",{className:h.a.inputcss,children:[Object(s.jsx)("input",{onChange:function(e){return Oe(e)},type:"text",required:!0}),Object(s.jsx)("label",{children:Object(s.jsx)("span",{children:"Search users"})})]})})})]}),Object(s.jsxs)("div",{className:h.a.chat,children:[Object(s.jsx)("div",{className:h.a.header,children:Object(s.jsx)("h1",{children:"Messages"})}),Object(s.jsxs)("div",{className:h.a.chatContainer,children:[Object(s.jsxs)("div",{className:h.a.headerOfChatuserNameAndName,children:[Object(s.jsx)("div",{className:h.a.userImageContainer,children:Object(s.jsx)("img",{src:P.currentImageUrl||"/avatar.png"})}),Object(s.jsx)("div",{className:h.a.userName,children:Object(s.jsx)("h3",{children:P.userName})}),ee&&Object(s.jsx)("div",{className:h.a.isWritingContainer,children:Object(s.jsxs)("div",{className:h.a.ldsellipsis,children:[Object(s.jsx)("div",{}),Object(s.jsx)("div",{}),Object(s.jsx)("div",{}),Object(s.jsx)("div",{})]})}),Object(s.jsx)("div",{className:h.a.changeColorContainer,children:Object(s.jsx)(k,{receiver:P._id,token:e.token,getNewColorfn:Ne,chatColor:ne})})]}),Object(s.jsx)("div",{onScroll:function(e){return ve(e)},ref:q,className:h.a.messages,children:A.map((function(e){return Object(s.jsx)("div",{className:h.a.oneMessage,children:e.users[0]==P._id?Object(s.jsx)("div",{className:h.a.messageText,"text-data":void 0!=e.date?e.date.slice(0,10)+" "+e.date.slice(11,16):"false",style:{"--i":"0%",float:"left",backgroundColor:"#e4e6eb",color:"black"},children:Object(s.jsx)("p",{children:e.message})}):Object(s.jsxs)("div",{className:"".concat(h.a.messageText," ").concat(h.a.yourMessageVu," "),"text-data":void 0!=e.date?e.date.slice(0,10)+" "+e.date.slice(11,16):"false",style:{"--i":"-100%",float:"right",backgroundColor:ne.colorone,color:"white"},children:[Object(s.jsx)("p",{children:e.message}),Object(s.jsx)("span",{style:1==e.seen?{color:"#1876f3"}:{color:"black"},className:h.a.seen,children:"\u2714"})]})},e._id)}))})]}),Object(s.jsx)("div",{className:h.a.sendMessage,children:Object(s.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},children:[Object(s.jsx)("div",{className:h.a.inputContainer,children:Object(s.jsxs)("div",{className:h.a.inputcss,children:[Object(s.jsx)("input",{value:H,onChange:function(e){return xe(e)},type:"text",required:!0}),Object(s.jsx)("label",{children:Object(s.jsx)("span",{children:"Message"})})]})}),Object(s.jsxs)("div",{className:h.a.btns,children:[Object(s.jsxs)("div",{className:h.a.openOrCloseEmojiPicker,onClick:function(){return fe()},children:[Object(s.jsx)("div",{className:h.a.emojiLogo,children:Object(s.jsx)(m.a,{emoji:{id:"smiling_face_with_3_hearts",skin:3},size:16})}),n&&Object(s.jsx)("div",{className:h.a.emojiPickerContainer,children:Object(s.jsx)(m.b,{perLine:x,onSelect:function(e){return me(e)}})})]}),Object(s.jsx)("button",{type:"submit",className:h.a.btnsend,onClick:function(){return ge()},children:Object(s.jsx)("span",{className:h.a.sendMessageBtn,children:Object(s.jsx)(C,{})})})]})]})})]})]})};var C=function(){return Object(s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",children:Object(s.jsxs)("g",{id:"Layer_95","data-name":"Layer 95",children:[Object(s.jsx)("path",{d:"M53.06,10.94a1.5,1.5,0,0,0-1.53-.36l-40,13.33a1.51,1.51,0,0,0-.06,2.83l18.7,7.09,7.09,18.7a1.51,1.51,0,0,0,1.44,1,1.49,1.49,0,0,0,1.39-1l13.33-40A1.5,1.5,0,0,0,53.06,10.94Z"}),Object(s.jsx)("path",{d:"M20.22,35.48a1.5,1.5,0,0,0-2.12-2.12l-4.48,4.48a1.51,1.51,0,0,0,0,2.12,1.49,1.49,0,0,0,2.12,0Z"}),Object(s.jsx)("path",{d:"M23.88,40.12a1.49,1.49,0,0,0-2.12,0L16.08,45.8a1.5,1.5,0,0,0,2.12,2.12l5.68-5.68A1.49,1.49,0,0,0,23.88,40.12Z"}),Object(s.jsx)("path",{d:"M28.52,43.78,24,48.26a1.5,1.5,0,0,0,2.12,2.12l4.48-4.48A1.5,1.5,0,0,0,28.52,43.78Z"})]})})},p=function(e){var t=j.a.useState(e.userData.notSeenMessageNumber),a=Object(l.a)(t,2),n=a[0],c=a[1];return j.a.useEffect((function(){c(e.userData.notSeenMessageNumber)}),[e.userData.notSeenMessageNumber]),Object(s.jsx)("div",{children:Object(s.jsxs)("div",{className:h.a.userContainer,onClick:function(){e.getUserdata(e.userData),c(0),e.setColorOfChat(e.userData.color)},children:[0!=n&&Object(s.jsx)("div",{className:h.a.notSeenMessageNumbe,children:Object(s.jsx)("span",{children:n})}),Object(s.jsx)("div",{className:h.a.imgContainer,children:Object(s.jsx)("img",{src:e.userData.currentImageUrl||"/avatar.png"})}),Object(s.jsx)("div",{className:h.a.userName,children:Object(s.jsx)("p",{children:e.userData.userName})})]})})},k=function(e){var t=j.a.useState(!1),a=Object(l.a)(t,2),n=a[0],c=a[1],r=function(t){e.getNewColorfn(t),Object(O.e)({newColor:t,receiver:e.receiver},e.token)};return Object(s.jsx)("div",{onClick:function(){return c((function(e){return!e}))},className:h.a.chatColor,style:{backgroundColor:e.chatColor.colorone},children:n&&Object(s.jsxs)("div",{className:h.a.colorPicker,children:[Object(s.jsx)("div",{className:h.a.color,onClick:function(){return r("#ff1744")},style:{backgroundColor:"#ff1744"}}),Object(s.jsx)("div",{className:h.a.color,onClick:function(){return r("#f50057")},style:{backgroundColor:"#f50057"}}),Object(s.jsx)("div",{className:h.a.color,onClick:function(){return r("#3d5afe")},style:{backgroundColor:"#3d5afe"}}),Object(s.jsx)("div",{className:h.a.color,onClick:function(){return r("#76ff03")},style:{backgroundColor:"#76ff03"}}),Object(s.jsx)("div",{className:h.a.color,onClick:function(){return r("#c6ff00")},style:{backgroundColor:"#c6ff00"}}),Object(s.jsx)("div",{className:h.a.color,onClick:function(){return r("#ff3d00")},style:{backgroundColor:"#ff3d00"}}),Object(s.jsx)("div",{className:h.a.color,onClick:function(){return r("#651fff")},style:{backgroundColor:"#651fff"}}),Object(s.jsx)("div",{className:h.a.color,onClick:function(){return r("#ffea00")},style:{backgroundColor:"#ffea00"}}),Object(s.jsx)("div",{className:h.a.color,onClick:function(){return r("#f50057")},style:{backgroundColor:"#f50057"}}),Object(s.jsx)("div",{className:h.a.color,onClick:function(){return r("#ff1744")},style:{backgroundColor:"#ff1744"}}),Object(s.jsx)("div",{className:h.a.color,onClick:function(){return r("#1de9b6")},style:{backgroundColor:"#1de9b6"}}),Object(s.jsx)("div",{className:h.a.color,onClick:function(){return r("#03a9f4")},style:{backgroundColor:"#03a9f4"}})]})})}},wuLQ:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/chat",function(){return a("obeH")}])}},[["wuLQ",0,2,11,8,6,7,14,1,3,5,4,9,10,12,13,15]]]);