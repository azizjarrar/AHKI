{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React from 'react';\nimport Style from './verifyAccount.module.scss';\nimport LanguageContext from '../../context/languageContext';\nimport { activeAccount, reSendVerificationCode } from '../../services/user';\nimport { useRouter } from 'next/router';\nimport ApiIsLoadingContext from '../../context/apiIsLoadingContext';\n\nconst verifyAccount = props => {\n  const [language, setLanguage] = React.useContext(LanguageContext);\n  const [code, setCode] = React.useState(\"\");\n  const router = useRouter();\n  const [isLoading, setIsLoading] = React.useContext(ApiIsLoadingContext);\n\n  const reSendCode = () => {\n    reSendVerificationCode(props.userId, code.verificationCode).then(result => {});\n  };\n\n  const verifyUserAccount = () => {\n    setIsLoading(true);\n    activeAccount(props.userId, code.verificationCode).then(result => {\n      if (result.data.state == false) {\n        props.setErrorMessageProps({\n          state: true,\n          text: result.data.message\n        });\n      } else {\n        fetch(\"/api/setToken\", {\n          method: \"post\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            token: result.data.token\n          })\n        }).then(() => {\n          localStorage.setItem(\"ref_token\", result.data.ref_token);\n          setIsLoading(false);\n          router.push({\n            pathname: \"/\",\n            query: {\n              refrech: true\n            }\n          });\n        });\n      }\n    });\n  };\n\n  const codeHandler = e => {\n    setCode({\n      verificationCode: e.target.value\n    });\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: Style.ContainerVerification,\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      className: Style.VerificationHeader,\n      children: /*#__PURE__*/_jsx(\"h1\", {\n        children: \"Smoufy\"\n      })\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: Style.discrption,\n      children: /*#__PURE__*/_jsx(\"p\", {\n        children: \"verification code is sent to your email ou telefone type it here\"\n      })\n    }), /*#__PURE__*/_jsxs(\"form\", {\n      className: Style.form,\n      onSubmit: e => {\n        e.preventDefault();\n      },\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: Style.inputContainer,\n        children: /*#__PURE__*/_jsx(\"input\", {\n          name: \"userName\",\n          type: \"text\",\n          placeholder: language.verificationcode,\n          className: Style.input,\n          onChange: e => codeHandler(e),\n          required: true\n        })\n      }), /*#__PURE__*/_jsx(\"h1\", {\n        className: Style.Resendcode,\n        onClick: () => reSendCode(),\n        children: \"Resend code\"\n      }), /*#__PURE__*/_jsx(\"button\", {\n        onClick: () => verifyUserAccount(),\n        className: Style.btn,\n        children: language.send\n      })]\n    })]\n  });\n};\n\nexport default verifyAccount;","map":null,"metadata":{},"sourceType":"module"}