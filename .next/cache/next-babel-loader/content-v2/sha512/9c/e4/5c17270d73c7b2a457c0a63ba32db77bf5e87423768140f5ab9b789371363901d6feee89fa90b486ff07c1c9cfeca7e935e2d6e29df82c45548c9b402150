{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React from 'react';\nimport Style from '../styles/singup.module.scss';\nimport LanguageContext from '../context/languageContext';\nimport Link from 'next/link';\nimport { DatePicker } from 'react-rainbow-components';\nimport PhoneInput from 'react-phone-input-2';\nimport { useForm } from 'react-hook-form';\nimport { Register } from '../services/user';\nimport VerifyAccount from '../components/verifyAccount/verifyAccount';\nimport PopUpMessage from '../components/popUpMessage/popUpMessage';\nimport ApiIsLoadingContext from '../context/apiIsLoadingContext';\nimport 'react-phone-input-2/lib/material.css';\n\nconst singup = () => {\n  const [language, setLanguage] = React.useContext(LanguageContext);\n  const [showEmailOrTel, setShowEmailOrTel] = React.useState(\"email\");\n  const [birthDay, setBirthDay] = React.useState(\"1998-01-27T23:00:00.000Z\");\n  const [openVerifieAccountModal, setOpenVerifieAccountModal] = React.useState({\n    state: false,\n    userid: \"\"\n  });\n  const {\n    register,\n    handleSubmit,\n    errors,\n    watch\n  } = useForm();\n  const password = React.useRef({});\n  password.current = watch(\"password\", \"\");\n  const [errorMessage, setErrorMessage] = React.useState({\n    state: false,\n    text: \"\"\n  }); // when state true show  pop up \n\n  const [isLoading, setIsLoading] = React.useContext(ApiIsLoadingContext);\n\n  const onChangeHandlerRegisterPhone = (data, country) => {\n    document.querySelector(\"#telId\").value = JSON.stringify({\n      \"dialCode\": country.dialCode,\n      'tel': data\n    });\n  };\n\n  const switchTo = () => {\n    setShowEmailOrTel(e => {\n      if (e == \"tel\") {\n        return \"email\";\n      } else {\n        return \"tel\";\n      }\n    });\n  };\n\n  const setBirthDayfn = date => {\n    setBirthDay(date);\n    document.querySelector(\"#ageId\").value = date;\n  };\n\n  const onSubmit = data => {\n    setIsLoading(true);\n    Register(data).then(res => {\n      if (res.data == undefined) {\n        setIsLoading(false);\n      } else if (res.data.state == false) {\n        setErrorMessage({\n          state: true,\n          text: res.data.message\n        });\n        setIsLoading(false);\n      } else {\n        setOpenVerifieAccountModal({\n          state: true,\n          userid: res.data.userid\n        });\n        setIsLoading(false);\n      }\n    }).catch(error => {\n      setErrorMessage({\n        state: true,\n        text: error.message\n      });\n      setIsLoading(false);\n    });\n  };\n\n  const closePopUp = () => {\n    setErrorMessage({\n      state: false,\n      text: \"\"\n    });\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: Style.pageContainer,\n    children: [errorMessage.state == true && /*#__PURE__*/_jsx(PopUpMessage, {\n      fnclose: closePopUp,\n      openPopUp: errorMessage\n    }), openVerifieAccountModal.state && /*#__PURE__*/_jsxs(_Fragment, {\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: Style.close,\n        onClick: () => setOpenVerifieAccountModal({\n          state: false,\n          userid: \"\"\n        })\n      }), /*#__PURE__*/_jsx(VerifyAccount, {\n        userId: openVerifieAccountModal.userid\n      })]\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: Style.formContainer,\n      children: /*#__PURE__*/_jsxs(\"form\", {\n        onSubmit: handleSubmit(onSubmit),\n        children: [/*#__PURE__*/_jsx(\"input\", {\n          name: \"age\",\n          id: \"ageId\",\n          defaultValue: \"1998-01-27T23:00:00.000Z\",\n          ref: register({\n            required: \"Required\"\n          }),\n          style: {\n            position: \"absolute\",\n            opacity: 0,\n            pointerEvents: \"none\"\n          }\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: Style.Header,\n          children: /*#__PURE__*/_jsx(\"h1\", {\n            children: \"Sing up For NOZZLA\"\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: Style.descriptionHeader,\n          children: /*#__PURE__*/_jsx(\"h3\", {\n            children: language.createaprofilefollowotheraccountstalkaboutyourownexperienceandmore\n          })\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: Style.inputContainer,\n          children: [/*#__PURE__*/_jsx(\"input\", {\n            className: Style.input,\n            ref: register,\n            name: \"userName\",\n            required: true\n          }), /*#__PURE__*/_jsx(\"label\", {\n            children: /*#__PURE__*/_jsx(\"span\", {\n              children: language.username\n            })\n          })]\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: Style.switchContainer,\n          children: /*#__PURE__*/_jsxs(\"p\", {\n            onClick: () => switchTo(),\n            children: [\"siwtch to \", showEmailOrTel == \"tel\" ? \"email\" : \"tel\"]\n          })\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: `${Style.inputContainerTelOrEmail}`,\n          children: [/*#__PURE__*/_jsx(\"input\", {\n            type: \"text\",\n            name: \"tel\",\n            style: {\n              position: 'absolute',\n              pointerEvents: \"none\",\n              opacity: 0\n            }\n          }), showEmailOrTel == \"tel\" && /*#__PURE__*/_jsxs(_Fragment, {\n            children: [/*#__PURE__*/_jsx(\"input\", {\n              name: \"tel\",\n              id: \"telId\",\n              ref: register({\n                required: \"Required\"\n              }),\n              style: {\n                position: \"absolute\",\n                opacity: 0,\n                pointerEvents: \"none\"\n              }\n            }), /*#__PURE__*/_jsx(PhoneInput, {\n              name: \"tel\",\n              specialLabel: language.phone,\n              country: 'tn',\n              inputProps: {\n                name: 'phone',\n                required: true,\n                autoFocus: true\n              },\n              onChange: (e, country) => onChangeHandlerRegisterPhone(e, country)\n            })]\n          }), showEmailOrTel == \"email\" && /*#__PURE__*/_jsxs(\"div\", {\n            className: Style.inputContainer,\n            children: [/*#__PURE__*/_jsx(\"input\", {\n              name: \"email\",\n              ref: register({\n                required: \"Required\",\n                pattern: {\n                  value: /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/,\n                  message: \"invalid email address\"\n                }\n              }),\n              className: Style.input,\n              required: true\n            }), /*#__PURE__*/_jsx(\"label\", {\n              children: /*#__PURE__*/_jsx(\"span\", {\n                children: \"email\"\n              })\n            })]\n          })]\n        }), errors.tel && /*#__PURE__*/_jsx(\"div\", {\n          className: Style.error,\n          children: /*#__PURE__*/_jsx(\"p\", {\n            children: \"tel is required\"\n          })\n        }), errors.email && /*#__PURE__*/_jsx(\"div\", {\n          className: Style.error,\n          children: /*#__PURE__*/_jsx(\"p\", {\n            children: \"email is incorect\"\n          })\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: Style.inputContainer,\n          children: [/*#__PURE__*/_jsx(\"input\", {\n            name: \"password\",\n            type: \"password\",\n            ref: register({\n              required: \"password required\",\n              minLength: 8\n            }),\n            className: Style.input,\n            required: true\n          }), /*#__PURE__*/_jsx(\"label\", {\n            children: /*#__PURE__*/_jsx(\"span\", {\n              children: language.password\n            })\n          })]\n        }), errors.password && /*#__PURE__*/_jsx(\"div\", {\n          className: Style.error,\n          children: /*#__PURE__*/_jsx(\"p\", {\n            children: \"password length must be 8 at least\"\n          })\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: Style.inputContainer,\n          children: [/*#__PURE__*/_jsx(\"input\", {\n            name: \"confirmPassword\",\n            type: \"password\",\n            ref: register({\n              validate: value => value === password.current || \"The passwords do not match\"\n            }),\n            className: Style.input,\n            required: true\n          }), /*#__PURE__*/_jsx(\"label\", {\n            children: /*#__PURE__*/_jsx(\"span\", {\n              children: language.confirmpassword\n            })\n          })]\n        }), errors.confirmPassword && /*#__PURE__*/_jsxs(\"div\", {\n          className: Style.error,\n          children: [\" \", /*#__PURE__*/_jsx(\"p\", {\n            children: errors.confirmPassword.message\n          })]\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: `${Style.inputContainer} ${Style.birthDay}`,\n          children: /*#__PURE__*/_jsx(DatePicker, {\n            value: birthDay,\n            onChange: value => setBirthDayfn(value),\n            label: \"birth Day\",\n            formatStyle: \"large\",\n            locale: language.age\n          })\n        }), errors.age && /*#__PURE__*/_jsx(\"div\", {\n          className: Style.error,\n          children: /*#__PURE__*/_jsx(\"p\", {\n            children: \"age is required\"\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: Style.btnContainer,\n          children: /*#__PURE__*/_jsx(\"button\", {\n            children: language.signin\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: Style.messageToCreateAccounOrForgetPassword,\n          children: /*#__PURE__*/_jsxs(\"p\", {\n            className: Style.message,\n            children: [language.AlreadyHaveAccount, \" \", /*#__PURE__*/_jsx(Link, {\n              href: \"/signin\",\n              children: /*#__PURE__*/_jsx(\"span\", {\n                className: Style.clickHere,\n                children: language.signin\n              })\n            }), /*#__PURE__*/_jsx(\"br\", {}), \" \", /*#__PURE__*/_jsx(Link, {\n              href: \"/forgetPassword\",\n              children: /*#__PURE__*/_jsx(\"span\", {\n                className: Style.forgetPassword,\n                children: language.ForgotPassword\n              })\n            })]\n          })\n        })]\n      })\n    })]\n  });\n};\n\nexport default singup;","map":null,"metadata":{},"sourceType":"module"}