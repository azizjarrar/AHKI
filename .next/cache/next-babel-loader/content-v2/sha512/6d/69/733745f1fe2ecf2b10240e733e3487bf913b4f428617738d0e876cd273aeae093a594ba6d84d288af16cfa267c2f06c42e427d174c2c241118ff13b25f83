{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"F:\\\\AHKI\\\\components\\\\followAndUnfollow\\\\followAndUnfollow.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from 'react';\nimport Style from './followAndUnfollow.module.scss';\nimport { unfollowUserApi, followUserApi, checkIffollowApi, removeFollowPending } from '../../services/following';\nimport { deleteFollowApi } from '../../services/followers';\nimport UserContext from '../../context/userContext';\nimport socketContext from '../../context/socketContext';\n\nconst followAndUnfollow = props => {\n  const [user, setUser] = React.useContext(UserContext);\n  const [followOrNot, setFollowOrNot] = React.useState(false);\n  const [ifHeDeletedUser, setIfHeDeletedUser] = React.useState(false);\n  const [Loading, setLoading] = React.useState(false);\n  const refDelte = React.useRef(null);\n  const [socket, setSocket] = React.useContext(socketContext);\n  React.useEffect(() => {\n    setLoading(true);\n\n    if (user.token != undefined && props.theOtherPersonId != undefined) {\n      checkIffollowApi(props.theOtherPersonId, user.token).then(result => {\n        setFollowOrNot(result.data);\n      }).catch(error => {});\n    }\n  }, [user.token]);\n  React.useEffect(() => {\n    setLoading(false);\n  }, [followOrNot]);\n\n  const followUser = theOtherPersonId => {\n    console.log(\"followit\");\n    followUserApi(theOtherPersonId, user.token).then(result => {\n      //setFollowOrNot(e=>!e)\n      socket.emit(\"sendNotficicationFromUserToUser\", {\n        otherUserId: theOtherPersonId\n      });\n      setFollowOrNot(e => {\n        return _objectSpread(_objectSpread({}, e), {}, {\n          \"state\": result.data.state\n        });\n      });\n    }).catch(error => {});\n  };\n\n  const removeFollowPendingfn = theOtherPersonId => {\n    setLoading(true);\n    removeFollowPending(theOtherPersonId, user.token).then(result => {\n      setFollowOrNot(e => {\n        return _objectSpread(_objectSpread({}, e), {}, {\n          \"state\": result.data.state\n        });\n      });\n    }).catch(error => {});\n  };\n\n  const unfollow = followingid => {\n    unfollowUserApi(followingid, user.token).then(result => {\n      setFollowOrNot(e => {\n        return _objectSpread(_objectSpread({}, e), {}, {\n          \"state\": result.data.state\n        });\n      });\n    }).catch(error => console.log(error));\n  };\n\n  const deleteFollow = theOtherPersonId => {\n    deleteFollowApi(theOtherPersonId, user.token).then(result => {\n      refDelte.current.innerHTML = \"done\";\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n\n  if (followOrNot == undefined) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: Style.loadingAnimation,\n      children: Loading && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: Style.ldsring,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 50\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 61\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 72\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 83\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 19\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 17\n    }, this);\n  } else if (props.YouAreInYourProfile != undefined && props.YouAreInYourProfile == true && ifHeDeletedUser == false) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: () => deleteFollow({\n        theOtherPersonId: props.theOtherPersonId\n      }),\n      className: `${Style.followAndUnfollow} ${Style.unfollow}`,\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        ref: refDelte,\n        children: \"delete\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 16\n    }, this);\n  } else if (followOrNot.state == 1) {\n    {\n      console.log(\"aaa\");\n    }\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: () => removeFollowPendingfn(props.theOtherPersonId),\n      className: `${Style.followAndUnfollow} ${Style.unfollow}`,\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"pending\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 17\n    }, this);\n  } else if (followOrNot.state == 2) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: () => unfollow(props.theOtherPersonId),\n      className: `${Style.followAndUnfollow} ${Style.unfollow}`,\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"unfollow\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }, this);\n  } else {\n    {\n      console.log(followOrNot.state);\n    }\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: () => followUser(props.theOtherPersonId),\n      className: `${Style.followAndUnfollow} ${Style.follow}`,\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Follow\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }, this);\n  }\n};\n\nexport default followAndUnfollow;","map":{"version":3,"sources":["F:/AHKI/components/followAndUnfollow/followAndUnfollow.js"],"names":["React","Style","unfollowUserApi","followUserApi","checkIffollowApi","removeFollowPending","deleteFollowApi","UserContext","socketContext","followAndUnfollow","props","user","setUser","useContext","followOrNot","setFollowOrNot","useState","ifHeDeletedUser","setIfHeDeletedUser","Loading","setLoading","refDelte","useRef","socket","setSocket","useEffect","token","undefined","theOtherPersonId","then","result","data","catch","error","followUser","console","log","emit","otherUserId","e","state","removeFollowPendingfn","unfollow","followingid","deleteFollow","current","innerHTML","loadingAnimation","ldsring","YouAreInYourProfile","follow"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport Style from './followAndUnfollow.module.scss'\r\nimport {unfollowUserApi,followUserApi,checkIffollowApi,removeFollowPending} from '../../services/following'\r\nimport {deleteFollowApi} from '../../services/followers'\r\nimport UserContext from '../../context/userContext'\r\nimport socketContext from '../../context/socketContext'\r\nconst followAndUnfollow = (props) => {\r\n    const [user, setUser]= React.useContext(UserContext)\r\n    const [followOrNot,setFollowOrNot]=React.useState(false)\r\n    const [ifHeDeletedUser,setIfHeDeletedUser]=React.useState(false)\r\n    const [Loading,setLoading]=React.useState(false)\r\n    const refDelte=React.useRef(null)\r\n    const [socket,setSocket]=React.useContext(socketContext)\r\n\r\n\r\n    React.useEffect(()=>{\r\n        setLoading(true)\r\n        if(user.token!=undefined && props.theOtherPersonId!=undefined){\r\n            checkIffollowApi(props.theOtherPersonId,user.token).then(result=>{\r\n                setFollowOrNot(result.data)\r\n            }).catch(error=>{})\r\n        }\r\n    },[user.token])\r\n    React.useEffect(()=>{\r\n        setLoading(false)\r\n    },[followOrNot])\r\n    const followUser=(theOtherPersonId)=>{\r\n        console.log(\"followit\")\r\n        followUserApi(theOtherPersonId,user.token).then(result=>{\r\n            //setFollowOrNot(e=>!e)\r\n            socket.emit(\"sendNotficicationFromUserToUser\",{otherUserId:theOtherPersonId})\r\n\r\n            setFollowOrNot(e=>{\r\n                return {...e,\"state\":result.data.state}\r\n            })\r\n        }).catch(error=>{})\r\n    }\r\n    \r\n    const removeFollowPendingfn=(theOtherPersonId)=>{\r\n        setLoading(true)\r\n        removeFollowPending(theOtherPersonId,user.token).then(result=>{\r\n            setFollowOrNot(e=>{\r\n                return {...e,\"state\":result.data.state}\r\n            })\r\n        }).catch(error=>{})\r\n    }\r\n    const unfollow=(followingid)=>{\r\n        unfollowUserApi(followingid,user.token).then(result=>{\r\n            setFollowOrNot(e=>{\r\n                return {...e,\"state\":result.data.state}\r\n            })\r\n        }).catch(error=>console.log(error))\r\n    }\r\n    const deleteFollow=(theOtherPersonId)=>{\r\n        deleteFollowApi(theOtherPersonId,user.token).then(result=>{\r\n            refDelte.current.innerHTML=\"done\"\r\n        }).catch(error=>{\r\n            console.log(error)\r\n        })\r\n    }\r\n    if(followOrNot==undefined){\r\n        return (<div className={Style.loadingAnimation}>\r\n        {Loading&&<div className={Style.ldsring}><div></div><div></div><div></div><div></div></div>}\r\n        </div>)\r\n    }\r\n    else if (props.YouAreInYourProfile!=undefined && props.YouAreInYourProfile==true && ifHeDeletedUser==false){\r\n        return(<div onClick={()=>deleteFollow({theOtherPersonId:props.theOtherPersonId})} className={`${Style.followAndUnfollow} ${Style.unfollow}`}>\r\n            <p ref={refDelte}>delete</p>\r\n        </div>)\r\n    \r\n    }else if(followOrNot.state==1){\r\n        {console.log(\"aaa\")}\r\n        return (<div onClick={()=>removeFollowPendingfn(props.theOtherPersonId)} className={`${Style.followAndUnfollow} ${Style.unfollow}`}>\r\n            <p>pending</p>\r\n        </div>)\r\n    }else if(followOrNot.state==2){\r\n        return (\r\n        <div onClick={()=>unfollow(props.theOtherPersonId)} className={`${Style.followAndUnfollow} ${Style.unfollow}`}>\r\n            <p >unfollow</p>\r\n        </div>\r\n        )\r\n    }\r\n    else{\r\n        {console.log(followOrNot.state)}\r\n        return (\r\n        <div onClick={()=>followUser(props.theOtherPersonId)} className={`${Style.followAndUnfollow} ${Style.follow}`}>\r\n            <p>Follow</p>\r\n        </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nexport default followAndUnfollow\r\n"]},"metadata":{},"sourceType":"module"}