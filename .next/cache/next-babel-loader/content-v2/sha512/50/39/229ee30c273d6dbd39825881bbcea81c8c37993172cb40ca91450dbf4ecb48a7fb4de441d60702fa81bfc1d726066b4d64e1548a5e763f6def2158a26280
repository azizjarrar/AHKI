{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React from 'react';\nimport Styles from './postUsersStorys.module.scss';\nimport LanguageContext from '../../context/languageContext';\nimport userContext from '../../context/userContext';\nimport 'emoji-mart/css/emoji-mart.css';\nimport { Picker, Emoji } from 'emoji-mart';\nimport { postnrmltopic } from '../../services/post';\nimport SwitchCom from '../switch/switchCom';\nimport { useRouter } from 'next/router';\nimport ReactPlayer from 'react-player';\nimport Image from 'next/image';\n\nconst PostTodayTopic = props => {\n  const [imageOrVideo, setImageOrVideo] = React.useState(false);\n  const [imageOrVideoDataToSend, setImageOrVideoDataToSend] = React.useState(false);\n  const [mask, setMask] = React.useState(false);\n  const [language, setLanguage] = React.useContext(LanguageContext);\n  const [user, setUser] = React.useContext(userContext);\n  const [closeOrOpenEmojiPickerState, setcloseOrOpenEmojiPickerState] = React.useState(false);\n  const [textAreaData, setTextAreaData] = React.useState(\"\");\n  const [countLettres, setCountLettres] = React.useState(0);\n  const [EmojiContainerHeight, setEmojiContainerHeight] = React.useState(9); //responsive handler\n\n  const [enableCommentAnnonymState, setEnableCommentAnnonymState] = React.useState(false);\n  const router = useRouter();\n\n  const PublishPost = () => {\n    var formData = new FormData();\n    formData.append(\"postText\", textAreaData);\n\n    if (imageOrVideo != false) {\n      formData.append(\"postImage\", imageOrVideoDataToSend);\n    }\n\n    formData.append(\"anonyme\", mask);\n    formData.append(\"allowAnonymeComments\", enableCommentAnnonymState);\n    postnrmltopic(formData, user.token).then(result => {\n      setTextAreaData(\"\");\n      setImageOrVideo(false);\n\n      if (router.pathname != \"/\") {\n        props.refrechData();\n      }\n    }).catch(error => {\n      alert(error);\n    });\n  };\n\n  React.useEffect(() => {\n    if (window.innerWidth > 500) {\n      setEmojiContainerHeight(9);\n    } else {\n      setEmojiContainerHeight(8);\n    }\n  }, []);\n  /****************************************/\n\n  /**********save image in var ************/\n\n  /****************************************/\n\n  const changeFile = e => {\n    if (e.target.files[0] != undefined) {\n      setImageOrVideoDataToSend(e.target.files[0]);\n\n      if (e.target.files[0].type == \"video/mp4\") {\n        setImageOrVideo({\n          type: \"video\",\n          data: URL.createObjectURL(e.target.files[0])\n        });\n      } else {\n        setImageOrVideo({\n          type: \"image\",\n          data: URL.createObjectURL(e.target.files[0])\n        });\n      }\n    }\n  };\n  /****************************************/\n\n  /************remove image****************/\n\n  /****************************************/\n\n\n  const removeImage = () => {\n    setImageOrVideoDataToSend(false);\n    setImageOrVideo(false);\n  };\n  /******************************************************/\n\n  /********when mask on user post annonymosly************/\n\n  /******************************************************/\n\n  /*************************************************************/\n\n  /****************if mask on it will turn into blue************/\n\n  /*************************************************************/\n\n\n  const closeOrOpenEmojiPicker = () => {\n    setcloseOrOpenEmojiPickerState(e => !e);\n  };\n\n  const textAreaHolder = e => {\n    e.target.style.height = \"16px\";\n    e.target.style.height = e.target.scrollHeight + \"px\";\n    setTextAreaData(el => {\n      if (el.length <= 1000) {\n        return e.target.value;\n      } else {\n        return el.slice(0, 1000);\n      }\n    });\n  };\n\n  const addEmoji = e => {\n    let sym = e.unified.split('-');\n    let codesArray = [];\n    sym.forEach(el => codesArray.push('0x' + el));\n    let emoji = String.fromCodePoint(...codesArray);\n    setTextAreaData(el => {\n      if (el.length <= 1000) {\n        return el + emoji;\n      } else {\n        return el.slice(0, 1000);\n      }\n    });\n  };\n\n  React.useEffect(() => {\n    setCountLettres(textAreaData.length);\n  }, [textAreaData]);\n\n  const changestateOfCommentAnnonym = state => {\n    setEnableCommentAnnonymState(state);\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: Styles.container,\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      className: Styles.header,\n      children: [/*#__PURE__*/_jsxs(\"h1\", {\n        children: [/*#__PURE__*/_jsx(\"span\", {\n          children: \"Annonym Comments \\u27A8 \"\n        }), \"you can lette you follower describe theme self free by  letting them comment annonymly\"]\n      }), /*#__PURE__*/_jsx(SwitchCom, {\n        changestateOfCommentAnnonym: e => changestateOfCommentAnnonym(e),\n        state: enableCommentAnnonymState\n      })]\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: Styles.userTopicContainer,\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: Styles.userImage,\n        children: /*#__PURE__*/_jsx(\"img\", {\n          src: user.currentImageUrl || \"/avatar.png\"\n        })\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: Styles.postTopic,\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: Styles.textAreaContainer,\n          children: [/*#__PURE__*/_jsx(\"textarea\", {\n            placeholder: \"say somthing\",\n            onChange: e => textAreaHolder(e),\n            value: textAreaData,\n            className: Styles.textArea\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: Styles.countLettres,\n            children: [/*#__PURE__*/_jsxs(\"span\", {\n              className: Styles.countLettresCss,\n              style: countLettres >= 1000 ? {\n                color: \"red\"\n              } : {},\n              children: [countLettres, \" : 1000\"]\n            }), /*#__PURE__*/_jsx(\"span\", {\n              className: Styles.postText,\n              onClick: () => PublishPost(),\n              children: /*#__PURE__*/_jsx(SentSvg, {})\n            })]\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: Styles.maskEmojiAndUploadImageContainer,\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: Styles.openOrCloseEmojiPicker,\n            onClick: () => closeOrOpenEmojiPicker(),\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: Styles.emojiLogo,\n              children: /*#__PURE__*/_jsx(Emoji, {\n                emoji: {\n                  id: 'smiling_face_with_3_hearts',\n                  skin: 3\n                },\n                size: 16\n              })\n            }), closeOrOpenEmojiPickerState && /*#__PURE__*/_jsx(\"div\", {\n              className: Styles.emojiPickerContainer,\n              children: /*#__PURE__*/_jsx(Picker, {\n                perLine: EmojiContainerHeight,\n                onSelect: e => addEmoji(e)\n              })\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: Styles.uploadImage,\n            hovertextinputfile: language.Uploadphotowithyourpost,\n            children: [/*#__PURE__*/_jsx(\"input\", {\n              onChange: e => changeFile(e),\n              type: \"file\"\n            }), /*#__PURE__*/_jsx(Image, {\n              src: \"/svgicons/camera.svg\",\n              height: 30,\n              width: 30\n            })]\n          })]\n        })]\n      })]\n    }), imageOrVideo != false && /*#__PURE__*/_jsxs(\"div\", {\n      style: imageOrVideo.type != \"image\" ? {\n        width: \"100%\"\n      } : {},\n      className: Styles.image_video_Container,\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: Styles.closeBtn,\n        onClick: () => removeImage()\n      }), imageOrVideo.type == \"image\" ? /*#__PURE__*/_jsx(\"img\", {\n        src: imageOrVideo.data\n      }) : /*#__PURE__*/_jsx(ReactPlayer, {\n        width: \"100%\",\n        height: \"100%\",\n        controls: true,\n        url: imageOrVideo.data\n      })]\n    })]\n  });\n};\n\nexport default PostTodayTopic;\n\nconst SentSvg = () => {\n  return /*#__PURE__*/_jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 64 64\",\n    children: /*#__PURE__*/_jsxs(\"g\", {\n      id: \"Layer_95\",\n      \"data-name\": \"Layer 95\",\n      children: [/*#__PURE__*/_jsx(\"path\", {\n        d: \"M53.06,10.94a1.5,1.5,0,0,0-1.53-.36l-40,13.33a1.51,1.51,0,0,0-.06,2.83l18.7,7.09,7.09,18.7a1.51,1.51,0,0,0,1.44,1,1.49,1.49,0,0,0,1.39-1l13.33-40A1.5,1.5,0,0,0,53.06,10.94Z\"\n      }), /*#__PURE__*/_jsx(\"path\", {\n        d: \"M20.22,35.48a1.5,1.5,0,0,0-2.12-2.12l-4.48,4.48a1.51,1.51,0,0,0,0,2.12,1.49,1.49,0,0,0,2.12,0Z\"\n      }), /*#__PURE__*/_jsx(\"path\", {\n        d: \"M23.88,40.12a1.49,1.49,0,0,0-2.12,0L16.08,45.8a1.5,1.5,0,0,0,2.12,2.12l5.68-5.68A1.49,1.49,0,0,0,23.88,40.12Z\"\n      }), /*#__PURE__*/_jsx(\"path\", {\n        d: \"M28.52,43.78,24,48.26a1.5,1.5,0,0,0,2.12,2.12l4.48-4.48A1.5,1.5,0,0,0,28.52,43.78Z\"\n      })]\n    })\n  });\n};","map":null,"metadata":{},"sourceType":"module"}