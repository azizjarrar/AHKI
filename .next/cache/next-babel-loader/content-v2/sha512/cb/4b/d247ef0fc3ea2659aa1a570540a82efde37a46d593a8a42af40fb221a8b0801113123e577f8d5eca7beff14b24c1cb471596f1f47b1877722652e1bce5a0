{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"F:\\\\AHKI\\\\components\\\\publication\\\\publication.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from 'react';\nimport Styles from './publication.module.scss';\nimport Comment from '../comment/comment';\nimport LanguageContext from '../../context/languageContext';\nimport userContext from '../../context/userContext';\nimport { Picker, Emoji } from 'emoji-mart';\nimport Heart from '../heart/heart';\nimport { addComment, getComments, countComments } from '../../services/postComments';\nimport { deletePost } from '../../services/post';\nimport { countPostLikes } from '../../services/post_likes';\nimport ShowLikesUserNames from '../showLikesUserNames/showLikesUserNames';\nimport ReactPlayer from 'react-player';\n\nconst publication = props => {\n  const [slice, setSlice] = React.useState(100);\n  const [comments, setComments] = React.useState(false);\n  const [settings, setSettings] = React.useState(false);\n  const [mask, setMask] = React.useState(false);\n  const [language, setLanguage] = React.useContext(LanguageContext);\n  const [user, setUser] = React.useContext(userContext);\n  const [textAreaData, setTextAreaData] = React.useState(\"\");\n  const [countLettres, setCountLettres] = React.useState(0);\n  const [closeOrOpenEmojiPickerState, setcloseOrOpenEmojiPickerState] = React.useState(false);\n  const [EmojiContainerHeight, setEmojiContainerHeight] = React.useState(9); //responsive handler\n\n  const [commentsData, setCommentsData] = React.useState([]);\n  const [skip, setSkip] = React.useState(0);\n  const [addsOneToCommentCount, setaddOneToCommentCount] = React.useState(0);\n  const [likesModal, setLikesModal] = React.useState(false);\n  const maskRef = React.useRef(null);\n  const [moreComments, setMoreComments] = React.useState(false); //show more comment fetch  with 3 by 3\n\n  const [coummentNumber, setCoummentNumber] = React.useState(0);\n  const [likesNumber, setLikesNumber] = React.useState(0);\n  React.useEffect(() => {\n    if (window.innerWidth > 500) {\n      setEmojiContainerHeight(9);\n    } else {\n      setEmojiContainerHeight(8);\n    }\n\n    countPostLikes({\n      postid: props.id\n    }, user.token).then(result => {\n      setLikesNumber(result.data.count);\n    });\n    countComments({\n      postid: props.id\n    }, user.token).then(result => {\n      setCoummentNumber(result.data.count);\n    }).catch(error => {\n      alert(error);\n    });\n  }, []);\n  /*************************************************************/\n\n  /****************if mask on it will turn into blue************/\n\n  /*************************************************************/\n\n  React.useEffect(() => {\n    if (maskRef.current != null) {\n      if (props.allowAnonymeComments) {\n        if (mask) {\n          maskRef.current.childNodes[0].childNodes[0].style.fill = \"#1876f3\";\n        } else {\n          maskRef.current.childNodes[0].childNodes[0].style.fill = \"black\";\n        }\n      }\n    }\n  }, [mask]);\n  React.useEffect(() => {\n    setCountLettres(textAreaData.length);\n  }, [textAreaData]);\n  React.useEffect(() => {\n    getComments({\n      postid: props.id,\n      skip: skip\n    }, user.token).then(result => {\n      setComments(true);\n\n      if (result.data.data.length > 0) {\n        setMoreComments(true);\n      } else {\n        setMoreComments(false);\n      }\n\n      setCommentsData(e => [...e, ...result.data.data]);\n    }).catch(error => {\n      alert(error);\n    });\n  }, [skip]);\n  /************************************************/\n\n  /*when load publicationn that had more then 100 car\r\n  /*slice anything after 100 the show it later \r\n  /*when user clikc in the 3 dots\r\n  /************************************************/\n\n  const completeText = e => {\n    setSlice(e);\n  };\n  /************************************************/\n\n  /*******this will load list of comments************/\n\n  /************************************************/\n\n\n  const openComments = () => {\n    setComments(e => !e);\n  };\n  /***************************************************************/\n\n  /*************when click in the 3dots it will display************/\n\n  /**************list of setings like reports and report*************/\n\n  /***************************************************************/\n\n\n  const ShowSettings = () => {\n    setSettings(e => !e);\n  };\n  /******************************************************/\n\n  /********when mask on user post annonymosly************/\n\n  /******************************************************/\n\n\n  const maskOn = () => {\n    setMask(e => !e);\n  };\n\n  const closeOrOpenEmojiPicker = () => {\n    setcloseOrOpenEmojiPickerState(e => !e);\n  };\n\n  const textAreaHolder = e => {\n    e.target.style.height = \"16px\";\n    e.target.style.height = e.target.scrollHeight + \"px\";\n    setTextAreaData(el => {\n      if (el.length <= 1000) {\n        return e.target.value;\n      } else {\n        return el.slice(0, 1000);\n      }\n    });\n  };\n\n  const addEmoji = e => {\n    let sym = e.unified.split('-');\n    let codesArray = [];\n    sym.forEach(el => codesArray.push('0x' + el));\n    let emoji = String.fromCodePoint(...codesArray);\n    setTextAreaData(el => {\n      if (el.length <= 1000) {\n        return el + emoji;\n      } else {\n        return el.slice(0, 1000);\n      }\n    });\n  };\n\n  const AddComment = () => {\n    addComment({\n      postid: props.id,\n      anonyme: mask,\n      commentText: textAreaData\n    }, user.token).then(result => {\n      setCommentsData(e => [_objectSpread(_objectSpread({}, result.data.data), {}, {\n        commentOwner: {\n          userName: user.userName,\n          currentImageUrl: user.currentImageUrl,\n          _id: user._id\n        }\n      }), ...e]);\n      setComments(true);\n      setaddOneToCommentCount(e => e + 1);\n      setTextAreaData(\"\");\n      setMask(false);\n    }).catch(e => {\n      console.log(e);\n    });\n  };\n\n  const LoadMoreComments = () => {\n    setSkip(e => e + 3);\n  };\n\n  const addLikeInTime = newLikesNumber => {\n    setLikesNumber(e => e + newLikesNumber);\n  };\n\n  const openshowLikesUserNames = () => {\n    setLikesModal(e => !e);\n  };\n\n  const closeComponenet = () => {\n    setSettings({\n      state: false,\n      firstClick: false\n    });\n  };\n\n  const deleteCommentInCurrentTimefn = commentIdDeleted => {\n    setCommentsData(arrayOfComment => {\n      return [...arrayOfComment.filter(e => {\n        return e._id != commentIdDeleted;\n      })];\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: Styles.container,\n    children: [likesModal && /*#__PURE__*/_jsxDEV(ShowLikesUserNames, {\n      closepopUp: openshowLikesUserNames,\n      postid: props.id\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 20\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: Styles.userImageAndNameAndTimeAndSettings,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: Styles.userImage,\n        children: props.ownerOfPostImage != \"anonym\" ? /*#__PURE__*/_jsxDEV(\"img\", {\n          src: props.ownerOfPostImage || \"/avatar.png\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 48\n        }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n          style: {\n            minHeight: \"0\",\n            width: \"75%\",\n            height: \"75%\",\n            top: \"50%\",\n            left: \"50%\",\n            transform: \"translate(-50%,-50%)\",\n            border: \"none\"\n          },\n          src: \"/anonymous.png\",\n          alt: \"anonymous\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 102\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: Styles.Name,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: Styles.nameh3,\n          children: props.userName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: Styles.date,\n          children: [props.date.slice(0, 10), \" \", props.date.slice(11, 16)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: Styles.settings,\n        onClick: () => ShowSettings(),\n        children: settings && /*#__PURE__*/_jsxDEV(SettingsPost, {\n          closeComponenetfn: closeComponenet,\n          currentUserId: user._id,\n          ownerid: props.ownerid,\n          token: user.token,\n          postid: props.id\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 92\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 7\n    }, this), props.text.length < 50 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: Styles.text,\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: props.text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 63\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 34\n    }, this), props.text.length > 50 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: Styles.text,\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [props.text.slice(0, slice), slice != -1 && /*#__PURE__*/_jsxDEV(\"span\", {\n          onClick: () => completeText(-1),\n          children: \"...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 110\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 63\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 34\n    }, this), props.image && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: Styles.imageContainer,\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: props.image\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 62\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 23\n    }, this), props.video && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: Styles.videoContainer,\n      children: /*#__PURE__*/_jsxDEV(ReactPlayer, {\n        width: \"100%\",\n        height: \"100%\",\n        controls: true,\n        url: props.video\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 62\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 23\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: Styles.likesAndComments,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: Styles.Comments,\n        onClick: () => openComments(),\n        commentsnumbers: coummentNumber + addsOneToCommentCount,\n        children: /*#__PURE__*/_jsxDEV(\"svg\", {\n          width: \"69\",\n          height: \"69\",\n          viewBox: \"0 0 69 69\",\n          fill: \"none\",\n          xmlns: \"http://www.w3.org/2000/svg\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M49.8333 24.6429C49.8333 11.0277 38.6807 0 24.9167 0C11.1526 0 0 11.0277 0 24.6429C0 29.9257 1.68906 34.7926 4.55208 38.8125C2.94688 43.4638 0.299479 47.1603 0.263542 47.2065C0 47.5607 -0.071875 48.0844 0.0838542 48.5464C0.239583 49.0085 0.575 49.2857 0.958333 49.2857C5.34271 49.2857 8.97239 47.3913 11.5839 45.4353C15.4411 47.8533 20.0052 49.2857 24.9167 49.2857C38.6807 49.2857 49.8333 38.258 49.8333 24.6429ZM64.4479 58.5268C67.3109 54.5223 69 49.64 69 44.3571C69 34.0533 62.5911 25.2281 53.5109 21.5471C53.6188 22.5636 53.6667 23.5955 53.6667 24.6429C53.6667 40.9533 40.7651 54.2143 24.9167 54.2143C23.6229 54.2143 22.3651 54.0911 21.1193 53.9216C24.8927 62.7777 33.7573 69 44.0833 69C48.9948 69 53.5589 67.583 57.4161 65.1496C60.0276 67.1056 63.6573 69 68.0417 69C68.425 69 68.7724 68.7074 68.9161 68.2607C69.0719 67.8141 69 67.2904 68.7365 66.9208C68.7005 66.8745 66.0531 63.1935 64.4479 58.5268Z\",\n            fill: \"#212121\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 223\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 128\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: Styles.likes,\n        children: [/*#__PURE__*/_jsxDEV(Heart, {\n          addLikeInTime: e => addLikeInTime(e),\n          token: user.token,\n          postid: props.id\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: Styles.likesNumber,\n          onClick: () => openshowLikesUserNames(),\n          children: likesNumber\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 7\n    }, this), user.token != false && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: Styles.userAddComments,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: Styles.userImageInComments,\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: user.currentImageUrl || \"/avatar.png\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 12\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: Styles.textAreaContainer,\n        children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n          placeholder: \"say somthing\",\n          onChange: e => textAreaHolder(e),\n          value: textAreaData,\n          className: Styles.textArea\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: Styles.countLettres,\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: Styles.countLettresCss,\n            style: countLettres >= 1000 ? {\n              color: \"red\"\n            } : {},\n            children: [countLettres, \" : 1000\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 46\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: Styles.emojiAndMaskAndPost,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: Styles.openOrCloseEmojiPicker,\n          onClick: () => closeOrOpenEmojiPicker(),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: Styles.emojiLogo,\n            children: /*#__PURE__*/_jsxDEV(Emoji, {\n              emoji: {\n                id: 'smiling_face_with_3_hearts',\n                skin: 3\n              },\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 45\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 11\n          }, this), closeOrOpenEmojiPickerState && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: Styles.emojiPickerContainer,\n            children: /*#__PURE__*/_jsxDEV(Picker, {\n              perLine: EmojiContainerHeight,\n              onSelect: e => addEmoji(e)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 86\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 41\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 9\n        }, this), props.allowAnonymeComments && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: Styles.mask,\n          ref: maskRef,\n          postanonymously: language.postAnonymously,\n          onClick: () => maskOn(),\n          children: /*#__PURE__*/_jsxDEV(Masksvg, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 149\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 38\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: Styles.postAndCounterContainer,\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: Styles.postText,\n            onClick: () => {\n              AddComment();\n            },\n            children: /*#__PURE__*/_jsxDEV(SentSvg, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 75\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 12\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 27\n    }, this), comments && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: Styles.commentsContainer,\n      children: [commentsData.map(e => /*#__PURE__*/_jsxDEV(Comment, {\n        currentUserId: user._id,\n        ownerid: e.commentOwner,\n        deleteCommentInCurrentTime: deleteCommentInCurrentTimefn,\n        postid: props.id,\n        publication: true,\n        likesNumber: e.likes,\n        token: user.token,\n        date: e.date,\n        commentid: e._id,\n        text: e.commentText,\n        name: e.commentOwner.userName,\n        userProfileImageUrl: e.commentOwner.currentImageUrl\n      }, e._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 30\n      }, this)), moreComments && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: Styles.loadMoreComments,\n        onClick: () => LoadMoreComments(),\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"View more comments\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 98\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 24\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 20\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 184,\n    columnNumber: 5\n  }, this);\n};\n\nexport default publication;\n\nconst Masksvg = () => {\n  return /*#__PURE__*/_jsxDEV(\"svg\", {\n    height: \"512\",\n    viewBox: \"0 0 512 512\",\n    width: \"512\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    children: /*#__PURE__*/_jsxDEV(\"g\", {\n      id: \"outline\",\n      children: [/*#__PURE__*/_jsxDEV(\"path\", {\n        d: \"m491.062 136.609a8 8 0 0 0 -8.719 1.734l-18.343 18.344v-60.687a8 8 0 0 0 -13.314-5.979l-46.246 41.107a82.549 82.549 0 0 1 -54.899 20.872 97.989 97.989 0 0 0 -69.741 28.889l-7.8 7.8-5.805-5.806a104.745 104.745 0 0 0 -74.554-30.883 75.088 75.088 0 0 1 -38.5-10.611l10.559-35.227a102.439 102.439 0 0 0 -10.253-81.962l-2.587-4.312a8 8 0 0 0 -11.66-2.288 102.749 102.749 0 0 0 -40.1 69.1l-.953 7.618-4.834-4.3a7.99 7.99 0 0 0 -12.613 2.725 88.455 88.455 0 0 0 -56.7-20.743 8 8 0 0 0 -8 8v16a88.451 88.451 0 0 0 32 67.868v10.191a32 32 0 0 0 -22.628 54.628l6.2 6.2-15.51 124.121a7.991 7.991 0 0 0 1.282 5.43l16 24a8 8 0 0 0 11.094 2.218l3.562-2.375v43.719a8 8 0 0 0 2.343 5.657l24 24a8 8 0 0 0 11.314 0l24-24a8 8 0 0 0 2.316-6.321l-7.5-89.971a76.637 76.637 0 0 0 19.811 2.635h31.432a75.785 75.785 0 0 0 53.941-22.343l.687-.686a30.624 30.624 0 0 1 43.312 0l12.687 12.686a8 8 0 0 0 11.314 0l12.687-12.686a30.624 30.624 0 0 1 43.312 0l.687.686a75.785 75.785 0 0 0 53.941 22.343h19.716v144a8 8 0 0 0 8 8h32a8 8 0 0 0 8-8v-153.151a76.452 76.452 0 0 0 40-67.133v-123.716a8 8 0 0 0 -4.938-7.391zm-369.689 45.45-27.314-27.315v-10.744a16 16 0 0 1 27.313-11.313l22.059 22.058a16 16 0 0 1 -11.313 27.314zm-27.314 20.686-20.687-20.686 12.687-12.687 20.686 20.687zm28.767-140.6 7.517 7.516a8 8 0 0 0 8.187 1.933l12.924-4.308a86.486 86.486 0 0 1 .386 14.512l-21.386 5.347-12.491-12.496a86.745 86.745 0 0 1 4.863-12.508zm19.038-25.945a86.04 86.04 0 0 1 6.34 15.3l-10.043 3.348-6.828-6.828a86.291 86.291 0 0 1 10.531-11.82zm-27.51 57.465 7.989 7.988a8 8 0 0 0 7.6 2.1l19.145-4.786c-.23.864-.449 1.73-.707 2.589l-8.192 27.307-7.5-7.5a31.808 31.808 0 0 0 -12.94-7.856l-7.086-6.3zm-17.286 21.1q-.537.239-1.068.5v-1.448zm-65.068-26.313a72 72 0 0 1 16 3.726v19.822h-14.172a71.4 71.4 0 0 1 -1.828-16zm7.55 39.548h16.45a8 8 0 0 0 8-8v-19.8a71.77 71.77 0 0 1 16 14.58v18.209a32 32 0 0 0 -1.941 11.011v10.744l-16.4-16.4a8 8 0 0 0 -13.3 3.3 72.6 72.6 0 0 1 -8.809-13.644zm27.194 38.058-2.744 2.742v-5.49zm-30.058 28.687a15.9 15.9 0 0 1 11.314-4.686h10.744l27.315 27.314v10.745a16 16 0 0 1 -27.314 11.313l-22.058-22.059a16.017 16.017 0 0 1 -.001-22.627zm5.533 178.161-9.911-14.867 13.6-108.815 1.522 1.521a32.029 32.029 0 0 0 8.57 6.129v106.845zm37.781 71.781-16-16v-51.072l4.438-2.959a8 8 0 0 0 3.562-6.656v-107.946a31.852 31.852 0 0 0 9.474-2.033l14.246 170.946zm360 35.313h-16v-136.128a76.3 76.3 0 0 0 16-2.607zm40-212.284a60.285 60.285 0 0 1 -60.284 60.284h-31.432a59.89 59.89 0 0 1 -42.627-17.657l-.686-.687a46.631 46.631 0 0 0 -65.942 0l-7.029 7.031-7.029-7.031a46.631 46.631 0 0 0 -65.942 0l-.686.687a59.89 59.89 0 0 1 -42.627 17.657h-31.432a60.71 60.71 0 0 1 -21.247-3.895l-6.5-78.011a31.762 31.762 0 0 0 5.523-17.976v-10.745l19.314-19.314h10.745a32 32 0 0 0 32-32c0-.788-.038-1.569-.094-2.346a91.152 91.152 0 0 0 27.616 4.287 88.849 88.849 0 0 1 63.24 26.195l11.462 11.462a8 8 0 0 0 11.314 0l13.454-13.457a82.094 82.094 0 0 1 58.43-24.2 98.541 98.541 0 0 0 65.529-24.913l32.93-29.273v62.186a8 8 0 0 0 13.657 5.657l18.343-18.344z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 113\n      }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n        d: \"m430.824 240.479 8.6-21.507a8 8 0 0 0 -7.424-10.972h-49.167a70.837 70.837 0 0 0 -63.354 39.155l-6.634 13.267a8 8 0 0 0 6.163 11.516l48.262 6.034a60.927 60.927 0 0 0 7.533.469 60.4 60.4 0 0 0 56.021-37.962zm-36.216 17.273a44.211 44.211 0 0 1 -25.354 4.343l-37.041-4.63 1.576-3.154a54.836 54.836 0 0 1 49.044-30.311h37.351l-4.215 10.537a44.34 44.34 0 0 1 -21.361 23.215z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 3128\n      }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n        d: \"m232.521 247.156a70.834 70.834 0 0 0 -63.354-39.156h-49.167a8 8 0 0 0 -7.428 10.972l8.6 21.507a60.351 60.351 0 0 0 63.554 37.493l48.262-6.034a8 8 0 0 0 6.163-11.516zm-49.775 14.944a44.384 44.384 0 0 1 -46.715-27.559l-4.215-10.541h37.351a54.832 54.832 0 0 1 49.044 30.312l1.576 3.153z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 3508\n      }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n        d: \"m384 288h16v16h-16z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 3803\n      }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n        d: \"m120 280h16v16h-16z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 3834\n      }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n        d: \"m152 288h16v16h-16z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 3865\n      }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n        d: \"m416 280h16v16h-16z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 3896\n      }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n        d: \"m432 256h16v16h-16z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 3927\n      }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n        d: \"m104 256h16v16h-16z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 3958\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 97\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 244,\n    columnNumber: 10\n  }, this);\n};\n\nconst SentSvg = () => {\n  return /*#__PURE__*/_jsxDEV(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 64 64\",\n    children: /*#__PURE__*/_jsxDEV(\"g\", {\n      id: \"Layer_95\",\n      \"data-name\": \"Layer 95\",\n      children: [/*#__PURE__*/_jsxDEV(\"path\", {\n        d: \"M53.06,10.94a1.5,1.5,0,0,0-1.53-.36l-40,13.33a1.51,1.51,0,0,0-.06,2.83l18.7,7.09,7.09,18.7a1.51,1.51,0,0,0,1.44,1,1.49,1.49,0,0,0,1.39-1l13.33-40A1.5,1.5,0,0,0,53.06,10.94Z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 105\n      }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n        d: \"M20.22,35.48a1.5,1.5,0,0,0-2.12-2.12l-4.48,4.48a1.51,1.51,0,0,0,0,2.12,1.49,1.49,0,0,0,2.12,0Z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 289\n      }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n        d: \"M23.88,40.12a1.49,1.49,0,0,0-2.12,0L16.08,45.8a1.5,1.5,0,0,0,2.12,2.12l5.68-5.68A1.49,1.49,0,0,0,23.88,40.12Z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 395\n      }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n        d: \"M28.52,43.78,24,48.26a1.5,1.5,0,0,0,2.12,2.12l4.48-4.48A1.5,1.5,0,0,0,28.52,43.78Z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 516\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 67\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 248,\n    columnNumber: 7\n  }, this);\n};\n\nconst SettingsPost = props => {\n  const [errorMessage, setErrorMessage] = React.useState({\n    state: false,\n    text: \"\"\n  }); // when state true show  pop up \n\n  const deleteImageFn = () => {\n    deletePost({\n      postid: props.postid\n    }, props.token).then(result => {\n      location.reload();\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n\n  const closePopUp = () => {\n    setErrorMessage({\n      state: false,\n      text: \"\"\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: Styles.containerSettings,\n    children: [errorMessage.state == true && /*#__PURE__*/_jsxDEV(PopUpMessage, {\n      fnclose: () => closePopUp(),\n      openPopUp: errorMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 42\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: Styles.paramsContainer,\n      children: /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Report\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 55\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 15\n    }, this), props.ownerid == props.currentUserId && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: Styles.paramsContainer,\n      onClick: () => deleteImageFn(),\n      children: /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Delete\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 122\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 52\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: Styles.paramsContainer,\n      onClick: () => props.closeComponenetfn(),\n      children: /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Close\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 95\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 15\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 264,\n    columnNumber: 11\n  }, this);\n};","map":{"version":3,"sources":["F:/AHKI/components/publication/publication.js"],"names":["React","Styles","Comment","LanguageContext","userContext","Picker","Emoji","Heart","addComment","getComments","countComments","deletePost","countPostLikes","ShowLikesUserNames","ReactPlayer","publication","props","slice","setSlice","useState","comments","setComments","settings","setSettings","mask","setMask","language","setLanguage","useContext","user","setUser","textAreaData","setTextAreaData","countLettres","setCountLettres","closeOrOpenEmojiPickerState","setcloseOrOpenEmojiPickerState","EmojiContainerHeight","setEmojiContainerHeight","commentsData","setCommentsData","skip","setSkip","addsOneToCommentCount","setaddOneToCommentCount","likesModal","setLikesModal","maskRef","useRef","moreComments","setMoreComments","coummentNumber","setCoummentNumber","likesNumber","setLikesNumber","useEffect","window","innerWidth","postid","id","token","then","result","data","count","catch","error","alert","current","allowAnonymeComments","childNodes","style","fill","length","e","completeText","openComments","ShowSettings","maskOn","closeOrOpenEmojiPicker","textAreaHolder","target","height","scrollHeight","el","value","addEmoji","sym","unified","split","codesArray","forEach","push","emoji","String","fromCodePoint","AddComment","anonyme","commentText","commentOwner","userName","currentImageUrl","_id","console","log","LoadMoreComments","addLikeInTime","newLikesNumber","openshowLikesUserNames","closeComponenet","state","firstClick","deleteCommentInCurrentTimefn","commentIdDeleted","arrayOfComment","filter","container","userImageAndNameAndTimeAndSettings","userImage","ownerOfPostImage","minHeight","width","top","left","transform","border","Name","nameh3","date","ownerid","text","image","imageContainer","video","videoContainer","likesAndComments","Comments","likes","userAddComments","userImageInComments","textAreaContainer","textArea","countLettresCss","color","emojiAndMaskAndPost","openOrCloseEmojiPicker","emojiLogo","skin","emojiPickerContainer","postAnonymously","postAndCounterContainer","postText","commentsContainer","map","loadMoreComments","Masksvg","SentSvg","SettingsPost","errorMessage","setErrorMessage","deleteImageFn","location","reload","closePopUp","containerSettings","paramsContainer","currentUserId","closeComponenetfn"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport Styles from './publication.module.scss'\r\nimport Comment from '../comment/comment'\r\nimport LanguageContext from '../../context/languageContext'\r\nimport userContext from '../../context/userContext'\r\nimport { Picker,Emoji  } from 'emoji-mart'\r\nimport Heart from '../heart/heart'\r\nimport {addComment,getComments,countComments} from '../../services/postComments'\r\nimport {deletePost} from '../../services/post'\r\nimport {countPostLikes} from '../../services/post_likes'\r\n\r\nimport ShowLikesUserNames from '../showLikesUserNames/showLikesUserNames'\r\nimport ReactPlayer from 'react-player'\r\nconst publication = (props) => {\r\n  const [slice, setSlice] = React.useState(100)\r\n  const [comments, setComments] = React.useState(false)\r\n  const [settings, setSettings] = React.useState(false)\r\n  const [mask, setMask] = React.useState(false)\r\n  const [language , setLanguage]=React.useContext(LanguageContext)\r\n  const [user,setUser]=React.useContext(userContext)\r\n  const [textAreaData,setTextAreaData]=React.useState(\"\")\r\n  const [countLettres,setCountLettres]=React.useState(0)\r\n  const [closeOrOpenEmojiPickerState,setcloseOrOpenEmojiPickerState]=React.useState(false)\r\n  const [EmojiContainerHeight, setEmojiContainerHeight] = React.useState(9)//responsive handler\r\n  const [commentsData,setCommentsData]=React.useState([])\r\n  const [skip,setSkip]=React.useState(0)\r\n  const [addsOneToCommentCount,setaddOneToCommentCount]=React.useState(0)\r\n  const [likesModal,setLikesModal]=React.useState(false)\r\n  const maskRef=React.useRef(null)\r\n  const [moreComments,setMoreComments]=React.useState(false) //show more comment fetch  with 3 by 3\r\n  const [coummentNumber,setCoummentNumber]=React.useState(0)\r\n  const [likesNumber,setLikesNumber]=React.useState(0)\r\n\r\n  React.useEffect(() => { \r\n   \r\n    if(window.innerWidth>500){\r\n      setEmojiContainerHeight(9) \r\n    }else{\r\n      setEmojiContainerHeight(8) \r\n    }\r\n      countPostLikes({postid:props.id},user.token).then(result=>{\r\n        setLikesNumber(result.data.count)\r\n      })\r\n    \r\n\r\n    countComments({postid:props.id},user.token).then(result=>{\r\n      setCoummentNumber(result.data.count)\r\n  }).catch(error=>{\r\n      alert(error)\r\n\r\n  })\r\n  },[]);\r\n    /*************************************************************/\r\n  /****************if mask on it will turn into blue************/\r\n  /*************************************************************/\r\n  React.useEffect(() => {\r\n    if(maskRef.current!=null){\r\n      if(props.allowAnonymeComments){\r\n        if (mask) {\r\n          maskRef.current.childNodes[0].childNodes[0].style.fill = \"#1876f3\"\r\n        } else {\r\n          maskRef.current.childNodes[0].childNodes[0].style.fill = \"black\"\r\n        }\r\n      }\r\n    }\r\n  }, [mask])\r\n\r\n  React.useEffect(()=>{\r\n    setCountLettres(textAreaData.length)\r\n  },[textAreaData])\r\n  React.useEffect(()=>{\r\n    getComments({postid:props.id,skip:skip},user.token).then(result=>{\r\n      setComments(true)\r\n      if(result.data.data.length>0){\r\n          setMoreComments(true)\r\n      }else{\r\n          setMoreComments(false)\r\n      }\r\n      setCommentsData(e=>[...e,...result.data.data])\r\n\r\n    }).catch(error=>{\r\n        alert(error)\r\n    })\r\n  },[skip])\r\n  /************************************************/\r\n  /*when load publicationn that had more then 100 car\r\n  /*slice anything after 100 the show it later \r\n  /*when user clikc in the 3 dots\r\n  /************************************************/\r\n  const completeText = (e) => {\r\n    setSlice(e)\r\n  }\r\n  /************************************************/\r\n  /*******this will load list of comments************/\r\n  /************************************************/\r\n  const openComments = () => {\r\n    \r\n    setComments(e => !e)\r\n  }\r\n\r\n\r\n  /***************************************************************/\r\n  /*************when click in the 3dots it will display************/\r\n  /**************list of setings like reports and report*************/\r\n  /***************************************************************/\r\n  const ShowSettings = () => {\r\n    setSettings(e => !e)\r\n  }\r\n    /******************************************************/\r\n  /********when mask on user post annonymosly************/\r\n  /******************************************************/\r\n  const maskOn = () => {\r\n    setMask(e => !e)\r\n  }\r\n\r\n\r\n  const closeOrOpenEmojiPicker=()=>{\r\n    setcloseOrOpenEmojiPickerState(e=>!e)\r\n  }\r\n  const textAreaHolder=(e)=>{\r\n    e.target.style.height = \"16px\";\r\n    e.target.style.height = (e.target.scrollHeight)+\"px\";\r\n    setTextAreaData(el=>{\r\n      if(el.length<=1000){\r\n        return e.target.value\r\n      }else{\r\n       return el.slice(0,1000)\r\n      }\r\n    })\r\n  }\r\n  const addEmoji=(e)=>{\r\n    let sym = e.unified.split('-')\r\n    let codesArray = []\r\n    sym.forEach(el => codesArray.push('0x' + el))\r\n    let emoji = String.fromCodePoint(...codesArray)\r\n    setTextAreaData(el=>{\r\n      if(el.length<=1000){\r\n        return el+emoji\r\n      }else{\r\n        return el.slice(0,1000)\r\n      }\r\n    })\r\n  };\r\n\r\n  const AddComment=()=>{\r\n\r\n    addComment({postid:props.id,anonyme:mask,commentText:textAreaData},user.token).then((result)=>{\r\n        setCommentsData(e=>[{...result.data.data,commentOwner:{userName:user.userName,currentImageUrl:user.currentImageUrl,_id:user._id}},...e])\r\n        setComments(true)\r\n        setaddOneToCommentCount(e=>e+1)\r\n        setTextAreaData(\"\")\r\n        setMask(false)\r\n    }).catch(e=>{\r\n      console.log(e)\r\n    })\r\n  }\r\n\r\n\r\n\r\nconst LoadMoreComments=()=>{\r\n  setSkip(e=>e+3)\r\n}\r\n\r\n\r\nconst addLikeInTime=(newLikesNumber)=>{\r\n  \r\n  setLikesNumber(e=>e+newLikesNumber)\r\n}\r\nconst openshowLikesUserNames=()=>{\r\n  setLikesModal(e=>!e)\r\n}\r\nconst closeComponenet=()=>{\r\nsetSettings({state:false,firstClick:false})\r\n\r\n}\r\nconst deleteCommentInCurrentTimefn=(commentIdDeleted)=>{\r\n  setCommentsData(arrayOfComment=>{\r\n   return [...arrayOfComment.filter(e=>{\r\n     return e._id!=commentIdDeleted\r\n   })]\r\n  })\r\n}\r\n  return (\r\n    <div className={Styles.container}>\r\n      {likesModal&&<ShowLikesUserNames closepopUp={openshowLikesUserNames} postid={props.id}></ShowLikesUserNames>}\r\n      <div className={Styles.userImageAndNameAndTimeAndSettings}>\r\n\r\n        <div className={Styles.userImage}>\r\n          \r\n            {props.ownerOfPostImage!=\"anonym\"? <img src={props.ownerOfPostImage || \"/avatar.png\"} />:<img style={{minHeight:\"0\",width:\"75%\",height:\"75%\",top:\"50%\",left:\"50%\",transform:\"translate(-50%,-50%)\",border:\"none\"}} src={\"/anonymous.png\"} alt=\"anonymous\"/>}\r\n          \r\n          {/*<img src={props.ownerOfPostImage||\"/avatar.png\"} alt={user.userName || \"\"}/>*/}\r\n          </div>\r\n        <div className={Styles.Name}>\r\n        <h3 className={Styles.nameh3}>{props.userName}</h3>\r\n        <h3 className={Styles.date}>{props.date.slice(0,10)} {props.date.slice(11,16)}</h3>\r\n        </div><div className={Styles.settings} onClick={() => ShowSettings()}>{settings && <SettingsPost closeComponenetfn={closeComponenet} currentUserId={user._id} ownerid={props.ownerid} token={user.token} postid={props.id}></SettingsPost>}</div>\r\n      </div>\r\n      {props.text.length < 50 && <div className={Styles.text}><p>{props.text}</p></div>}\r\n      {props.text.length > 50 && <div className={Styles.text}><p>{props.text.slice(0, slice)}{slice != -1 && <span onClick={() => completeText(-1)}>...</span>}</p></div>}\r\n      {props.image && <div className={Styles.imageContainer}><img src={props.image} /></div>}\r\n      {props.video && <div className={Styles.videoContainer}><ReactPlayer width=\"100%\" height=\"100%\" controls={true} url={props.video} /></div>}\r\n\r\n      <div className={Styles.likesAndComments}>\r\n        <div className={Styles.Comments} onClick={() => openComments()} commentsnumbers={coummentNumber+addsOneToCommentCount}><svg width=\"69\" height=\"69\" viewBox=\"0 0 69 69\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M49.8333 24.6429C49.8333 11.0277 38.6807 0 24.9167 0C11.1526 0 0 11.0277 0 24.6429C0 29.9257 1.68906 34.7926 4.55208 38.8125C2.94688 43.4638 0.299479 47.1603 0.263542 47.2065C0 47.5607 -0.071875 48.0844 0.0838542 48.5464C0.239583 49.0085 0.575 49.2857 0.958333 49.2857C5.34271 49.2857 8.97239 47.3913 11.5839 45.4353C15.4411 47.8533 20.0052 49.2857 24.9167 49.2857C38.6807 49.2857 49.8333 38.258 49.8333 24.6429ZM64.4479 58.5268C67.3109 54.5223 69 49.64 69 44.3571C69 34.0533 62.5911 25.2281 53.5109 21.5471C53.6188 22.5636 53.6667 23.5955 53.6667 24.6429C53.6667 40.9533 40.7651 54.2143 24.9167 54.2143C23.6229 54.2143 22.3651 54.0911 21.1193 53.9216C24.8927 62.7777 33.7573 69 44.0833 69C48.9948 69 53.5589 67.583 57.4161 65.1496C60.0276 67.1056 63.6573 69 68.0417 69C68.425 69 68.7724 68.7074 68.9161 68.2607C69.0719 67.8141 69 67.2904 68.7365 66.9208C68.7005 66.8745 66.0531 63.1935 64.4479 58.5268Z\" fill=\"#212121\" /></svg></div>\r\n        <div className={Styles.likes}  >\r\n            <Heart  addLikeInTime={(e)=>addLikeInTime(e)} token={user.token} postid={props.id}></Heart>\r\n            <p className={Styles.likesNumber} onClick={()=>openshowLikesUserNames()}>{likesNumber}</p>\r\n          </div>\r\n        \r\n      </div>\r\n      {user.token!=false&&<div className={Styles.userAddComments}>\r\n        <div className={Styles.userImageInComments}>\r\n\r\n          {<img src={user.currentImageUrl || \"/avatar.png\"} />}\r\n        </div>\r\n        <div className={Styles.textAreaContainer}>\r\n        <textarea placeholder={\"say somthing\"}  onChange={(e)=>textAreaHolder(e)} value={textAreaData} className={Styles.textArea}/>\r\n        <div className={Styles.countLettres}><span className={Styles.countLettresCss} style={countLettres>=1000?{color:\"red\"}:{}}>{countLettres} : 1000</span></div>\r\n\r\n        </div>\r\n        <div className={Styles.emojiAndMaskAndPost}>\r\n        <div className={Styles.openOrCloseEmojiPicker} onClick={()=>closeOrOpenEmojiPicker()}>\r\n          <div className={Styles.emojiLogo}><Emoji emoji={{ id: 'smiling_face_with_3_hearts', skin: 3 }} size={16} /></div>\r\n          {closeOrOpenEmojiPickerState&&<div className={Styles.emojiPickerContainer}><Picker  perLine={EmojiContainerHeight}  onSelect={(e)=>addEmoji(e)} /></div>}\r\n\r\n        </div>\r\n        {props.allowAnonymeComments&&<div className={Styles.mask} ref={maskRef} postanonymously={language.postAnonymously} onClick={() => maskOn()}><Masksvg></Masksvg></div>}\r\n        <div className={Styles.postAndCounterContainer}>\r\n           <span className={Styles.postText} onClick={()=>{AddComment()}}><SentSvg></SentSvg></span>\r\n          </div>\r\n        </div>\r\n      </div>}\r\n      {comments && <div className={Styles.commentsContainer}>\r\n        {commentsData.map(e=><Comment currentUserId={user._id} ownerid={e.commentOwner} deleteCommentInCurrentTime={deleteCommentInCurrentTimefn} postid={props.id} publication={true} likesNumber={e.likes} token={user.token} date={e.date} commentid={e._id} key={e._id} text={e.commentText} name={e.commentOwner.userName} userProfileImageUrl={e.commentOwner.currentImageUrl}></Comment>)}\r\n        {moreComments&&<div className={Styles.loadMoreComments} onClick={()=>LoadMoreComments()}><p>View more comments</p></div>}\r\n      </div>}\r\n    </div>\r\n\r\n  )\r\n}\r\nexport default publication\r\nconst Masksvg=()=>{\r\n  return <svg height=\"512\" viewBox=\"0 0 512 512\" width=\"512\" xmlns=\"http://www.w3.org/2000/svg\"><g id=\"outline\"><path d=\"m491.062 136.609a8 8 0 0 0 -8.719 1.734l-18.343 18.344v-60.687a8 8 0 0 0 -13.314-5.979l-46.246 41.107a82.549 82.549 0 0 1 -54.899 20.872 97.989 97.989 0 0 0 -69.741 28.889l-7.8 7.8-5.805-5.806a104.745 104.745 0 0 0 -74.554-30.883 75.088 75.088 0 0 1 -38.5-10.611l10.559-35.227a102.439 102.439 0 0 0 -10.253-81.962l-2.587-4.312a8 8 0 0 0 -11.66-2.288 102.749 102.749 0 0 0 -40.1 69.1l-.953 7.618-4.834-4.3a7.99 7.99 0 0 0 -12.613 2.725 88.455 88.455 0 0 0 -56.7-20.743 8 8 0 0 0 -8 8v16a88.451 88.451 0 0 0 32 67.868v10.191a32 32 0 0 0 -22.628 54.628l6.2 6.2-15.51 124.121a7.991 7.991 0 0 0 1.282 5.43l16 24a8 8 0 0 0 11.094 2.218l3.562-2.375v43.719a8 8 0 0 0 2.343 5.657l24 24a8 8 0 0 0 11.314 0l24-24a8 8 0 0 0 2.316-6.321l-7.5-89.971a76.637 76.637 0 0 0 19.811 2.635h31.432a75.785 75.785 0 0 0 53.941-22.343l.687-.686a30.624 30.624 0 0 1 43.312 0l12.687 12.686a8 8 0 0 0 11.314 0l12.687-12.686a30.624 30.624 0 0 1 43.312 0l.687.686a75.785 75.785 0 0 0 53.941 22.343h19.716v144a8 8 0 0 0 8 8h32a8 8 0 0 0 8-8v-153.151a76.452 76.452 0 0 0 40-67.133v-123.716a8 8 0 0 0 -4.938-7.391zm-369.689 45.45-27.314-27.315v-10.744a16 16 0 0 1 27.313-11.313l22.059 22.058a16 16 0 0 1 -11.313 27.314zm-27.314 20.686-20.687-20.686 12.687-12.687 20.686 20.687zm28.767-140.6 7.517 7.516a8 8 0 0 0 8.187 1.933l12.924-4.308a86.486 86.486 0 0 1 .386 14.512l-21.386 5.347-12.491-12.496a86.745 86.745 0 0 1 4.863-12.508zm19.038-25.945a86.04 86.04 0 0 1 6.34 15.3l-10.043 3.348-6.828-6.828a86.291 86.291 0 0 1 10.531-11.82zm-27.51 57.465 7.989 7.988a8 8 0 0 0 7.6 2.1l19.145-4.786c-.23.864-.449 1.73-.707 2.589l-8.192 27.307-7.5-7.5a31.808 31.808 0 0 0 -12.94-7.856l-7.086-6.3zm-17.286 21.1q-.537.239-1.068.5v-1.448zm-65.068-26.313a72 72 0 0 1 16 3.726v19.822h-14.172a71.4 71.4 0 0 1 -1.828-16zm7.55 39.548h16.45a8 8 0 0 0 8-8v-19.8a71.77 71.77 0 0 1 16 14.58v18.209a32 32 0 0 0 -1.941 11.011v10.744l-16.4-16.4a8 8 0 0 0 -13.3 3.3 72.6 72.6 0 0 1 -8.809-13.644zm27.194 38.058-2.744 2.742v-5.49zm-30.058 28.687a15.9 15.9 0 0 1 11.314-4.686h10.744l27.315 27.314v10.745a16 16 0 0 1 -27.314 11.313l-22.058-22.059a16.017 16.017 0 0 1 -.001-22.627zm5.533 178.161-9.911-14.867 13.6-108.815 1.522 1.521a32.029 32.029 0 0 0 8.57 6.129v106.845zm37.781 71.781-16-16v-51.072l4.438-2.959a8 8 0 0 0 3.562-6.656v-107.946a31.852 31.852 0 0 0 9.474-2.033l14.246 170.946zm360 35.313h-16v-136.128a76.3 76.3 0 0 0 16-2.607zm40-212.284a60.285 60.285 0 0 1 -60.284 60.284h-31.432a59.89 59.89 0 0 1 -42.627-17.657l-.686-.687a46.631 46.631 0 0 0 -65.942 0l-7.029 7.031-7.029-7.031a46.631 46.631 0 0 0 -65.942 0l-.686.687a59.89 59.89 0 0 1 -42.627 17.657h-31.432a60.71 60.71 0 0 1 -21.247-3.895l-6.5-78.011a31.762 31.762 0 0 0 5.523-17.976v-10.745l19.314-19.314h10.745a32 32 0 0 0 32-32c0-.788-.038-1.569-.094-2.346a91.152 91.152 0 0 0 27.616 4.287 88.849 88.849 0 0 1 63.24 26.195l11.462 11.462a8 8 0 0 0 11.314 0l13.454-13.457a82.094 82.094 0 0 1 58.43-24.2 98.541 98.541 0 0 0 65.529-24.913l32.93-29.273v62.186a8 8 0 0 0 13.657 5.657l18.343-18.344z\"/><path d=\"m430.824 240.479 8.6-21.507a8 8 0 0 0 -7.424-10.972h-49.167a70.837 70.837 0 0 0 -63.354 39.155l-6.634 13.267a8 8 0 0 0 6.163 11.516l48.262 6.034a60.927 60.927 0 0 0 7.533.469 60.4 60.4 0 0 0 56.021-37.962zm-36.216 17.273a44.211 44.211 0 0 1 -25.354 4.343l-37.041-4.63 1.576-3.154a54.836 54.836 0 0 1 49.044-30.311h37.351l-4.215 10.537a44.34 44.34 0 0 1 -21.361 23.215z\"/><path d=\"m232.521 247.156a70.834 70.834 0 0 0 -63.354-39.156h-49.167a8 8 0 0 0 -7.428 10.972l8.6 21.507a60.351 60.351 0 0 0 63.554 37.493l48.262-6.034a8 8 0 0 0 6.163-11.516zm-49.775 14.944a44.384 44.384 0 0 1 -46.715-27.559l-4.215-10.541h37.351a54.832 54.832 0 0 1 49.044 30.312l1.576 3.153z\"/><path d=\"m384 288h16v16h-16z\"/><path d=\"m120 280h16v16h-16z\"/><path d=\"m152 288h16v16h-16z\"/><path d=\"m416 280h16v16h-16z\"/><path d=\"m432 256h16v16h-16z\"/><path d=\"m104 256h16v16h-16z\"/></g></svg>\r\n}\r\nconst SentSvg=()=>{\r\n  return (\r\n      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 64 64\"><g id=\"Layer_95\" data-name=\"Layer 95\"><path d=\"M53.06,10.94a1.5,1.5,0,0,0-1.53-.36l-40,13.33a1.51,1.51,0,0,0-.06,2.83l18.7,7.09,7.09,18.7a1.51,1.51,0,0,0,1.44,1,1.49,1.49,0,0,0,1.39-1l13.33-40A1.5,1.5,0,0,0,53.06,10.94Z\"/><path d=\"M20.22,35.48a1.5,1.5,0,0,0-2.12-2.12l-4.48,4.48a1.51,1.51,0,0,0,0,2.12,1.49,1.49,0,0,0,2.12,0Z\"/><path d=\"M23.88,40.12a1.49,1.49,0,0,0-2.12,0L16.08,45.8a1.5,1.5,0,0,0,2.12,2.12l5.68-5.68A1.49,1.49,0,0,0,23.88,40.12Z\"/><path d=\"M28.52,43.78,24,48.26a1.5,1.5,0,0,0,2.12,2.12l4.48-4.48A1.5,1.5,0,0,0,28.52,43.78Z\"/></g></svg>\r\n      )\r\n}\r\nconst SettingsPost=(props)=>{\r\n  const [errorMessage,setErrorMessage]=React.useState({state:false,text:\"\"})// when state true show  pop up \r\n const deleteImageFn=()=>{\r\n     deletePost({postid:props.postid},props.token).then(result=>{\r\n      location.reload();\r\n      }).catch(error=>{\r\n          console.log(error)\r\n      })\r\n  }\r\n  const closePopUp=()=>{\r\n      setErrorMessage({state:false,text:\"\"})\r\n    }\r\n  return (\r\n          <div className={Styles.containerSettings}>\r\n              {errorMessage.state==true&&<PopUpMessage fnclose={()=>closePopUp()} openPopUp={errorMessage}></PopUpMessage>}\r\n              <div className={Styles.paramsContainer}><h3>Report</h3></div>\r\n              {props.ownerid==props.currentUserId&&<div className={Styles.paramsContainer} onClick={()=>deleteImageFn()}><h3>Delete</h3></div>}\r\n              <div className={Styles.paramsContainer} onClick={()=>props.closeComponenetfn()}><h3>Close</h3></div>\r\n          </div>\r\n          )\r\n}"]},"metadata":{},"sourceType":"module"}