{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"F:/AHKI/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"F:/AHKI/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _toConsumableArray from \"F:/AHKI/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"F:/AHKI/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"F:/AHKI/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"F:\\\\AHKI\\\\pages\\\\chat.js\",\n    _this = this,\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport Style from '../styles/chat.module.scss';\nimport NavBar from '../components/navBar/NavBar';\nimport { Picker, Emoji } from 'emoji-mart';\nimport 'emoji-mart/css/emoji-mart.css';\nimport { searchUserNameApi } from '../services/user';\nimport { addMessage, getMessagesOfCurrentconversation, getUserWhoChatWith } from '../services/chat';\nimport socketContext from '../context/socketContext';\nimport userContext from '../context/userContext';\n\nvar chat = function chat(props) {\n  _s();\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      closeOrOpenEmojiPickerState = _React$useState2[0],\n      setcloseOrOpenEmojiPickerState = _React$useState2[1];\n\n  var _React$useState3 = React.useState(9),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      EmojiContainerHeight = _React$useState4[0],\n      setEmojiContainerHeight = _React$useState4[1]; //responsive handler\n\n\n  var _React$useState5 = React.useState([]),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      listOfUsers = _React$useState6[0],\n      setListOfUsers = _React$useState6[1];\n\n  var _React$useState7 = React.useState({\n    currentImageUrl: undefined,\n    userName: undefined,\n    _id: undefined\n  }),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      currentUserToChatWith = _React$useState8[0],\n      setCurrentUserToChatWith = _React$useState8[1];\n\n  var _React$useState9 = React.useState(\"\"),\n      _React$useState10 = _slicedToArray(_React$useState9, 2),\n      message = _React$useState10[0],\n      setMessage = _React$useState10[1];\n\n  var _React$useState11 = React.useState([]),\n      _React$useState12 = _slicedToArray(_React$useState11, 2),\n      currentChats = _React$useState12[0],\n      setCurrentChats = _React$useState12[1];\n\n  var messagesComp = React.useRef(null);\n\n  var _React$useContext = React.useContext(userContext),\n      _React$useContext2 = _slicedToArray(_React$useContext, 2),\n      user = _React$useContext2[0],\n      setUser = _React$useContext2[1];\n\n  var _React$useContext3 = React.useContext(socketContext),\n      _React$useContext4 = _slicedToArray(_React$useContext3, 2),\n      socket = _React$useContext4[0],\n      setSocket = _React$useContext4[1];\n\n  var _React$useState13 = React.useState(function () {\n    return 0;\n  }),\n      _React$useState14 = _slicedToArray(_React$useState13, 2),\n      skip = _React$useState14[0],\n      setSkip = _React$useState14[1];\n\n  var _React$useState15 = React.useState(false),\n      _React$useState16 = _slicedToArray(_React$useState15, 2),\n      isWritingState = _React$useState16[0],\n      setIsWritingState = _React$useState16[1];\n\n  var _React$useState17 = React.useState(false),\n      _React$useState18 = _slicedToArray(_React$useState17, 2),\n      vu = _React$useState18[0],\n      setVu = _React$useState18[1];\n\n  React.useEffect(function () {\n    if (user._id != undefined && user._id.length > 2) getUserWhoChatWith({}, props.token).then(function (result) {\n      var newUserWhoChatWith = result.data.data.map(function (e) {\n        if (e.firstUser._id == user._id) {\n          return Promise.resolve(_objectSpread(_objectSpread({}, e.secoundUser), {}, {\n            notSeenMessageNumber: e.notSeenMessageNumber\n          }));\n        } else {\n          return Promise.resolve(_objectSpread(_objectSpread({}, e.firstUser), {}, {\n            notSeenMessageNumber: e.notSeenMessageNumber\n          }));\n        }\n      });\n      Promise.all(newUserWhoChatWith).then(function (newarray) {\n        setListOfUsers(_toConsumableArray(newarray));\n      });\n    })[\"catch\"](function (e) {\n      return console.log(e.message);\n    });\n  }, [user]);\n  React.useEffect(function () {\n    if (currentUserToChatWith._id != undefined) {\n      getMessagesOfCurrentconversation({\n        secondUser: currentUserToChatWith._id,\n        skip: 0\n      }, props.token).then(function (data) {\n        setCurrentChats(_toConsumableArray(data.data.data.reverse()));\n        messagesComp.current.scrollTop = messagesComp.current.scrollHeight + messagesComp.current.clientHeight;\n      })[\"catch\"](function (error) {\n        console.log(error);\n      });\n      socket.emit(\"vu\", {\n        state: true,\n        otherUserId: currentUserToChatWith._id\n      });\n    }\n  }, [currentUserToChatWith]);\n\n  var addEmoji = function addEmoji(e) {\n    var sym = e.unified.split('-');\n    var codesArray = [];\n    sym.forEach(function (el) {\n      return codesArray.push('0x' + el);\n    });\n    var emoji = String.fromCodePoint.apply(String, codesArray);\n    setMessage(function (el) {\n      return el + emoji;\n    });\n  };\n\n  var closeOrOpenEmojiPicker = function closeOrOpenEmojiPicker() {\n    setcloseOrOpenEmojiPickerState(function (e) {\n      return !e;\n    });\n  };\n\n  var searchForUser = function searchForUser(e) {\n    searchUserNameApi(e.target.value, props.token).then(function (result) {\n      if (result.data.data != undefined) {\n        setListOfUsers(function (e) {\n          return _toConsumableArray(result.data.data);\n        });\n      }\n    });\n  };\n\n  var getUserdataFn = function getUserdataFn(currentUserData) {\n    setCurrentUserToChatWith(currentUserData);\n  };\n\n  var sendMessage = function sendMessage() {\n    if (message.length > 0 && currentUserToChatWith._id != undefined) {\n      addMessage({\n        receiver: currentUserToChatWith._id,\n        message: message,\n        FirstTime: currentChats.length\n      }, props.token).then(function (data) {\n        setCurrentChats(function (e) {\n          var r = Math.random().toString(36).substring(7);\n          return [].concat(_toConsumableArray(e), [{\n            users: [user._id],\n            message: message,\n            _id: r\n          }]);\n        });\n        messagesComp.current.scrollTop = messagesComp.current.scrollHeight + messagesComp.current.clientHeight;\n        socket.emit(\"sendMessageFromUserToUser\", {\n          otherUserId: currentUserToChatWith._id,\n          text: message,\n          senderId: user._id\n        });\n        setMessage(\"\");\n      })[\"catch\"](function (error) {\n        console.log(error);\n      });\n    }\n  };\n\n  var messageHandler = function messageHandler(e) {\n    if (currentUserToChatWith._id != undefined) {\n      if (e.target.value.length > 0) {\n        socket.emit(\"isWriting\", {\n          isWriting: true,\n          otherUserId: currentUserToChatWith._id\n        });\n      } else {\n        socket.emit(\"isWriting\", {\n          isWriting: false,\n          otherUserId: currentUserToChatWith._id\n        });\n      }\n    }\n\n    setMessage(e.target.value);\n  };\n\n  React.useEffect(function () {\n    function chatHandler(_x) {\n      return _chatHandler.apply(this, arguments);\n    }\n\n    function _chatHandler() {\n      _chatHandler = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(data) {\n        var audio, ListOfUser;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                audio = new Audio(\"./msgSound.mp3\");\n                audio.play();\n                setIsWritingState(false);\n\n                if (vu == true) {\n                  socket.emit(\"vu\", {\n                    state: true,\n                    otherUserId: currentUserToChatWith._id\n                  });\n                }\n\n                _context.next = 6;\n                return listOfUsers.map(function (e) {\n                  if (data.senderId == e._id && currentUserToChatWith._id != e._id) {\n                    e.notSeenMessageNumber = e.notSeenMessageNumber + 1;\n                    return Promise.resolve(e);\n                  } else {\n                    return Promise.resolve(e);\n                  }\n                });\n\n              case 6:\n                ListOfUser = _context.sent;\n                Promise.all(ListOfUser).then(function (data) {\n                  setListOfUsers(data);\n                });\n\n                if (data.senderId == currentUserToChatWith._id) {\n                  setCurrentChats(function (e) {\n                    var r = Math.random().toString(36).substring(7);\n                    return [].concat(_toConsumableArray(e), [{\n                      users: [data.senderId],\n                      message: data.text,\n                      _id: r\n                    }]);\n                  });\n                  messagesComp.current.scrollTop = messagesComp.current.scrollHeight + messagesComp.current.clientHeight;\n                } else {}\n\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n      return _chatHandler.apply(this, arguments);\n    }\n\n    function isWriting(data) {\n      setIsWritingState(data.isWriting);\n    }\n\n    var setvu = function setvu(data) {\n      if (currentChats.length > 0) {\n        for (var i = currentChats.length; i > 0; i--) {\n          if (document.getElementsByClassName(Style.yourMessage)[i] != undefined) {\n            document.getElementsByClassName(Style.yourMessage)[i].childNodes[0].style.color = \"#1876f3\";\n            console.log(document.getElementsByClassName(Style.yourMessage)[i].childNodes[0]);\n          } //  document.getElementsByClassName(Style.yourMessage)[i].style.color=\"#1876f3\"\n\n        }\n      }\n    };\n\n    if (socket != undefined && socket != null) {\n      socket.on(\"isWritingState\", isWriting);\n      socket.on(\"getMessageFromUserToUser\", chatHandler);\n      socket.on(\"setvu\", setvu);\n    }\n\n    return function () {\n      if (socket != undefined && socket != null) {\n        socket.off('getMessageFromUserToUser', chatHandler);\n        socket.off(\"isWritingState\", isWriting);\n        socket.off(\"isWritingState\", setvu);\n      }\n    };\n  });\n\n  var scrollfn = function scrollfn(e) {\n    //if( e.target.scrollTop === (e.target.scrollHeight - e.target.offsetHeight)){\n    if (e.target.scrollTop === 0) {\n      setSkip(function (e) {\n        return e + 20;\n      });\n    }\n  };\n\n  React.useEffect(function () {\n    getMessagesOfCurrentconversation({\n      secondUser: currentUserToChatWith._id,\n      skip: skip\n    }, props.token).then(function (data) {\n      setCurrentChats(function (e) {\n        return [].concat(_toConsumableArray(data.data.data.reverse()), _toConsumableArray(e));\n      });\n    })[\"catch\"](function (error) {\n      console.log(error);\n    });\n  }, [skip]);\n\n  var onFocusVu = function onFocusVu(e) {\n    if (e._reactName == \"onFocus\") {\n      setVu(true);\n      socket.emit(\"vu\", {\n        state: true,\n        otherUserId: currentUserToChatWith._id\n      });\n    } else {\n      setVu(false);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: Style.container,\n    children: [/*#__PURE__*/_jsxDEV(NavBar, {\n      token: props.token\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 19\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: Style.chatAndRandomOnlineUserContaner,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: Style.UserContaner,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: Style.header,\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"contacts\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 29\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 25\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: Style.listContacs,\n          children: listOfUsers.map(function (e) {\n            return /*#__PURE__*/_jsxDEV(Users, {\n              getUserdata: getUserdataFn,\n              userData: e\n            }, e._id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 45\n            }, _this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 25\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: Style.bottom,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: Style.searchContainer,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: Style.inputcss,\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                onChange: function onChange(e) {\n                  return searchForUser(e);\n                },\n                type: \"text\",\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 220,\n                columnNumber: 96\n              }, _this), /*#__PURE__*/_jsxDEV(\"label\", {\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Search users\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 220,\n                  columnNumber: 172\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 220,\n                columnNumber: 165\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 64\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 25\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 25\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 21\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: Style.chat,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: Style.header,\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Messages\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 25\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 21\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: Style.chatContainer,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: Style.headerOfChatuserNameAndName,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: Style.userImageContainer,\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: currentUserToChatWith.currentImageUrl || \"/avatar.png\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 229,\n                columnNumber: 71\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 29\n            }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: Style.userName,\n              children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                children: currentUserToChatWith.userName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 230,\n                columnNumber: 61\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 29\n            }, _this), isWritingState && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: Style.isWritingContainer,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: Style.ldsellipsis,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 232,\n                  columnNumber: 64\n                }, _this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 232,\n                  columnNumber: 75\n                }, _this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 232,\n                  columnNumber: 86\n                }, _this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 232,\n                  columnNumber: 97\n                }, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 232,\n                columnNumber: 29\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 46\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 25\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            onScroll: function onScroll(e) {\n              return scrollfn(e);\n            },\n            ref: messagesComp,\n            className: Style.messages,\n            children: currentChats.map(function (e) {\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: Style.oneMessage,\n                children: e.users[0] == currentUserToChatWith._id ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: Style.messageText,\n                  \"text-data\": e.date != undefined ? e.date.slice(0, 10) + \" \" + e.date.slice(11, 16) : false,\n                  style: {\n                    \"--i\": \"0%\",\n                    \"float\": \"left\",\n                    backgroundColor: \"#e4e6eb\",\n                    color: \"black\"\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: e.message\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 240,\n                    columnNumber: 226\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 240,\n                  columnNumber: 37\n                }, _this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"\".concat(Style.messageText, \" \").concat(Style.yourMessage),\n                  \"text-data\": e.date != undefined ? e.date.slice(0, 10) + \" \" + e.date.slice(11, 16) : false,\n                  style: {\n                    \"--i\": \"-100%\",\n                    \"float\": \"right\",\n                    backgroundColor: \"#1876f3\",\n                    color: \"white\"\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    children: e.message\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 241,\n                    columnNumber: 257\n                  }, _this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    style: e.seen == true ? {\n                      color: \"#1876f3\"\n                    } : {\n                      color: \"black\"\n                    },\n                    className: Style.seen,\n                    children: \"\\u2714\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 241,\n                    columnNumber: 276\n                  }, _this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 241,\n                  columnNumber: 37\n                }, _this)\n              }, e._id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 238,\n                columnNumber: 40\n              }, _this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 25\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 21\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: Style.sendMessage,\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: function onSubmit(e) {\n              return e.preventDefault();\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: Style.inputContainer,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: Style.inputcss,\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  onBlur: function onBlur(e) {\n                    return onFocusVu(e);\n                  },\n                  onFocus: function onFocus(e) {\n                    return onFocusVu(e);\n                  },\n                  value: message,\n                  onChange: function onChange(e) {\n                    return messageHandler(e);\n                  },\n                  type: \"text\",\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 249,\n                  columnNumber: 95\n                }, _this), /*#__PURE__*/_jsxDEV(\"label\", {\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"Message\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 249,\n                    columnNumber: 243\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 249,\n                  columnNumber: 236\n                }, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 249,\n                columnNumber: 63\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 25\n            }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: Style.btns,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: Style.openOrCloseEmojiPicker,\n                onClick: function onClick() {\n                  return closeOrOpenEmojiPicker();\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: Style.emojiLogo,\n                  children: /*#__PURE__*/_jsxDEV(Emoji, {\n                    emoji: {\n                      id: 'smiling_face_with_3_hearts',\n                      skin: 3\n                    },\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 252,\n                    columnNumber: 58\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 252,\n                  columnNumber: 25\n                }, _this), closeOrOpenEmojiPickerState && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: Style.emojiPickerContainer,\n                  children: /*#__PURE__*/_jsxDEV(Picker, {\n                    perLine: EmojiContainerHeight,\n                    onSelect: function onSelect(e) {\n                      return addEmoji(e);\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 253,\n                    columnNumber: 99\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 253,\n                  columnNumber: 55\n                }, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 251,\n                columnNumber: 25\n              }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: Style.btnsend,\n                onClick: function onClick() {\n                  return sendMessage();\n                },\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: Style.sendMessageBtn,\n                  children: /*#__PURE__*/_jsxDEV(SentSvg, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 255,\n                    columnNumber: 145\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 255,\n                  columnNumber: 105\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 29\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 25\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 25\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 21\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 21\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 17\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 208,\n    columnNumber: 9\n  }, _this);\n};\n\n_s(chat, \"P7L4O7MDcVEpGUX624gzh6fPk+A=\");\n\nexport var __N_SSP = true;\nexport default chat;\n\nvar SentSvg = function SentSvg() {\n  return /*#__PURE__*/_jsxDEV(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 64 64\",\n    children: /*#__PURE__*/_jsxDEV(\"g\", {\n      id: \"Layer_95\",\n      \"data-name\": \"Layer 95\",\n      children: [/*#__PURE__*/_jsxDEV(\"path\", {\n        d: \"M53.06,10.94a1.5,1.5,0,0,0-1.53-.36l-40,13.33a1.51,1.51,0,0,0-.06,2.83l18.7,7.09,7.09,18.7a1.51,1.51,0,0,0,1.44,1,1.49,1.49,0,0,0,1.39-1l13.33-40A1.5,1.5,0,0,0,53.06,10.94Z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 107\n      }, _this), /*#__PURE__*/_jsxDEV(\"path\", {\n        d: \"M20.22,35.48a1.5,1.5,0,0,0-2.12-2.12l-4.48,4.48a1.51,1.51,0,0,0,0,2.12,1.49,1.49,0,0,0,2.12,0Z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 291\n      }, _this), /*#__PURE__*/_jsxDEV(\"path\", {\n        d: \"M23.88,40.12a1.49,1.49,0,0,0-2.12,0L16.08,45.8a1.5,1.5,0,0,0,2.12,2.12l5.68-5.68A1.49,1.49,0,0,0,23.88,40.12Z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 397\n      }, _this), /*#__PURE__*/_jsxDEV(\"path\", {\n        d: \"M28.52,43.78,24,48.26a1.5,1.5,0,0,0,2.12,2.12l4.48-4.48A1.5,1.5,0,0,0,28.52,43.78Z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 518\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 69\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 272,\n    columnNumber: 9\n  }, _this);\n};\n\n_c = SentSvg;\n\nvar Users = function Users(props) {\n  _s2();\n\n  var _React$useState19 = React.useState(props.userData.notSeenMessageNumber),\n      _React$useState20 = _slicedToArray(_React$useState19, 2),\n      notSeenMessageNumberlocal = _React$useState20[0],\n      setNotSeenMessageNumberlocal = _React$useState20[1];\n\n  React.useEffect(function () {\n    setNotSeenMessageNumberlocal(props.userData.notSeenMessageNumber);\n  }, [props.userData.notSeenMessageNumber]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: Style.userContainer,\n      onClick: function onClick() {\n        props.getUserdata(props.userData), setNotSeenMessageNumberlocal(0);\n      },\n      children: [notSeenMessageNumberlocal != 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: Style.notSeenMessageNumbe,\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          children: notSeenMessageNumberlocal\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 91\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 48\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: Style.imgContainer,\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: props.userData.currentImageUrl || \"/avatar.png\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 54\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: Style.userName,\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: props.userData.userName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 50\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 17\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 14\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 281,\n    columnNumber: 9\n  }, _this);\n};\n\n_s2(Users, \"pd1fD7onXKAt+z6/CWeN/oALkEw=\");\n\n_c2 = Users;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"SentSvg\");\n$RefreshReg$(_c2, \"Users\");","map":{"version":3,"sources":["F:/AHKI/pages/chat.js"],"names":["React","Style","NavBar","Picker","Emoji","searchUserNameApi","addMessage","getMessagesOfCurrentconversation","getUserWhoChatWith","socketContext","userContext","chat","props","useState","closeOrOpenEmojiPickerState","setcloseOrOpenEmojiPickerState","EmojiContainerHeight","setEmojiContainerHeight","listOfUsers","setListOfUsers","currentImageUrl","undefined","userName","_id","currentUserToChatWith","setCurrentUserToChatWith","message","setMessage","currentChats","setCurrentChats","messagesComp","useRef","useContext","user","setUser","socket","setSocket","skip","setSkip","isWritingState","setIsWritingState","vu","setVu","useEffect","length","token","then","result","newUserWhoChatWith","data","map","e","firstUser","Promise","resolve","secoundUser","notSeenMessageNumber","all","newarray","console","log","secondUser","reverse","current","scrollTop","scrollHeight","clientHeight","error","emit","state","otherUserId","addEmoji","sym","unified","split","codesArray","forEach","el","push","emoji","String","fromCodePoint","closeOrOpenEmojiPicker","searchForUser","target","value","getUserdataFn","currentUserData","sendMessage","receiver","FirstTime","r","Math","random","toString","substring","users","text","senderId","messageHandler","isWriting","chatHandler","audio","Audio","play","ListOfUser","setvu","i","document","getElementsByClassName","yourMessage","childNodes","style","color","on","off","scrollfn","onFocusVu","_reactName","container","chatAndRandomOnlineUserContaner","UserContaner","header","listContacs","bottom","searchContainer","inputcss","chatContainer","headerOfChatuserNameAndName","userImageContainer","isWritingContainer","ldsellipsis","messages","oneMessage","messageText","date","slice","backgroundColor","seen","preventDefault","inputContainer","btns","openOrCloseEmojiPicker","emojiLogo","id","skin","emojiPickerContainer","btnsend","sendMessageBtn","SentSvg","Users","userData","notSeenMessageNumberlocal","setNotSeenMessageNumberlocal","userContainer","getUserdata","notSeenMessageNumbe","imgContainer"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport Style from '../styles/chat.module.scss'\r\nimport NavBar from '../components/navBar/NavBar'\r\nimport { Picker,Emoji  } from 'emoji-mart'\r\nimport 'emoji-mart/css/emoji-mart.css'\r\nimport {searchUserNameApi} from '../services/user'\r\nimport {addMessage,getMessagesOfCurrentconversation,getUserWhoChatWith} from '../services/chat';\r\nimport socketContext from '../context/socketContext'\r\nimport userContext from '../context/userContext'\r\n\r\n\r\nconst chat = (props) => {\r\n    const [closeOrOpenEmojiPickerState,setcloseOrOpenEmojiPickerState]=React.useState(false)\r\n    const [EmojiContainerHeight, setEmojiContainerHeight] = React.useState(9)//responsive handler\r\n    const [listOfUsers,setListOfUsers]=React.useState([])\r\n    const [currentUserToChatWith,setCurrentUserToChatWith]=React.useState({currentImageUrl:undefined,userName:undefined,_id:undefined})\r\n    const [message,setMessage]=React.useState(\"\")\r\n    const [currentChats,setCurrentChats]=React.useState([])\r\n    const messagesComp=React.useRef(null)\r\n    const [user,setUser]=React.useContext(userContext)\r\n    const [socket,setSocket]=React.useContext(socketContext)\r\n    const [skip,setSkip]=React.useState(()=>0)\r\n    const [isWritingState,setIsWritingState]=React.useState(false)\r\n    const [vu,setVu]=React.useState(false)\r\n\r\n    React.useEffect(()=>{\r\n        if(user._id!=undefined&& user._id.length>2)\r\n        getUserWhoChatWith({},props.token).then(result=>{\r\n            let newUserWhoChatWith=result.data.data.map(e=>{\r\n                if(e.firstUser._id==user._id){\r\n                    return Promise.resolve({...e.secoundUser,notSeenMessageNumber:e.notSeenMessageNumber})\r\n                }else{\r\n                    return Promise.resolve({...e.firstUser,notSeenMessageNumber:e.notSeenMessageNumber})\r\n                }\r\n           \r\n               \r\n            })\r\n            Promise.all(newUserWhoChatWith).then(newarray=>{\r\n              setListOfUsers([...newarray])\r\n            })\r\n         \r\n          }).catch(e=>console.log(e.message))\r\n    },[user])\r\n    React.useEffect(()=>{\r\n        if(currentUserToChatWith._id!=undefined){\r\n            getMessagesOfCurrentconversation({secondUser:currentUserToChatWith._id,skip:0},props.token).then(data=>{\r\n                \r\n                setCurrentChats([...data.data.data.reverse()])\r\n                messagesComp.current.scrollTop=messagesComp.current.scrollHeight+ messagesComp.current.clientHeight;\r\n\r\n\r\n            }).catch(error=>{\r\n                console.log(error)\r\n            })\r\n            socket.emit(\"vu\",{state:true,otherUserId:currentUserToChatWith._id})\r\n\r\n        }\r\n  \r\n    \r\n    \r\n    },[currentUserToChatWith])\r\n    const addEmoji=(e)=>{\r\n        let sym = e.unified.split('-')\r\n        let codesArray = []\r\n        sym.forEach(el => codesArray.push('0x' + el))\r\n        let emoji = String.fromCodePoint(...codesArray)\r\n        setMessage(el=>{return el+emoji})\r\n      };\r\n    const closeOrOpenEmojiPicker=()=>{\r\n        setcloseOrOpenEmojiPickerState(e=>!e)\r\n      }\r\n      const searchForUser=(e)=>{\r\n            searchUserNameApi(e.target.value,props.token).then((result=>{\r\n                if(result.data.data!=undefined){\r\n                    setListOfUsers(e=>{\r\n                        return [...result.data.data]\r\n                    }) \r\n                }\r\n            }))\r\n        \r\n      }\r\n      const getUserdataFn=(currentUserData)=>{\r\n        setCurrentUserToChatWith(currentUserData)\r\n      }\r\n      const sendMessage=()=>{\r\n        if(message.length>0&&currentUserToChatWith._id!=undefined){\r\n        addMessage({receiver:currentUserToChatWith._id,message:message,FirstTime:currentChats.length},props.token).then(data=>{\r\n            setCurrentChats(e=>{\r\n                let r = Math.random().toString(36).substring(7);\r\n                return [...e,{users:[user._id],message:message,_id:r}]\r\n\r\n            })\r\n            \r\n            messagesComp.current.scrollTop=messagesComp.current.scrollHeight+ messagesComp.current.clientHeight;\r\n\r\n                socket.emit(\"sendMessageFromUserToUser\",{otherUserId:currentUserToChatWith._id,text:message,senderId:user._id})\r\n\r\n          \r\n\r\n            setMessage(\"\")\r\n        }).catch(error=>{\r\n            console.log(error)\r\n        })\r\n    }\r\n      }\r\n      const messageHandler=(e)=>{\r\n          if(currentUserToChatWith._id!=undefined){\r\n            if(e.target.value.length>0){\r\n                socket.emit(\"isWriting\",{isWriting:true,otherUserId:currentUserToChatWith._id})\r\n              }else{\r\n                socket.emit(\"isWriting\",{isWriting:false,otherUserId:currentUserToChatWith._id})\r\n              }\r\n          }\r\n \r\n        setMessage(e.target.value)\r\n      }\r\n      React.useEffect(()=>{\r\n        async  function  chatHandler(data){\r\n\r\n            let audio = new Audio(\"./msgSound.mp3\")\r\n            audio.play()\r\n            setIsWritingState(false)\r\n            if(vu==true){\r\n                \r\n                socket.emit(\"vu\",{state:true,otherUserId:currentUserToChatWith._id})\r\n            }\r\n            let ListOfUser = await listOfUsers.map((e)=>{\r\n                if(data.senderId==e._id && currentUserToChatWith._id!=e._id){\r\n                    e.notSeenMessageNumber=e.notSeenMessageNumber+1\r\n                    return Promise.resolve(e)\r\n                }else{\r\n                    return Promise.resolve(e)\r\n                }\r\n            })\r\n            Promise.all(ListOfUser).then(data=>{\r\n                \r\n                setListOfUsers(data)\r\n            })\r\n            if(data.senderId==currentUserToChatWith._id){\r\n                \r\n\r\n                setCurrentChats(e=>{\r\n                    let r = Math.random().toString(36).substring(7);\r\n                    return [...e,{users:[data.senderId],message:data.text,_id:r}]\r\n                })\r\n                messagesComp.current.scrollTop=messagesComp.current.scrollHeight+ messagesComp.current.clientHeight;\r\n\r\n            }else{\r\n\r\n            }\r\n        }\r\n        function isWriting(data){\r\n            \r\n            setIsWritingState(data.isWriting)\r\n        }\r\n        const setvu=(data)=>{\r\n            if(currentChats.length>0){\r\n                for(let i=currentChats.length;i>0;i--){\r\n                    if(document.getElementsByClassName(Style.yourMessage)[i]!=undefined){\r\n                        document.getElementsByClassName(Style.yourMessage)[i].childNodes[0].style.color=\"#1876f3\"\r\n                        console.log(document.getElementsByClassName(Style.yourMessage)[i].childNodes[0])\r\n\r\n                    }\r\n                    //  document.getElementsByClassName(Style.yourMessage)[i].style.color=\"#1876f3\"\r\n                }\r\n            }\r\n        }\r\n        if(socket!=undefined && socket!=null){\r\n        socket.on(\"isWritingState\",isWriting)\r\n        socket.on(\"getMessageFromUserToUser\",chatHandler)\r\n        socket.on(\"setvu\",setvu)\r\n          }\r\n          return () => {\r\n            if(socket!=undefined && socket!=null){\r\n                socket.off('getMessageFromUserToUser', chatHandler);\r\n                socket.off(\"isWritingState\",isWriting)\r\n                socket.off(\"isWritingState\",setvu)\r\n\r\n            }\r\n          }\r\n      })\r\n      const scrollfn=(e)=>{\r\n          //if( e.target.scrollTop === (e.target.scrollHeight - e.target.offsetHeight)){\r\n          if( e.target.scrollTop === 0){\r\n            setSkip(e=>e+20)\r\n          }\r\n          \r\n      }\r\n      React.useEffect(()=>{\r\n          \r\n        getMessagesOfCurrentconversation({secondUser:currentUserToChatWith._id,skip:skip},props.token).then(data=>{\r\n            setCurrentChats(e=>[...data.data.data.reverse(),...e])\r\n           \r\n        }).catch(error=>{\r\n            console.log(error)\r\n        })\r\n      },[skip])\r\n      const onFocusVu=(e)=>{\r\n          if(e._reactName==\"onFocus\"){\r\n            setVu(true)\r\n            socket.emit(\"vu\",{state:true,otherUserId:currentUserToChatWith._id})\r\n          }else{\r\n            setVu(false)\r\n          }\r\n          \r\n      }\r\n    return (\r\n        <div className={Style.container} >\r\n                  <NavBar token={props.token}></NavBar>\r\n                <div className={Style.chatAndRandomOnlineUserContaner}>\r\n                    <div className={Style.UserContaner}>\r\n                        <div className={Style.header}>\r\n                            <h1>contacts</h1>\r\n                        </div>\r\n                        <div className={Style.listContacs}>\r\n                        {listOfUsers.map(e=><Users getUserdata={getUserdataFn} key={e._id} userData={e}></Users>)}\r\n\r\n                        </div>\r\n                        <div className={Style.bottom}>\r\n                        <div className={Style.searchContainer}><div className={Style.inputcss}><input onChange={(e)=>searchForUser(e)} type=\"text\" required></input><label><span>Search users</span></label></div></div>\r\n                        </div>\r\n                    </div>\r\n                    <div className={Style.chat}>\r\n                    <div className={Style.header}>\r\n                        <h1>Messages</h1>\r\n                    </div>\r\n                    <div className={Style.chatContainer}>\r\n                        <div className={Style.headerOfChatuserNameAndName}>\r\n                            <div className={Style.userImageContainer}><img src={currentUserToChatWith.currentImageUrl || \"/avatar.png\"} /></div>\r\n                            <div className={Style.userName}><h3>{currentUserToChatWith.userName}</h3></div>\r\n                            {isWritingState&&<div className={Style.isWritingContainer}>\r\n                            <div className={Style.ldsellipsis}><div></div><div></div><div></div><div></div></div>\r\n                                </div>}\r\n\r\n                        </div>\r\n                        <div onScroll={(e)=>scrollfn(e)} ref={messagesComp} className={Style.messages}>\r\n                            {currentChats.map(e=>{\r\n                                return(<div key={e._id} className={Style.oneMessage}>\r\n                                    {e.users[0]==currentUserToChatWith._id?\r\n                                    <div className={Style.messageText} text-data={e.date!=undefined?e.date.slice(0,10)+\" \"+e.date.slice(11,16):false}  style={{\"--i\":\"0%\",float:\"left\",backgroundColor:\"#e4e6eb\",color:\"black\"}}><p>{e.message}</p></div>:\r\n                                    <div className={`${Style.messageText} ${Style.yourMessage}`}  text-data={e.date!=undefined?e.date.slice(0,10)+\" \"+e.date.slice(11,16):false}  style={{\"--i\":\"-100%\",float:\"right\",backgroundColor:\"#1876f3\",color:\"white\"}}><p>{e.message}</p>{<span style={e.seen==true?{color:\"#1876f3\"}:{color:\"black\"}} className={Style.seen}>&#10004;</span>}</div>\r\n                                    }\r\n                                </div>)\r\n                            })}\r\n                        </div>\r\n                    </div>\r\n                    <div className={Style.sendMessage}>\r\n                        <form onSubmit={e=>e.preventDefault()} >\r\n                        <div className={Style.inputContainer}><div className={Style.inputcss}><input onBlur={(e)=>onFocusVu(e)} onFocus={(e)=>onFocusVu(e)} value={message} onChange={(e)=>messageHandler(e)} type=\"text\" required></input><label><span>Message</span></label></div></div>\r\n                        <div className={Style.btns}>\r\n                        <div className={Style.openOrCloseEmojiPicker} onClick={()=>closeOrOpenEmojiPicker()}>\r\n                        <div className={Style.emojiLogo}><Emoji emoji={{ id: 'smiling_face_with_3_hearts', skin: 3 }} size={16} /></div>\r\n                        {closeOrOpenEmojiPickerState&&<div className={Style.emojiPickerContainer}><Picker perLine={EmojiContainerHeight} onSelect={(e)=>addEmoji(e)} /></div>}\r\n                        </div>\r\n                            <button type=\"submit\" className={Style.btnsend} onClick={()=>sendMessage()}><span className={Style.sendMessageBtn} ><SentSvg></SentSvg></span></button>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                    </div>\r\n                </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default chat\r\nexport async function getServerSideProps({ req, res }) {\r\n    return req.cookies.token ? { props: { token: req.cookies.token } } : { props: { token: false } }\r\n  }\r\n\r\n  const SentSvg=()=>{\r\n    return (\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 64 64\"><g id=\"Layer_95\" data-name=\"Layer 95\"><path d=\"M53.06,10.94a1.5,1.5,0,0,0-1.53-.36l-40,13.33a1.51,1.51,0,0,0-.06,2.83l18.7,7.09,7.09,18.7a1.51,1.51,0,0,0,1.44,1,1.49,1.49,0,0,0,1.39-1l13.33-40A1.5,1.5,0,0,0,53.06,10.94Z\"/><path d=\"M20.22,35.48a1.5,1.5,0,0,0-2.12-2.12l-4.48,4.48a1.51,1.51,0,0,0,0,2.12,1.49,1.49,0,0,0,2.12,0Z\"/><path d=\"M23.88,40.12a1.49,1.49,0,0,0-2.12,0L16.08,45.8a1.5,1.5,0,0,0,2.12,2.12l5.68-5.68A1.49,1.49,0,0,0,23.88,40.12Z\"/><path d=\"M28.52,43.78,24,48.26a1.5,1.5,0,0,0,2.12,2.12l4.48-4.48A1.5,1.5,0,0,0,28.52,43.78Z\"/></g></svg>\r\n        )\r\n  }\r\n  const Users=(props)=>{\r\n      const [notSeenMessageNumberlocal,setNotSeenMessageNumberlocal]=React.useState(props.userData.notSeenMessageNumber)\r\n      React.useEffect(()=>{\r\n        setNotSeenMessageNumberlocal(props.userData.notSeenMessageNumber)\r\n      },[props.userData.notSeenMessageNumber])\r\n    return(\r\n        <div><div className={Style.userContainer} onClick={()=>{props.getUserdata(props.userData),setNotSeenMessageNumberlocal(0)}}>\r\n                {notSeenMessageNumberlocal!=0&&<div className={Style.notSeenMessageNumbe}><span>{notSeenMessageNumberlocal}</span></div>}\r\n                <div  className={Style.imgContainer}><img src={props.userData.currentImageUrl || \"/avatar.png\"} /></div>\r\n                <div  className={Style.userName}><p>{props.userData.userName}</p></div>\r\n        </div>\r\n        </div>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}