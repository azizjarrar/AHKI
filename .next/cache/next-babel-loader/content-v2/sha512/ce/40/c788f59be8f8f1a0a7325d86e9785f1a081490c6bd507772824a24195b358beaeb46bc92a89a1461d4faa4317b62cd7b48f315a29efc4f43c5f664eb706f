{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _defineProperty from \"F:/AHKI/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"F:/AHKI/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport Style from '../../styles/forgetPassword.module.scss';\nimport Link from 'next/link';\nimport ModalSingInSingUp from '../../components/modalSingInSingUp/ModalSingInSingUp';\nimport { searchAccountToForgetPassword, resetPasswordApi, SetNewPasswordApi } from '../../services/user';\nimport PopUpMessage from '../../components/popUpMessage/popUpMessage';\nimport { useRouter } from 'next/router';\n\nvar forgetPassword = function forgetPassword() {\n  var _React$useState = React.useState(\"\"),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      identity = _React$useState2[0],\n      setidentity = _React$useState2[1]; //hedha i najem i koun ya email ya telephone il id li chi tala3 bih utilisateur chkon\n\n\n  var _React$useState3 = React.useState({\n    state: false,\n    userData: {}\n  }),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      userFound = _React$useState4[0],\n      setUserFound = _React$useState4[1]; //5arej error ken user mafamech\n\n\n  var _React$useState5 = React.useState({\n    state: false,\n    text: \"\"\n  }),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      errorMessage = _React$useState6[0],\n      setErrorMessage = _React$useState6[1]; // when state true show  pop up \n\n\n  var _React$useState7 = React.useState(false),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      modalSingInSingUp = _React$useState8[0],\n      setModalSingInSingUp = _React$useState8[1]; //open modal\n\n\n  var openModalSingInSingUp = function openModalSingInSingUp() {\n    setModalSingInSingUp(function (e) {\n      return !e;\n    });\n  }; //tsaker ou thel modal mta3 login\n  //hedha li chi sagel fih il abed ki chi lawej ala rohou bil email wala tel\n\n\n  var changeHandler = function changeHandler(e) {\n    setidentity({\n      identity: e.target.value\n    });\n  }; // hedhi tsaker il pop up ki tethal\n\n\n  var closePopUp = function closePopUp() {\n    setErrorMessage({\n      state: false,\n      text: \"\"\n    });\n  }; //hedha il api li 5alik tlawej ala abed ken mawjoud wala le\n\n\n  var searchAccount = function searchAccount() {\n    searchAccountToForgetPassword(identity).then(function (result) {\n      if (result.data.state == true) {\n        setUserFound({\n          state: true,\n          userData: result.data.data\n        });\n      } else {\n        setErrorMessage({\n          state: true,\n          text: \"user not found\"\n        });\n      }\n    });\n  };\n\n  var setErrorMessagefn = function setErrorMessagefn(e) {\n    setErrorMessage(_objectSpread({}, e));\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: Style.container,\n    children: [modalSingInSingUp && /*#__PURE__*/_jsx(ModalSingInSingUp, {\n      openOrcloseModal: function openOrcloseModal() {\n        return openModalSingInSingUp();\n      }\n    }), /*#__PURE__*/_jsxs(\"nav\", {\n      className: Style.nav,\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: Style.Logo,\n        children: /*#__PURE__*/_jsx(\"h1\", {\n          children: \"Spaksi\"\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: Style.login,\n        children: /*#__PURE__*/_jsx(\"button\", {\n          onClick: function onClick() {\n            return openModalSingInSingUp();\n          },\n          children: /*#__PURE__*/_jsx(\"p\", {\n            children: \"Log In\"\n          })\n        })\n      })]\n    }), errorMessage.state == true && /*#__PURE__*/_jsx(PopUpMessage, {\n      fnclose: closePopUp,\n      openPopUp: errorMessage\n    }), userFound.state && /*#__PURE__*/_jsx(UserFound, _objectSpread({\n      setErrorMessageProps: setErrorMessagefn\n    }, userFound.userData)), userFound.state == false && /*#__PURE__*/_jsxs(\"div\", {\n      className: Style.forgetPassword,\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: Style.header,\n        children: /*#__PURE__*/_jsx(\"h1\", {\n          children: \"Find Your Account\"\n        })\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: Style.warningTextAndInput,\n        children: [/*#__PURE__*/_jsx(\"p\", {\n          children: \"Please enter your email or phone number to search for your account.\"\n        }), /*#__PURE__*/_jsx(\"div\", {\n          onChange: function onChange(e) {\n            return changeHandler(e);\n          },\n          className: Style.inputContainer,\n          children: /*#__PURE__*/_jsx(\"input\", {\n            placeholder: \"email or Telephone\"\n          })\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: Style.buttonsContainer,\n        children: [/*#__PURE__*/_jsx(\"button\", {\n          onClick: function onClick() {\n            return searchAccount();\n          },\n          children: \"Search\"\n        }), /*#__PURE__*/_jsx(Link, {\n          href: \"/\",\n          children: /*#__PURE__*/_jsx(\"button\", {\n            children: \"Cancel\"\n          })\n        })]\n      })]\n    })]\n  });\n};\n\nexport var __N_SSP = true;\nexport default forgetPassword;\n\n// tawa ken il user mawjoud chtet7alek page o5ra feha il user ou kife i heb i raja3 compte mte3ou bil email wala bi tel\nvar UserFound = function UserFound(props) {\n  var _React$useState9 = React.useState(\"\"),\n      _React$useState10 = _slicedToArray(_React$useState9, 2),\n      userDataReset = _React$useState10[0],\n      setUserDataReset = _React$useState10[1]; //hne yet7at il haja li 5tarha email wala tel exmpale aziz@hotmail.com 52330766\n\n\n  var _React$useState11 = React.useState(\"\"),\n      _React$useState12 = _slicedToArray(_React$useState11, 2),\n      type = _React$useState12[0],\n      setType = _React$useState12[1]; //hne chit hot ken il abed 5tar email thout email ken 5tar tel thot tel bech il bd ya3rf ala chnouwa i lawej\n\n\n  var _React$useState13 = React.useState(null),\n      _React$useState14 = _slicedToArray(_React$useState13, 2),\n      resetCode = _React$useState14[0],\n      setResetCode = _React$useState14[1]; //hne ki tensel ala button badel pass chi jiblk il code li chit badel bih yetsagel hne\n\n\n  var RadioBoxHandler = function RadioBoxHandler(e) {\n    setUserDataReset(e.target.value);\n  };\n\n  var resetPassword = function resetPassword() {\n    if (userDataReset.indexOf(\"@\") != -1 && userDataReset.indexOf(\".\") != -1) {\n      resetPasswordApi({\n        type: \"email\",\n        email: userDataReset\n      }).then(function (result) {\n        setResetCode(result.data);\n        setType(\"email\");\n      })[\"catch\"](function (error) {\n        props.setErrorMessageProps({\n          state: true,\n          text: error.message\n        });\n      });\n    } else {//hne ki yebda tel\n    }\n  };\n\n  if (resetCode != null) {\n    return /*#__PURE__*/_jsx(SetNewPassword, {\n      setErrorMessageProps: props.setErrorMessageProps,\n      type: type,\n      userDataReset: userDataReset\n    });\n  } else {\n    return /*#__PURE__*/_jsxs(\"div\", {\n      className: Style.userFoundContainer,\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: Style.userData,\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: Style.imageContainer,\n          children: /*#__PURE__*/_jsx(\"img\", {\n            src: props.userProfileImageUrl || \"/avatar.png\"\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: Style.userName,\n          children: /*#__PURE__*/_jsx(\"h3\", {\n            children: props.userName\n          })\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: Style.radioBoxContainer,\n        children: [props.email != undefined && /*#__PURE__*/_jsxs(\"div\", {\n          className: Style.radioInput,\n          children: [/*#__PURE__*/_jsxs(\"p\", {\n            children: [\"Email : \", props.email]\n          }), /*#__PURE__*/_jsx(\"input\", {\n            type: \"radio\",\n            onChange: function onChange(e) {\n              return RadioBoxHandler(e);\n            },\n            name: \"radio\",\n            value: props.email\n          })]\n        }), props.tel != undefined && /*#__PURE__*/_jsxs(\"div\", {\n          className: Style.radioInput,\n          children: [/*#__PURE__*/_jsxs(\"p\", {\n            children: [\"Telephone : \", props.tel]\n          }), /*#__PURE__*/_jsx(\"input\", {\n            type: \"radio\",\n            onChange: function onChange(e) {\n              return RadioBoxHandler(e);\n            },\n            name: \"radio\",\n            value: props.tel\n          })]\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: Style.buttonsContainer,\n        children: [/*#__PURE__*/_jsx(\"button\", {\n          onClick: function onClick() {\n            return resetPassword();\n          },\n          children: \"Send\"\n        }), /*#__PURE__*/_jsx(Link, {\n          href: \"/\",\n          children: /*#__PURE__*/_jsx(\"button\", {\n            children: \"Cancel\"\n          })\n        })]\n      })]\n    });\n  }\n};\n\nvar SetNewPassword = function SetNewPassword(props) {\n  // hne ba3d masebon b3ath il code mte3ek chtethalk page thot feha code ou mdp mte3ek jdid\n  var _React$useState15 = React.useState(\"\"),\n      _React$useState16 = _slicedToArray(_React$useState15, 2),\n      codeAndNewPassword = _React$useState16[0],\n      setCodeAndNewPassword = _React$useState16[1]; //handler mta3 code ou pass jdid\n\n\n  var router = useRouter();\n\n  var changeToNewPassword = function changeToNewPassword() {\n    //type houwa email wala tel ou il userDateReset houwa exmpale azizjarrar@gmail.com ,52330766 \n    SetNewPasswordApi(_objectSpread(_objectSpread({}, codeAndNewPassword), {}, {\n      type: props.type,\n      identity: props.userDataReset\n    })).then(function (result) {\n      //            props.setErrorMessageProps({state:true,text:error.message})\n      if (result.data.typeError == \"done\") {\n        router.push(\"/\");\n      } else if (result.data.typeError == \"incorectCode\") {\n        props.setErrorMessageProps({\n          state: true,\n          text: \"code 8alet\"\n        });\n      } else {\n        props.setErrorMessageProps({\n          state: true,\n          text: \"code ofe wa9tou\"\n        });\n      }\n    });\n  };\n\n  var changeHandler = function changeHandler(e) {\n    setCodeAndNewPassword(function (old) {\n      return _objectSpread(_objectSpread({}, old), {}, _defineProperty({}, e.target.name, e.target.value));\n    });\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: Style.SetNewPasswordContainer,\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      className: Style.header,\n      children: /*#__PURE__*/_jsx(\"h1\", {\n        children: \"set new Password\"\n      })\n    }), /*#__PURE__*/_jsx(\"div\", {\n      onChange: function onChange(e) {\n        return changeHandler(e);\n      },\n      className: Style.inputContainer,\n      children: /*#__PURE__*/_jsx(\"input\", {\n        name: \"code\",\n        placeholder: \"code\"\n      })\n    }), /*#__PURE__*/_jsx(\"div\", {\n      onChange: function onChange(e) {\n        return changeHandler(e);\n      },\n      className: Style.inputContainer,\n      children: /*#__PURE__*/_jsx(\"input\", {\n        name: \"newPassword\",\n        type: \"password\",\n        placeholder: \"new Password\"\n      })\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: Style.buttonsContainer,\n      children: [/*#__PURE__*/_jsx(\"button\", {\n        onClick: function onClick() {\n          return changeToNewPassword();\n        },\n        children: \"Update\"\n      }), /*#__PURE__*/_jsx(Link, {\n        href: \"/\",\n        children: /*#__PURE__*/_jsx(\"button\", {\n          children: \"Cancel\"\n        })\n      })]\n    })]\n  });\n};","map":null,"metadata":{},"sourceType":"module"}