{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"F:\\\\AHKI\\\\pages\\\\chat.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from 'react';\nimport Style from '../styles/chat.module.scss';\nimport NavBar from '../components/navBar/NavBar';\nimport { Picker, Emoji } from 'emoji-mart';\nimport 'emoji-mart/css/emoji-mart.css';\nimport { searchUserNameApi } from '../services/user';\nimport { updateColorChat, addMessage, getMessagesOfCurrentconversation, getUserWhoChatWith } from '../services/chat';\nimport socketContext from '../context/socketContext';\nimport userContext from '../context/userContext';\n\nconst chat = props => {\n  const [closeOrOpenEmojiPickerState, setcloseOrOpenEmojiPickerState] = React.useState(false);\n  const [EmojiContainerHeight, setEmojiContainerHeight] = React.useState(9); //responsive handler\n\n  const [listOfUsers, setListOfUsers] = React.useState([]);\n  const [currentUserToChatWith, setCurrentUserToChatWith] = React.useState({\n    currentImageUrl: undefined,\n    userName: undefined,\n    _id: undefined\n  });\n  const [message, setMessage] = React.useState(\"\");\n  const [currentChats, setCurrentChats] = React.useState([]);\n  const messagesComp = React.useRef(null);\n  const [user, setUser] = React.useContext(userContext);\n  const [socket, setSocket] = React.useContext(socketContext);\n  const [skip, setSkip] = React.useState(() => 0);\n  const [isWritingState, setIsWritingState] = React.useState(false);\n  const [chatColor, setChatColor] = React.useState({\n    colorone: \"#1876f3\",\n    colortwo: \"#e4e6eb\"\n  });\n  React.useEffect(() => {\n    if (user._id != undefined && user._id.length > 2) getUserWhoChatWith({}, props.token).then(result => {\n      let newUserWhoChatWith = result.data.data.map(e => {\n        if (e.firstUser._id == user._id) {\n          return Promise.resolve(_objectSpread(_objectSpread({}, e.secoundUser), {}, {\n            color: e.color,\n            notSeenMessageNumber: e.notSeenMessageNumber\n          }));\n        } else {\n          return Promise.resolve(_objectSpread(_objectSpread({}, e.firstUser), {}, {\n            color: e.color,\n            notSeenMessageNumber: e.notSeenMessageNumber\n          }));\n        }\n      });\n      Promise.all(newUserWhoChatWith).then(newarray => {\n        setListOfUsers([...newarray]);\n      });\n    }).catch(e => console.log(e.message));\n  }, [user]);\n  React.useEffect(() => {\n    if (currentUserToChatWith._id != undefined) {\n      getMessagesOfCurrentconversation({\n        secondUser: currentUserToChatWith._id,\n        skip: 0\n      }, props.token).then(data => {\n        setCurrentChats([...data.data.data.reverse()]);\n        messagesComp.current.scrollTop = messagesComp.current.scrollHeight + messagesComp.current.clientHeight;\n      }).catch(error => {\n        console.log(error);\n      });\n      socket.emit(\"vu\", {\n        state: true,\n        otherUserId: currentUserToChatWith._id\n      });\n    }\n  }, [currentUserToChatWith]);\n\n  const addEmoji = e => {\n    let sym = e.unified.split('-');\n    let codesArray = [];\n    sym.forEach(el => codesArray.push('0x' + el));\n    let emoji = String.fromCodePoint(...codesArray);\n    setMessage(el => {\n      return el + emoji;\n    });\n  };\n\n  const closeOrOpenEmojiPicker = () => {\n    setcloseOrOpenEmojiPickerState(e => !e);\n  };\n\n  const searchForUser = e => {\n    searchUserNameApi(e.target.value, props.token).then(result => {\n      if (result.data.data != undefined) {\n        setListOfUsers(e => {\n          return [...result.data.data];\n        });\n      }\n    });\n  };\n\n  const getUserdataFn = currentUserData => {\n    setCurrentUserToChatWith(currentUserData);\n  };\n\n  const sendMessage = () => {\n    if (message.length > 0 && currentUserToChatWith._id != undefined) {\n      addMessage({\n        receiver: currentUserToChatWith._id,\n        message: message,\n        FirstTime: currentChats.length\n      }, props.token).then(data => {\n        setCurrentChats(e => {\n          let r = Math.random().toString(36).substring(7);\n          return [...e, {\n            users: [user._id],\n            message: message,\n            _id: r\n          }];\n        });\n        messagesComp.current.scrollTop = messagesComp.current.scrollHeight + messagesComp.current.clientHeight;\n        socket.emit(\"sendMessageFromUserToUser\", {\n          otherUserId: currentUserToChatWith._id,\n          text: message,\n          senderId: user._id\n        });\n        setMessage(\"\");\n      }).catch(error => {\n        console.log(error);\n      });\n    }\n  };\n\n  const messageHandler = e => {\n    if (currentUserToChatWith._id != undefined) {\n      if (e.target.value.length > 0) {\n        socket.emit(\"isWriting\", {\n          isWriting: true,\n          otherUserId: currentUserToChatWith._id,\n          senderid: user._id\n        });\n      } else {\n        socket.emit(\"isWriting\", {\n          isWriting: false,\n          otherUserId: currentUserToChatWith._id,\n          senderid: user._id\n        });\n      }\n    }\n\n    setMessage(e.target.value);\n  };\n\n  React.useEffect(() => {\n    async function chatHandler(data) {\n      let audio = new Audio(\"./msgSound.mp3\");\n      audio.play();\n      setIsWritingState(false);\n      socket.emit(\"vu\", {\n        state: true,\n        otherUserId: currentUserToChatWith._id\n      });\n      /*if(vu==true){\r\n          \r\n          socket.emit(\"vu\",{state:true,otherUserId:currentUserToChatWith._id})\r\n      }*/\n\n      let ListOfUser = await listOfUsers.map(e => {\n        if (data.senderId == e._id && currentUserToChatWith._id != e._id) {\n          e.notSeenMessageNumber = e.notSeenMessageNumber + 1;\n          return Promise.resolve(e);\n        } else {\n          return Promise.resolve(e);\n        }\n      });\n      Promise.all(ListOfUser).then(data => {\n        setListOfUsers(data);\n      });\n\n      if (data.senderId == currentUserToChatWith._id) {\n        setCurrentChats(e => {\n          let r = Math.random().toString(36).substring(7);\n          return [...e, {\n            users: [data.senderId],\n            message: data.text,\n            _id: r\n          }];\n        });\n        messagesComp.current.scrollTop = messagesComp.current.scrollHeight + messagesComp.current.clientHeight;\n      } else {}\n    }\n\n    function isWriting(data) {\n      if (data.userWhoReciveWriting == user._id && data.senderid == currentUserToChatWith._id) {\n        setIsWritingState(data.isWriting);\n      }\n    }\n\n    const setvu = data => {\n      if (document.getElementsByClassName(Style.yourMessageVu).length != 0) {\n        for (let i = currentChats.length - 1; i > 0; i--) {\n          if (document.getElementsByClassName(Style.yourMessageVu)[i] != undefined) {\n            if (document.getElementsByClassName(Style.yourMessageVu)[i].childNodes[1].style.color != \"rgb(24, 118, 243)\") {\n              document.getElementsByClassName(Style.yourMessageVu)[i].childNodes[1].style.color = \"rgb(24, 118, 243)\";\n            }\n          }\n        }\n      }\n    };\n\n    if (socket != undefined && socket != null) {\n      socket.on(\"isWritingState\", isWriting);\n      socket.on(\"getMessageFromUserToUser\", chatHandler);\n      socket.on(\"setvu\", setvu);\n    }\n\n    return () => {\n      if (socket != undefined && socket != null) {\n        socket.off('getMessageFromUserToUser', chatHandler);\n        socket.off(\"isWritingState\", isWriting);\n        socket.off(\"setvu\", setvu);\n      }\n    };\n  });\n\n  const scrollfn = e => {\n    //if( e.target.scrollTop === (e.target.scrollHeight - e.target.offsetHeight)){\n    if (e.target.scrollTop === 0) {\n      setSkip(e => e + 20);\n    }\n  };\n\n  React.useEffect(() => {\n    if (currentUserToChatWith._id != undefined) {\n      getMessagesOfCurrentconversation({\n        secondUser: currentUserToChatWith._id,\n        skip: skip\n      }, props.token).then(data => {\n        setCurrentChats(e => [...data.data.data.reverse(), ...e]);\n      }).catch(error => {\n        console.log(error);\n      });\n    }\n  }, [skip]);\n\n  const getNewColor = color => {\n    setChatColor(e => {\n      return _objectSpread(_objectSpread({}, e), {}, {\n        colorone: color\n      });\n    });\n  };\n\n  const setColorOfChatFn = colorOfChatFromDataBase => {\n    setChatColor(e => {\n      return _objectSpread(_objectSpread({}, e), {}, {\n        colorone: colorOfChatFromDataBase\n      });\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: Style.container,\n    children: [/*#__PURE__*/_jsxDEV(NavBar, {\n      token: props.token\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: Style.chatAndRandomOnlineUserContaner,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: Style.UserContaner,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: Style.header,\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"contacts\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: Style.listContacs,\n          children: listOfUsers.map(e => /*#__PURE__*/_jsxDEV(Users, {\n            setColorOfChat: setColorOfChatFn,\n            getUserdata: getUserdataFn,\n            userData: e\n          }, e._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 45\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: Style.bottom,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: Style.searchContainer,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: Style.inputcss,\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                onChange: e => searchForUser(e),\n                type: \"text\",\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 227,\n                columnNumber: 96\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Search users\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 227,\n                  columnNumber: 172\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 227,\n                columnNumber: 165\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 64\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: Style.chat,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: Style.header,\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Messages\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: Style.chatContainer,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: Style.headerOfChatuserNameAndName,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: Style.userImageContainer,\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: currentUserToChatWith.currentImageUrl || \"/avatar.png\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 71\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: Style.userName,\n              children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                children: currentUserToChatWith.userName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 237,\n                columnNumber: 61\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 29\n            }, this), isWritingState && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: Style.isWritingContainer,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: Style.ldsellipsis,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 239,\n                  columnNumber: 64\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 239,\n                  columnNumber: 75\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 239,\n                  columnNumber: 86\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 239,\n                  columnNumber: 97\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 239,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 46\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: Style.changeColorContainer,\n              children: /*#__PURE__*/_jsxDEV(ColorPicker, {\n                receiver: currentUserToChatWith._id,\n                token: props.token,\n                getNewColorfn: getNewColor,\n                chatColor: chatColor\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 241,\n                columnNumber: 73\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            onScroll: e => scrollfn(e),\n            ref: messagesComp,\n            className: Style.messages,\n            children: currentChats.map(e => {\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: Style.oneMessage,\n                children: e.users[0] == currentUserToChatWith._id ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: Style.messageText,\n                  \"text-data\": e.date != undefined ? e.date.slice(0, 10) + \" \" + e.date.slice(11, 16) : \"false\",\n                  style: {\n                    \"--i\": \"0%\",\n                    float: \"left\",\n                    backgroundColor: \"#e4e6eb\",\n                    color: \"black\"\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: e.message\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 247,\n                    columnNumber: 228\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 247,\n                  columnNumber: 37\n                }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `${Style.messageText} ${Style.yourMessageVu} `,\n                  \"text-data\": e.date != undefined ? e.date.slice(0, 10) + \" \" + e.date.slice(11, 16) : \"false\",\n                  style: {\n                    \"--i\": \"-100%\",\n                    float: \"right\",\n                    backgroundColor: chatColor.colorone,\n                    color: \"white\"\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    children: e.message\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 248,\n                    columnNumber: 272\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    style: e.seen == true ? {\n                      color: \"#1876f3\"\n                    } : {\n                      color: \"black\"\n                    },\n                    className: Style.seen,\n                    children: \"\\u2714\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 248,\n                    columnNumber: 290\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 248,\n                  columnNumber: 37\n                }, this)\n              }, e._id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 245,\n                columnNumber: 40\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: Style.sendMessage,\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: e => e.preventDefault(),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: Style.inputContainer,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: Style.inputcss,\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  value: message,\n                  onChange: e => messageHandler(e),\n                  type: \"text\",\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 256,\n                  columnNumber: 95\n                }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"Message\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 256,\n                    columnNumber: 189\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 256,\n                  columnNumber: 182\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 63\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 256,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: Style.btns,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: Style.openOrCloseEmojiPicker,\n                onClick: () => closeOrOpenEmojiPicker(),\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: Style.emojiLogo,\n                  children: /*#__PURE__*/_jsxDEV(Emoji, {\n                    emoji: {\n                      id: 'smiling_face_with_3_hearts',\n                      skin: 3\n                    },\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 259,\n                    columnNumber: 58\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 259,\n                  columnNumber: 25\n                }, this), closeOrOpenEmojiPickerState && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: Style.emojiPickerContainer,\n                  children: /*#__PURE__*/_jsxDEV(Picker, {\n                    perLine: EmojiContainerHeight,\n                    onSelect: e => addEmoji(e)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 260,\n                    columnNumber: 99\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 260,\n                  columnNumber: 55\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 258,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: Style.btnsend,\n                onClick: () => sendMessage(),\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: Style.sendMessageBtn,\n                  children: /*#__PURE__*/_jsxDEV(SentSvg, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 262,\n                    columnNumber: 145\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 262,\n                  columnNumber: 105\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 214,\n    columnNumber: 9\n  }, this);\n};\n\nexport default chat;\n\nconst SentSvg = () => {\n  return /*#__PURE__*/_jsxDEV(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 64 64\",\n    children: /*#__PURE__*/_jsxDEV(\"g\", {\n      id: \"Layer_95\",\n      \"data-name\": \"Layer 95\",\n      children: [/*#__PURE__*/_jsxDEV(\"path\", {\n        d: \"M53.06,10.94a1.5,1.5,0,0,0-1.53-.36l-40,13.33a1.51,1.51,0,0,0-.06,2.83l18.7,7.09,7.09,18.7a1.51,1.51,0,0,0,1.44,1,1.49,1.49,0,0,0,1.39-1l13.33-40A1.5,1.5,0,0,0,53.06,10.94Z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 107\n      }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n        d: \"M20.22,35.48a1.5,1.5,0,0,0-2.12-2.12l-4.48,4.48a1.51,1.51,0,0,0,0,2.12,1.49,1.49,0,0,0,2.12,0Z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 291\n      }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n        d: \"M23.88,40.12a1.49,1.49,0,0,0-2.12,0L16.08,45.8a1.5,1.5,0,0,0,2.12,2.12l5.68-5.68A1.49,1.49,0,0,0,23.88,40.12Z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 397\n      }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n        d: \"M28.52,43.78,24,48.26a1.5,1.5,0,0,0,2.12,2.12l4.48-4.48A1.5,1.5,0,0,0,28.52,43.78Z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 518\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 69\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 277,\n    columnNumber: 9\n  }, this);\n};\n\nconst Users = props => {\n  const [notSeenMessageNumberlocal, setNotSeenMessageNumberlocal] = React.useState(props.userData.notSeenMessageNumber);\n  React.useEffect(() => {\n    setNotSeenMessageNumberlocal(props.userData.notSeenMessageNumber);\n  }, [props.userData.notSeenMessageNumber]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: Style.userContainer,\n      onClick: () => {\n        props.getUserdata(props.userData), setNotSeenMessageNumberlocal(0), props.setColorOfChat(props.userData.color);\n      },\n      children: [notSeenMessageNumberlocal != 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: Style.notSeenMessageNumbe,\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          children: notSeenMessageNumberlocal\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 91\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 48\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: Style.imgContainer,\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: props.userData.currentImageUrl || \"/avatar.png\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 54\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: Style.userName,\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: props.userData.userName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 50\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 14\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 287,\n    columnNumber: 9\n  }, this);\n};\n\nconst ColorPicker = props => {\n  const [openColorPicker, setOpenColorPicker] = React.useState(false);\n\n  const changePrimaryColor = color => {\n    props.getNewColorfn(color);\n    updateColorChat({\n      newColor: color,\n      receiver: props.receiver\n    }, props.token);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    onClick: () => setOpenColorPicker(e => !e),\n    className: Style.chatColor,\n    style: {\n      backgroundColor: props.chatColor.colorone\n    },\n    children: openColorPicker && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: Style.colorPicker,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: Style.color,\n        onClick: () => changePrimaryColor(\"#ff1744\"),\n        style: {\n          backgroundColor: \"#ff1744\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: Style.color,\n        onClick: () => changePrimaryColor(\"#f50057\"),\n        style: {\n          backgroundColor: \"#f50057\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: Style.color,\n        onClick: () => changePrimaryColor(\"#3d5afe\"),\n        style: {\n          backgroundColor: \"#3d5afe\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: Style.color,\n        onClick: () => changePrimaryColor(\"#76ff03\"),\n        style: {\n          backgroundColor: \"#76ff03\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: Style.color,\n        onClick: () => changePrimaryColor(\"#c6ff00\"),\n        style: {\n          backgroundColor: \"#c6ff00\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: Style.color,\n        onClick: () => changePrimaryColor(\"#ff3d00\"),\n        style: {\n          backgroundColor: \"#ff3d00\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: Style.color,\n        onClick: () => changePrimaryColor(\"#651fff\"),\n        style: {\n          backgroundColor: \"#651fff\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: Style.color,\n        onClick: () => changePrimaryColor(\"#ffea00\"),\n        style: {\n          backgroundColor: \"#ffea00\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: Style.color,\n        onClick: () => changePrimaryColor(\"#f50057\"),\n        style: {\n          backgroundColor: \"#f50057\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: Style.color,\n        onClick: () => changePrimaryColor(\"#ff1744\"),\n        style: {\n          backgroundColor: \"#ff1744\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: Style.color,\n        onClick: () => changePrimaryColor(\"#1de9b6\"),\n        style: {\n          backgroundColor: \"#1de9b6\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: Style.color,\n        onClick: () => changePrimaryColor(\"#03a9f4\"),\n        style: {\n          backgroundColor: \"#03a9f4\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 27\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 303,\n    columnNumber: 12\n  }, this);\n};\n\nexport async function getServerSideProps({\n  req,\n  res\n}) {\n  console.log(req.cookies.token);\n  return req.cookies.token ? {\n    props: {\n      token: req.cookies.token\n    }\n  } : {\n    props: {\n      token: false\n    }\n  };\n}","map":{"version":3,"sources":["F:/AHKI/pages/chat.js"],"names":["React","Style","NavBar","Picker","Emoji","searchUserNameApi","updateColorChat","addMessage","getMessagesOfCurrentconversation","getUserWhoChatWith","socketContext","userContext","chat","props","closeOrOpenEmojiPickerState","setcloseOrOpenEmojiPickerState","useState","EmojiContainerHeight","setEmojiContainerHeight","listOfUsers","setListOfUsers","currentUserToChatWith","setCurrentUserToChatWith","currentImageUrl","undefined","userName","_id","message","setMessage","currentChats","setCurrentChats","messagesComp","useRef","user","setUser","useContext","socket","setSocket","skip","setSkip","isWritingState","setIsWritingState","chatColor","setChatColor","colorone","colortwo","useEffect","length","token","then","result","newUserWhoChatWith","data","map","e","firstUser","Promise","resolve","secoundUser","color","notSeenMessageNumber","all","newarray","catch","console","log","secondUser","reverse","current","scrollTop","scrollHeight","clientHeight","error","emit","state","otherUserId","addEmoji","sym","unified","split","codesArray","forEach","el","push","emoji","String","fromCodePoint","closeOrOpenEmojiPicker","searchForUser","target","value","getUserdataFn","currentUserData","sendMessage","receiver","FirstTime","r","Math","random","toString","substring","users","text","senderId","messageHandler","isWriting","senderid","chatHandler","audio","Audio","play","ListOfUser","userWhoReciveWriting","setvu","document","getElementsByClassName","yourMessageVu","i","childNodes","style","on","off","scrollfn","getNewColor","setColorOfChatFn","colorOfChatFromDataBase","container","chatAndRandomOnlineUserContaner","UserContaner","header","listContacs","bottom","searchContainer","inputcss","chatContainer","headerOfChatuserNameAndName","userImageContainer","isWritingContainer","ldsellipsis","changeColorContainer","messages","oneMessage","messageText","date","slice","float","backgroundColor","seen","preventDefault","inputContainer","btns","openOrCloseEmojiPicker","emojiLogo","id","skin","emojiPickerContainer","btnsend","sendMessageBtn","SentSvg","Users","notSeenMessageNumberlocal","setNotSeenMessageNumberlocal","userData","userContainer","getUserdata","setColorOfChat","notSeenMessageNumbe","imgContainer","ColorPicker","openColorPicker","setOpenColorPicker","changePrimaryColor","getNewColorfn","newColor","colorPicker","getServerSideProps","req","res","cookies"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport Style from '../styles/chat.module.scss'\r\nimport NavBar from '../components/navBar/NavBar'\r\nimport { Picker,Emoji  } from 'emoji-mart'\r\nimport 'emoji-mart/css/emoji-mart.css'\r\nimport {searchUserNameApi} from '../services/user'\r\nimport {updateColorChat,addMessage,getMessagesOfCurrentconversation,getUserWhoChatWith} from '../services/chat';\r\nimport socketContext from '../context/socketContext'\r\nimport userContext from '../context/userContext'\r\n\r\nconst chat = (props) => {\r\n    const [closeOrOpenEmojiPickerState,setcloseOrOpenEmojiPickerState]=React.useState(false)\r\n    const [EmojiContainerHeight, setEmojiContainerHeight] = React.useState(9)//responsive handler\r\n    const [listOfUsers,setListOfUsers]=React.useState([])\r\n    const [currentUserToChatWith,setCurrentUserToChatWith]=React.useState({currentImageUrl:undefined,userName:undefined,_id:undefined})\r\n    const [message,setMessage]=React.useState(\"\")\r\n    const [currentChats,setCurrentChats]=React.useState([])\r\n    const messagesComp=React.useRef(null)\r\n    const [user,setUser]=React.useContext(userContext)\r\n    const [socket,setSocket]=React.useContext(socketContext)\r\n    const [skip,setSkip]=React.useState(()=>0)\r\n    const [isWritingState,setIsWritingState]=React.useState(false)\r\n    const [chatColor,setChatColor]=React.useState({colorone:\"#1876f3\",colortwo:\"#e4e6eb\"})\r\n    \r\n    \r\n    React.useEffect(()=>{\r\n       \r\n        if(user._id!=undefined&& user._id.length>2)\r\n        getUserWhoChatWith({},props.token).then(result=>{\r\n            let newUserWhoChatWith=result.data.data.map(e=>{\r\n                if(e.firstUser._id==user._id){\r\n                    return Promise.resolve({...e.secoundUser,color:e.color,notSeenMessageNumber:e.notSeenMessageNumber})\r\n                }else{\r\n                    return Promise.resolve({...e.firstUser,color:e.color,notSeenMessageNumber:e.notSeenMessageNumber})\r\n                }\r\n           \r\n               \r\n            })\r\n            Promise.all(newUserWhoChatWith).then(newarray=>{\r\n              setListOfUsers([...newarray])\r\n            })\r\n         \r\n          }).catch(e=>console.log(e.message))\r\n    },[user])\r\n    React.useEffect(()=>{\r\n        if(currentUserToChatWith._id!=undefined){\r\n            getMessagesOfCurrentconversation({secondUser:currentUserToChatWith._id,skip:0},props.token).then(data=>{\r\n                \r\n                setCurrentChats([...data.data.data.reverse()])\r\n                messagesComp.current.scrollTop=messagesComp.current.scrollHeight+ messagesComp.current.clientHeight;\r\n\r\n\r\n            }).catch(error=>{\r\n                console.log(error)\r\n            })\r\n            socket.emit(\"vu\",{state:true,otherUserId:currentUserToChatWith._id})\r\n\r\n        }\r\n  \r\n    \r\n    \r\n    },[currentUserToChatWith])\r\n    const addEmoji=(e)=>{\r\n        let sym = e.unified.split('-')\r\n        let codesArray = []\r\n        sym.forEach(el => codesArray.push('0x' + el))\r\n        let emoji = String.fromCodePoint(...codesArray)\r\n        setMessage(el=>{return el+emoji})\r\n      };\r\n    const closeOrOpenEmojiPicker=()=>{\r\n        setcloseOrOpenEmojiPickerState(e=>!e)\r\n      }\r\n      const searchForUser=(e)=>{\r\n            searchUserNameApi(e.target.value,props.token).then((result=>{\r\n                if(result.data.data!=undefined){\r\n                    setListOfUsers(e=>{\r\n                        return [...result.data.data]\r\n                    }) \r\n                }\r\n            }))\r\n        \r\n      }\r\n      const getUserdataFn=(currentUserData)=>{\r\n        setCurrentUserToChatWith(currentUserData)\r\n      }\r\n      const sendMessage=()=>{\r\n        if(message.length>0&&currentUserToChatWith._id!=undefined){\r\n        addMessage({receiver:currentUserToChatWith._id,message:message,FirstTime:currentChats.length},props.token).then(data=>{\r\n            setCurrentChats(e=>{\r\n                let r = Math.random().toString(36).substring(7);\r\n                return [...e,{users:[user._id],message:message,_id:r}]\r\n\r\n            })\r\n            \r\n            messagesComp.current.scrollTop=messagesComp.current.scrollHeight+ messagesComp.current.clientHeight;\r\n                socket.emit(\"sendMessageFromUserToUser\",{otherUserId:currentUserToChatWith._id,text:message,senderId:user._id})\r\n\r\n          \r\n\r\n            setMessage(\"\")\r\n        }).catch(error=>{\r\n            console.log(error)\r\n        })\r\n    }\r\n      }\r\n      const messageHandler=(e)=>{\r\n          if(currentUserToChatWith._id!=undefined){\r\n            if(e.target.value.length>0){\r\n                socket.emit(\"isWriting\",{isWriting:true,otherUserId:currentUserToChatWith._id,senderid:user._id})\r\n              }else{\r\n                socket.emit(\"isWriting\",{isWriting:false,otherUserId:currentUserToChatWith._id,senderid:user._id})\r\n              }\r\n          }\r\n \r\n        setMessage(e.target.value)\r\n      }\r\n      React.useEffect(()=>{\r\n        async  function  chatHandler(data){\r\n\r\n            let audio = new Audio(\"./msgSound.mp3\")\r\n            audio.play()\r\n            setIsWritingState(false)\r\n            socket.emit(\"vu\",{state:true,otherUserId:currentUserToChatWith._id})\r\n\r\n            /*if(vu==true){\r\n                \r\n                socket.emit(\"vu\",{state:true,otherUserId:currentUserToChatWith._id})\r\n            }*/\r\n            let ListOfUser = await listOfUsers.map((e)=>{\r\n                if(data.senderId==e._id && currentUserToChatWith._id!=e._id){\r\n                    e.notSeenMessageNumber=e.notSeenMessageNumber+1\r\n                    return Promise.resolve(e)\r\n                }else{\r\n                    return Promise.resolve(e)\r\n                }\r\n            })\r\n            Promise.all(ListOfUser).then(data=>{\r\n                \r\n                setListOfUsers(data)\r\n            })\r\n            if(data.senderId==currentUserToChatWith._id){\r\n                \r\n\r\n                setCurrentChats(e=>{\r\n                    let r = Math.random().toString(36).substring(7);\r\n                    return [...e,{users:[data.senderId],message:data.text,_id:r}]\r\n                })\r\n                messagesComp.current.scrollTop=messagesComp.current.scrollHeight+ messagesComp.current.clientHeight;\r\n\r\n            }else{\r\n\r\n            }\r\n        }\r\n        function isWriting(data){\r\n            if(data.userWhoReciveWriting==user._id && data.senderid==currentUserToChatWith._id){\r\n                setIsWritingState(data.isWriting)\r\n\r\n            }\r\n        }\r\n        const setvu=(data)=>{\r\n   \r\n            if(document.getElementsByClassName(Style.yourMessageVu).length!=0){\r\n                for (let i = currentChats.length-1; i>0; i--) {\r\n                    if(document.getElementsByClassName(Style.yourMessageVu)[i]!=undefined){\r\n                        if(document.getElementsByClassName(Style.yourMessageVu)[i].childNodes[1].style.color!=\"rgb(24, 118, 243)\"){\r\n                            document.getElementsByClassName(Style.yourMessageVu)[i].childNodes[1].style.color=\"rgb(24, 118, 243)\"\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n        }\r\n        if(socket!=undefined && socket!=null){\r\n        socket.on(\"isWritingState\",isWriting)\r\n        socket.on(\"getMessageFromUserToUser\",chatHandler)\r\n        socket.on(\"setvu\",setvu)\r\n          }\r\n          return () => {\r\n            if(socket!=undefined && socket!=null){\r\n                socket.off('getMessageFromUserToUser', chatHandler);\r\n                socket.off(\"isWritingState\",isWriting)\r\n                socket.off(\"setvu\",setvu)\r\n\r\n            }\r\n          }\r\n      })\r\n      const scrollfn=(e)=>{\r\n          //if( e.target.scrollTop === (e.target.scrollHeight - e.target.offsetHeight)){\r\n          if( e.target.scrollTop === 0){\r\n            setSkip(e=>e+20)\r\n          }\r\n          \r\n      }\r\n      React.useEffect(()=>{\r\n        if(currentUserToChatWith._id!=undefined){\r\n            getMessagesOfCurrentconversation({secondUser:currentUserToChatWith._id,skip:skip},props.token).then(data=>{\r\n                setCurrentChats(e=>[...data.data.data.reverse(),...e])\r\n               \r\n            }).catch(error=>{\r\n                console.log(error)\r\n            })\r\n        }\r\n      },[skip])\r\n      const getNewColor=(color)=>{\r\n        setChatColor(e=>{return {...e,colorone:color}})\r\n      }\r\n      const setColorOfChatFn=(colorOfChatFromDataBase)=>{\r\n        setChatColor(e=>{\r\n            return{...e,colorone:colorOfChatFromDataBase}\r\n        })\r\n      }\r\n\r\n    return (\r\n        <div className={Style.container} >\r\n                  <NavBar token={props.token}></NavBar>\r\n                <div className={Style.chatAndRandomOnlineUserContaner}>\r\n                    \r\n                    <div className={Style.UserContaner} >\r\n                        <div className={Style.header}>\r\n                            <h1>contacts</h1>\r\n                        </div>\r\n                        <div className={Style.listContacs}>\r\n                        {listOfUsers.map(e=><Users setColorOfChat={setColorOfChatFn} getUserdata={getUserdataFn} key={e._id}  userData={e}></Users>)}\r\n\r\n                        </div>\r\n                        <div className={Style.bottom}>\r\n                        <div className={Style.searchContainer}><div className={Style.inputcss}><input onChange={(e)=>searchForUser(e)} type=\"text\" required></input><label><span>Search users</span></label></div></div>\r\n                        </div>\r\n                    </div>\r\n                    <div className={Style.chat}>\r\n                    <div className={Style.header}>\r\n                        <h1>Messages</h1>\r\n                    </div>\r\n                    <div className={Style.chatContainer}>\r\n                        <div className={Style.headerOfChatuserNameAndName}>\r\n                            <div className={Style.userImageContainer}><img src={currentUserToChatWith.currentImageUrl || \"/avatar.png\"} /></div>\r\n                            <div className={Style.userName}><h3>{currentUserToChatWith.userName}</h3></div>\r\n                            {isWritingState&&<div className={Style.isWritingContainer}>\r\n                            <div className={Style.ldsellipsis}><div></div><div></div><div></div><div></div></div>\r\n                                </div>}\r\n                            <div className={Style.changeColorContainer}><ColorPicker receiver={currentUserToChatWith._id} token={props.token} getNewColorfn={getNewColor} chatColor={chatColor}></ColorPicker></div>\r\n                        </div>\r\n                        <div onScroll={(e)=>scrollfn(e)} ref={messagesComp} className={Style.messages}>\r\n                            {currentChats.map(e=>{\r\n                                return(<div key={e._id} className={Style.oneMessage}>\r\n                                    {e.users[0]==currentUserToChatWith._id?\r\n                                    <div className={Style.messageText} text-data={e.date!=undefined?e.date.slice(0,10)+\" \"+e.date.slice(11,16):\"false\"}  style={{\"--i\":\"0%\",float:\"left\",backgroundColor:\"#e4e6eb\",color:\"black\"}}><p>{e.message}</p></div>:\r\n                                    <div className={`${Style.messageText} ${Style.yourMessageVu} `}   text-data={e.date!=undefined?e.date.slice(0,10)+\" \"+e.date.slice(11,16):\"false\"}  style={{\"--i\":\"-100%\",float:\"right\",backgroundColor:chatColor.colorone,color:\"white\"}}><p>{e.message}</p><span  style={e.seen==true?{color:\"#1876f3\"}:{color:\"black\"}} className={Style.seen} >&#10004;</span></div>\r\n                                    }\r\n                                </div>)\r\n                            })}\r\n                        </div>\r\n                    </div>\r\n                    <div className={Style.sendMessage}>\r\n                        <form onSubmit={e=>e.preventDefault()} >\r\n                        <div className={Style.inputContainer}><div className={Style.inputcss}><input  value={message} onChange={(e)=>messageHandler(e)} type=\"text\" required></input><label><span>Message</span></label></div></div>\r\n                        <div className={Style.btns}>\r\n                        <div className={Style.openOrCloseEmojiPicker} onClick={()=>closeOrOpenEmojiPicker()}>\r\n                        <div className={Style.emojiLogo}><Emoji emoji={{ id: 'smiling_face_with_3_hearts', skin: 3 }} size={16} /></div>\r\n                        {closeOrOpenEmojiPickerState&&<div className={Style.emojiPickerContainer}><Picker perLine={EmojiContainerHeight} onSelect={(e)=>addEmoji(e)} /></div>}\r\n                        </div>\r\n                            <button type=\"submit\" className={Style.btnsend} onClick={()=>sendMessage()}><span className={Style.sendMessageBtn} ><SentSvg></SentSvg></span></button>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                    </div>\r\n                </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default chat\r\n\r\n\r\n  const SentSvg=()=>{\r\n    return (\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 64 64\"><g id=\"Layer_95\" data-name=\"Layer 95\"><path d=\"M53.06,10.94a1.5,1.5,0,0,0-1.53-.36l-40,13.33a1.51,1.51,0,0,0-.06,2.83l18.7,7.09,7.09,18.7a1.51,1.51,0,0,0,1.44,1,1.49,1.49,0,0,0,1.39-1l13.33-40A1.5,1.5,0,0,0,53.06,10.94Z\"/><path d=\"M20.22,35.48a1.5,1.5,0,0,0-2.12-2.12l-4.48,4.48a1.51,1.51,0,0,0,0,2.12,1.49,1.49,0,0,0,2.12,0Z\"/><path d=\"M23.88,40.12a1.49,1.49,0,0,0-2.12,0L16.08,45.8a1.5,1.5,0,0,0,2.12,2.12l5.68-5.68A1.49,1.49,0,0,0,23.88,40.12Z\"/><path d=\"M28.52,43.78,24,48.26a1.5,1.5,0,0,0,2.12,2.12l4.48-4.48A1.5,1.5,0,0,0,28.52,43.78Z\"/></g></svg>\r\n        )\r\n  }\r\n  const Users=(props)=>{\r\n    \r\n      const [notSeenMessageNumberlocal,setNotSeenMessageNumberlocal]=React.useState(props.userData.notSeenMessageNumber)\r\n      React.useEffect(()=>{\r\n        setNotSeenMessageNumberlocal(props.userData.notSeenMessageNumber)\r\n      },[props.userData.notSeenMessageNumber])\r\n    return(\r\n        <div><div className={Style.userContainer} onClick={()=>{props.getUserdata(props.userData),setNotSeenMessageNumberlocal(0),props.setColorOfChat(props.userData.color)}}>\r\n                {notSeenMessageNumberlocal!=0&&<div className={Style.notSeenMessageNumbe}><span>{notSeenMessageNumberlocal}</span></div>}\r\n                <div  className={Style.imgContainer}><img src={props.userData.currentImageUrl || \"/avatar.png\"} /></div>\r\n                <div  className={Style.userName}><p>{props.userData.userName}</p></div>\r\n        </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nconst ColorPicker=(props)=>{\r\n    const [openColorPicker,setOpenColorPicker]=React.useState(false)\r\n    const changePrimaryColor=(color)=>{\r\n        props.getNewColorfn(color)\r\n        updateColorChat({newColor:color,receiver:props.receiver},props.token)\r\n    }\r\n    return(<div onClick={()=>setOpenColorPicker(e=>!e)} className={Style.chatColor} style={{backgroundColor:props.chatColor.colorone}}>\r\n        {openColorPicker&&<div className={Style.colorPicker}>\r\n                <div className={Style.color} onClick={()=>changePrimaryColor(\"#ff1744\")} style={{backgroundColor:\"#ff1744\"}}></div>\r\n                <div className={Style.color} onClick={()=>changePrimaryColor(\"#f50057\")} style={{backgroundColor:\"#f50057\"}}></div>\r\n                <div className={Style.color} onClick={()=>changePrimaryColor(\"#3d5afe\")} style={{backgroundColor:\"#3d5afe\"}}></div>\r\n                <div className={Style.color} onClick={()=>changePrimaryColor(\"#76ff03\")} style={{backgroundColor:\"#76ff03\"}}></div>\r\n                <div className={Style.color} onClick={()=>changePrimaryColor(\"#c6ff00\")} style={{backgroundColor:\"#c6ff00\"}}></div>\r\n                <div className={Style.color} onClick={()=>changePrimaryColor(\"#ff3d00\")} style={{backgroundColor:\"#ff3d00\"}}></div>\r\n                <div className={Style.color} onClick={()=>changePrimaryColor(\"#651fff\")} style={{backgroundColor:\"#651fff\"}}></div>\r\n                <div className={Style.color} onClick={()=>changePrimaryColor(\"#ffea00\")} style={{backgroundColor:\"#ffea00\"}}></div>\r\n                <div className={Style.color} onClick={()=>changePrimaryColor(\"#f50057\")} style={{backgroundColor:\"#f50057\"}}></div>\r\n                <div className={Style.color} onClick={()=>changePrimaryColor(\"#ff1744\")} style={{backgroundColor:\"#ff1744\"}}></div>\r\n                <div className={Style.color} onClick={()=>changePrimaryColor(\"#1de9b6\")} style={{backgroundColor:\"#1de9b6\"}}></div>\r\n                <div className={Style.color} onClick={()=>changePrimaryColor(\"#03a9f4\")} style={{backgroundColor:\"#03a9f4\"}}></div>\r\n                \r\n\r\n            </div>}\r\n        </div>\r\n    )\r\n}\r\nexport async function getServerSideProps({ req, res }) {\r\n        console.log(req.cookies.token)\r\n    return req.cookies.token ? { props: { token: req.cookies.token } } : { props: { token: false } }\r\n  }"]},"metadata":{},"sourceType":"module"}