{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport _slicedToArray from \"F:/AHKI/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React from 'react';\nimport Style from './heart.module.scss';\nimport { addLikeToPost, checklikeToPost, dislikePost } from '../../services/post_likes';\nimport { addLikeToImage, checklikeToImage, dislikeImage } from '../../services/imageLikes';\n\nvar heart = function heart(props) {\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      clicked = _React$useState2[0],\n      setClicked = _React$useState2[1];\n\n  React.useEffect(function () {\n    if (props.imgid != undefined) {\n      if (props.token != false) {\n        checklikeToImage({\n          imageid: props.imgid\n        }, props.token).then(function (result) {\n          if (result.data.data != null) {\n            setClicked(true);\n          } else {\n            setClicked(false);\n          }\n        })[\"catch\"](function (e) {\n          console.log(e);\n        });\n      }\n    } else {\n      if (props.token != false) {\n        checklikeToPost({\n          postid: props.postid\n        }, props.token).then(function (result) {\n          if (result.data.data != null) {\n            setClicked(true);\n          } else {\n            setClicked(false);\n          }\n        })[\"catch\"](function (e) {\n          console.log(e);\n        });\n      }\n    }\n  }, [props.imgid]); // badaltha kenet props khw ou ki keent props khw ay tabdila i awed ya3beth checklikedtoImage api\n\n  var sendLikeOrDislike = function sendLikeOrDislike() {\n    if (props.token != false) {\n      if (props.imgid != undefined) {\n        if (clicked == true) {\n          dislikeImage({\n            imageid: props.imgid\n          }, props.token).then(function (result) {\n            props.addLikeInTime(-1);\n            setClicked(false);\n          })[\"catch\"](function (e) {\n            console.log(e);\n          });\n        } else {\n          addLikeToImage({\n            imageid: props.imgid\n          }, props.token).then(function (result) {\n            props.addLikeInTime(1);\n            setClicked(true);\n          })[\"catch\"](function (e) {\n            console.log(e);\n          });\n        }\n      } else {\n        if (clicked == true) {\n          dislikePost({\n            postid: props.postid\n          }, props.token).then(function (result) {\n            props.addLikeInTime(-1);\n            setClicked(false);\n          })[\"catch\"](function (e) {\n            console.log(e);\n          });\n        } else {\n          addLikeToPost({\n            postid: props.postid\n          }, props.token).then(function (result) {\n            props.addLikeInTime(1);\n            setClicked(true);\n          })[\"catch\"](function (e) {\n            console.log(e);\n          });\n        }\n      }\n    }\n  };\n\n  return /*#__PURE__*/_jsx(\"div\", {\n    className: Style.heart,\n    style: {\n      backgroundColor: clicked == true ? \"#ff413f\" : \"#abb6bf\",\n      \"--clicked\": clicked ? \"#ff413f\" : \"#abb6bf\"\n    },\n    onClick: function onClick() {\n      return sendLikeOrDislike();\n    },\n    children: clicked && /*#__PURE__*/_jsx(\"div\", {\n      className: Style.heartFaded,\n      style: {\n        backgroundColor: clicked == true ? \"#ff413f\" : \"#abb6bf\",\n        \"--clicked\": clicked ? \"#ff413f\" : \"#abb6bf\"\n      }\n    })\n  });\n};\n\nexport default heart;","map":null,"metadata":{},"sourceType":"module"}