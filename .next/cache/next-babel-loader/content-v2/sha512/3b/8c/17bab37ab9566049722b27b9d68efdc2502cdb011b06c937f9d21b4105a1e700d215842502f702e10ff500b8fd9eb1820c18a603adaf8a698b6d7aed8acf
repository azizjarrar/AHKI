{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _defineProperty from \"F:/AHKI/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"F:/AHKI/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"F:\\\\AHKI\\\\pages\\\\signin.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport Style from '../styles/singin.module.scss';\nimport LanguageContext from '../context/languageContext';\nimport Link from 'next/link';\nimport { Login } from '../services/user';\nimport ApiIsLoadingContext from '../context/apiIsLoadingContext';\nimport PopUpMessage from '../components/popUpMessage/popUpMessage';\nimport { useRouter } from 'next/router';\nimport UserContext from '../context/userContext';\nimport VerifyAccount from '../components/verifyAccount/verifyAccount';\n\nvar singin = function singin() {\n  _s();\n\n  var _React$useContext = React.useContext(LanguageContext),\n      _React$useContext2 = _slicedToArray(_React$useContext, 2),\n      language = _React$useContext2[0],\n      setLanguage = _React$useContext2[1];\n\n  var _React$useContext3 = React.useContext(ApiIsLoadingContext),\n      _React$useContext4 = _slicedToArray(_React$useContext3, 2),\n      isLoading = _React$useContext4[0],\n      setIsLoading = _React$useContext4[1];\n\n  var _React$useState = React.useState({}),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      loginState = _React$useState2[0],\n      setLoginState = _React$useState2[1];\n\n  var _React$useState3 = React.useState({\n    state: false,\n    text: \"\"\n  }),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      errorMessage = _React$useState4[0],\n      setErrorMessage = _React$useState4[1]; // when state true show  pop up \n\n\n  var router = useRouter();\n\n  var _React$useContext5 = React.useContext(UserContext),\n      _React$useContext6 = _slicedToArray(_React$useContext5, 2),\n      user = _React$useContext6[0],\n      setUser = _React$useContext6[1];\n\n  var _React$useState5 = React.useState({\n    state: false,\n    userid: \"\"\n  }),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      openVerifieAccountModal = _React$useState6[0],\n      setOpenVerifieAccountModal = _React$useState6[1];\n\n  var singIn = function singIn() {\n    setIsLoading(true);\n    Login(loginState).then(function (res) {\n      if (res.data.state == false) {\n        setErrorMessage({\n          state: true,\n          text: res.data.message\n        });\n        setIsLoading(false);\n      } else if (res.data.verified == false) {\n        setOpenVerifieAccountModal({\n          state: true,\n          userid: res.data.userid\n        });\n        setIsLoading(false);\n      } else {\n        fetch(\"/api/setToken\", {\n          method: \"post\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            token: res.data.token\n          })\n        }).then(function () {\n          localStorage.setItem(\"ref_token\", res.data.ref_token);\n          setIsLoading(false);\n          router.push({\n            pathname: \"/\",\n            query: {\n              refrech: true\n            }\n          });\n        });\n      }\n    })[\"catch\"](function (error) {\n      setIsLoading(false);\n      setErrorMessage({\n        state: true,\n        text: error.message\n      });\n    });\n  };\n\n  var setLoginData = function setLoginData(e) {\n    var _e$target = e.target,\n        name = _e$target.name,\n        value = _e$target.value;\n    setLoginState(function (e) {\n      return _objectSpread(_objectSpread({}, e), {}, _defineProperty({}, name, value));\n    });\n  };\n\n  var closePopUp = function closePopUp() {\n    setErrorMessage({\n      state: false,\n      text: \"\"\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: Style.pageContainer,\n    children: [errorMessage.state == true && /*#__PURE__*/_jsxDEV(PopUpMessage, {\n      fnclose: closePopUp,\n      openPopUp: errorMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 40\n    }, _this), openVerifieAccountModal.state && /*#__PURE__*/_jsxDEV(VerifyAccount, {\n      userId: openVerifieAccountModal.userid\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 45\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: Style.formContainer,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: Style.Header,\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Sing in For Nozzla\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 47\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: Style.descriptionHeader,\n        children: /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: language.createaprofilefollowotheraccountstalkaboutyourownexperienceandmore\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 58\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: function onSubmit(e) {\n          return e.preventDefault();\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: Style.inputContainer,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            onChange: function onChange(e) {\n              return setLoginData(e);\n            },\n            name: \"identity\",\n            className: Style.input,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 21\n          }, _this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              children: language.telephoneoremail\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 28\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 21\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 17\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: Style.inputContainer,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            onChange: function onChange(e) {\n              return setLoginData(e);\n            },\n            name: \"password\",\n            className: Style.input,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 21\n          }, _this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              children: language.password\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 28\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 21\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 17\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: Style.btnContainer,\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: function onClick() {\n              return singIn();\n            },\n            children: language.signin\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 21\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 17\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: Style.messageToCreateAccounOrForgetPassword,\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: Style.message,\n          children: [language.YoudonthaveaccountClickhereto, \" \", /*#__PURE__*/_jsxDEV(Link, {\n            href: \"/singup\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: Style.clickHere,\n              children: language.signup\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 112\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 91\n          }, _this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 178\n          }, _this), \" \", /*#__PURE__*/_jsxDEV(Link, {\n            href: \"/forgetPassword\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: Style.forgetPassword,\n              children: language.ForgotPassword\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 214\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 185\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 21\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 9\n  }, _this);\n};\n\n_s(singin, \"wCEBCLlM6Ev7kvjB0Qljfu0SlMc=\", false, function () {\n  return [useRouter];\n});\n\nexport default singin;","map":{"version":3,"sources":["F:/AHKI/pages/signin.js"],"names":["React","Style","LanguageContext","Link","Login","ApiIsLoadingContext","PopUpMessage","useRouter","UserContext","VerifyAccount","singin","useContext","language","setLanguage","isLoading","setIsLoading","useState","loginState","setLoginState","state","text","errorMessage","setErrorMessage","router","user","setUser","userid","openVerifieAccountModal","setOpenVerifieAccountModal","singIn","then","res","data","message","verified","fetch","method","headers","body","JSON","stringify","token","localStorage","setItem","ref_token","push","pathname","query","refrech","error","setLoginData","e","target","name","value","closePopUp","pageContainer","formContainer","Header","descriptionHeader","createaprofilefollowotheraccountstalkaboutyourownexperienceandmore","preventDefault","inputContainer","input","telephoneoremail","password","btnContainer","signin","messageToCreateAccounOrForgetPassword","YoudonthaveaccountClickhereto","clickHere","signup","forgetPassword","ForgotPassword"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport Style from '../styles/singin.module.scss'\r\nimport LanguageContext from '../context/languageContext'\r\nimport Link from 'next/link'\r\nimport {Login} from '../services/user'\r\nimport ApiIsLoadingContext from '../context/apiIsLoadingContext'\r\nimport PopUpMessage from '../components/popUpMessage/popUpMessage'\r\nimport { useRouter } from 'next/router'\r\nimport UserContext from '../context/userContext'\r\nimport VerifyAccount from '../components/verifyAccount/verifyAccount'\r\n\r\nconst singin = () => {\r\n    const [language, setLanguage] = React.useContext(LanguageContext)\r\n    const [isLoading, setIsLoading] = React.useContext(ApiIsLoadingContext)\r\n    const [loginState,setLoginState]=React.useState({})\r\n    const [errorMessage,setErrorMessage]=React.useState({state:false,text:\"\"})// when state true show  pop up \r\n    const router = useRouter()\r\n    const [user,setUser]=React.useContext(UserContext)\r\n    const [openVerifieAccountModal,setOpenVerifieAccountModal]=React.useState({state:false,userid:\"\"})\r\n\r\n    const singIn=()=>{\r\n\r\n        setIsLoading(true)\r\n          Login(loginState).then(res=>{\r\n            if(res.data.state==false){\r\n                setErrorMessage({ state:true,text:res.data.message })\r\n              setIsLoading(false)\r\n            }else if(res.data.verified==false){\r\n                setOpenVerifieAccountModal({state:true,userid:res.data.userid})\r\n               setIsLoading(false)\r\n            }else{\r\n              fetch(\"/api/setToken\",{method:\"post\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({token:res.data.token})}).then(()=>{\r\n                localStorage.setItem(\"ref_token\",res.data.ref_token)\r\n                setIsLoading(false)\r\n                router.push({pathname:\"/\",query: { refrech: true }})\r\n              })\r\n            }\r\n          }).catch(error=>{\r\n            setIsLoading(false)\r\n            setErrorMessage({ state: true, text: error.message })\r\n          \r\n          })\r\n        }\r\n        const setLoginData=(e)=>{\r\n          const { name, value } = e.target\r\n              setLoginState(e => {\r\n            return { ...e, [name]: value }\r\n          })\r\n        }\r\n        const closePopUp=()=>{\r\n            setErrorMessage({state:false,text:\"\"})\r\n          }\r\n    return (\r\n        <div className={Style.pageContainer}>\r\n            {errorMessage.state==true&&<PopUpMessage fnclose={closePopUp} openPopUp={errorMessage}></PopUpMessage>}\r\n            {openVerifieAccountModal.state&&<VerifyAccount userId={openVerifieAccountModal.userid}></VerifyAccount>}\r\n\r\n            <div className={Style.formContainer}>\r\n                <div className={Style.Header}><h1>Sing in For Nozzla</h1></div>\r\n                <div className={Style.descriptionHeader}><h3>{language.createaprofilefollowotheraccountstalkaboutyourownexperienceandmore}</h3></div>\r\n                <form onSubmit={(e)=>e.preventDefault()}>\r\n                <div className={Style.inputContainer}>\r\n                    <input onChange={(e)=>setLoginData(e)} name=\"identity\" className={Style.input} required></input>\r\n                    <label><span>{language.telephoneoremail}</span></label>\r\n                </div>\r\n                <div className={Style.inputContainer}>\r\n                    <input onChange={(e)=>setLoginData(e)} name=\"password\" className={Style.input} required></input>\r\n                    <label><span>{language.password}</span></label>\r\n                </div>\r\n                <div className={Style.btnContainer}>\r\n                    <button onClick={()=>singIn()}>\r\n                    {language.signin}\r\n                    </button>\r\n                </div>\r\n                </form>\r\n                <div className={Style.messageToCreateAccounOrForgetPassword}>\r\n                    <p className={Style.message}>{language.YoudonthaveaccountClickhereto} <Link href=\"/singup\"><span className={Style.clickHere} >{language.signup}</span></Link><br /> <Link href=\"/forgetPassword\"><span className={Style.forgetPassword}>{language.ForgotPassword}</span></Link></p>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default singin\r\n"]},"metadata":{},"sourceType":"module"}