{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _slicedToArray from \"F:/AHKI/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React from 'react';\nimport Style from './verifyAccount.module.scss';\nimport LanguageContext from '../../context/languageContext';\nimport { activeAccount, reSendVerificationCode } from '../../services/user';\n\nvar verifyAccount = function verifyAccount(props) {\n  var _React$useContext = React.useContext(LanguageContext),\n      _React$useContext2 = _slicedToArray(_React$useContext, 2),\n      language = _React$useContext2[0],\n      setLanguage = _React$useContext2[1];\n\n  var _React$useState = React.useState(\"\"),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      code = _React$useState2[0],\n      setCode = _React$useState2[1];\n\n  var reSendCode = function reSendCode() {\n    reSendVerificationCode(props.userId, code.verificationCode).then(function (result) {});\n  };\n\n  var verifyUserAccount = function verifyUserAccount() {\n    activeAccount(props.userId, code.verificationCode).then(function (result) {\n      if (result.data.state == false) {\n        props.setErrorMessageProps({\n          state: true,\n          text: result.data.message\n        });\n      } else {\n        fetch(\"/api/setToken\", {\n          method: \"post\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            token: result.data.token\n          })\n        }).then(function () {\n          localStorage.setItem(\"ref_token\", result.data.ref_token);\n          location.reload();\n        });\n      }\n    });\n  };\n\n  var codeHandler = function codeHandler(e) {\n    setCode({\n      verificationCode: e.target.value\n    });\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: Style.ContainerVerification,\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      className: Style.VerificationHeader,\n      children: /*#__PURE__*/_jsx(\"h1\", {\n        children: \"Smoufy\"\n      })\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: Style.discrption,\n      children: /*#__PURE__*/_jsx(\"p\", {\n        children: \"verification code is sent to your email ou telefone type it here\"\n      })\n    }), /*#__PURE__*/_jsxs(\"form\", {\n      className: Style.form,\n      onSubmit: function onSubmit(e) {\n        e.preventDefault();\n      },\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: Style.inputContainer,\n        children: /*#__PURE__*/_jsx(\"input\", {\n          name: \"userName\",\n          type: \"text\",\n          placeholder: language.verificationcode,\n          className: Style.input,\n          onChange: function onChange(e) {\n            return codeHandler(e);\n          },\n          required: true\n        })\n      }), /*#__PURE__*/_jsx(\"h1\", {\n        className: Style.Resendcode,\n        onClick: function onClick() {\n          return reSendCode();\n        },\n        children: \"Resend code\"\n      }), /*#__PURE__*/_jsx(\"button\", {\n        onClick: function onClick() {\n          return verifyUserAccount();\n        },\n        className: Style.btn,\n        children: language.send\n      })]\n    })]\n  });\n};\n\nexport default verifyAccount;","map":null,"metadata":{},"sourceType":"module"}