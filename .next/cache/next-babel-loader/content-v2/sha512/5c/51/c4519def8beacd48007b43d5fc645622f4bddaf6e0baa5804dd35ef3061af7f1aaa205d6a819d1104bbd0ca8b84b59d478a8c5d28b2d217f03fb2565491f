{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _slicedToArray from \"F:/AHKI/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React from 'react';\nimport Style from '../styles/singup.module.scss';\nimport LanguageContext from '../context/languageContext';\nimport Link from 'next/link';\nimport { DatePicker } from 'react-rainbow-components';\nimport PhoneInput from 'react-phone-input-2';\nimport { useForm } from 'react-hook-form';\nimport { Register } from '../services/user';\nimport VerifyAccount from '../components/verifyAccount/verifyAccount';\nimport PopUpMessage from '../components/popUpMessage/popUpMessage';\nimport ApiIsLoadingContext from '../context/apiIsLoadingContext';\nimport 'react-phone-input-2/lib/material.css';\n\nvar singup = function singup() {\n  var _React$useContext = React.useContext(LanguageContext),\n      _React$useContext2 = _slicedToArray(_React$useContext, 2),\n      language = _React$useContext2[0],\n      setLanguage = _React$useContext2[1];\n\n  var _React$useState = React.useState(\"email\"),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      showEmailOrTel = _React$useState2[0],\n      setShowEmailOrTel = _React$useState2[1];\n\n  var _React$useState3 = React.useState(\"1998-01-27T23:00:00.000Z\"),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      birthDay = _React$useState4[0],\n      setBirthDay = _React$useState4[1];\n\n  var _React$useState5 = React.useState({\n    state: false,\n    userid: \"\"\n  }),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      openVerifieAccountModal = _React$useState6[0],\n      setOpenVerifieAccountModal = _React$useState6[1];\n\n  var _useForm = useForm(),\n      register = _useForm.register,\n      handleSubmit = _useForm.handleSubmit,\n      errors = _useForm.errors,\n      watch = _useForm.watch;\n\n  var password = React.useRef({});\n  password.current = watch(\"password\", \"\");\n\n  var _React$useState7 = React.useState({\n    state: false,\n    text: \"\"\n  }),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      errorMessage = _React$useState8[0],\n      setErrorMessage = _React$useState8[1]; // when state true show  pop up \n\n\n  var _React$useContext3 = React.useContext(ApiIsLoadingContext),\n      _React$useContext4 = _slicedToArray(_React$useContext3, 2),\n      isLoading = _React$useContext4[0],\n      setIsLoading = _React$useContext4[1];\n\n  var onChangeHandlerRegisterPhone = function onChangeHandlerRegisterPhone(data, country) {\n    document.querySelector(\"#telId\").value = JSON.stringify({\n      \"dialCode\": country.dialCode,\n      'tel': data\n    });\n  };\n\n  var switchTo = function switchTo() {\n    setShowEmailOrTel(function (e) {\n      if (e == \"tel\") {\n        return \"email\";\n      } else {\n        return \"tel\";\n      }\n    });\n  };\n\n  var setBirthDayfn = function setBirthDayfn(date) {\n    setBirthDay(date);\n    document.querySelector(\"#ageId\").value = date;\n  };\n\n  var onSubmit = function onSubmit(data) {\n    setIsLoading(true);\n    Register(data).then(function (res) {\n      if (res.data == undefined) {\n        setIsLoading(false);\n      } else if (res.data.state == false) {\n        setErrorMessage({\n          state: true,\n          text: res.data.message\n        });\n        setIsLoading(false);\n      } else {\n        setOpenVerifieAccountModal({\n          state: true,\n          userid: res.data.userid\n        });\n        setIsLoading(false);\n      }\n    })[\"catch\"](function (error) {\n      setErrorMessage({\n        state: true,\n        text: error.message\n      });\n      setIsLoading(false);\n    });\n  };\n\n  var closePopUp = function closePopUp() {\n    setErrorMessage({\n      state: false,\n      text: \"\"\n    });\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: Style.pageContainer,\n    children: [errorMessage.state == true && /*#__PURE__*/_jsx(PopUpMessage, {\n      fnclose: closePopUp,\n      openPopUp: errorMessage\n    }), openVerifieAccountModal.state && /*#__PURE__*/_jsx(VerifyAccount, {\n      userId: openVerifieAccountModal.userid\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: Style.formContainer,\n      children: /*#__PURE__*/_jsxs(\"form\", {\n        onSubmit: handleSubmit(onSubmit),\n        children: [/*#__PURE__*/_jsx(\"input\", {\n          name: \"age\",\n          id: \"ageId\",\n          defaultValue: \"1998-01-27T23:00:00.000Z\",\n          ref: register({\n            required: \"Required\"\n          }),\n          style: {\n            position: \"absolute\",\n            opacity: 0,\n            pointerEvents: \"none\"\n          }\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: Style.Header,\n          children: /*#__PURE__*/_jsx(\"h1\", {\n            children: \"Sing up For NOZZLA\"\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: Style.descriptionHeader,\n          children: /*#__PURE__*/_jsx(\"h3\", {\n            children: language.createaprofilefollowotheraccountstalkaboutyourownexperienceandmore\n          })\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: Style.inputContainer,\n          children: [/*#__PURE__*/_jsx(\"input\", {\n            className: Style.input,\n            ref: register,\n            name: \"userName\",\n            required: true\n          }), /*#__PURE__*/_jsx(\"label\", {\n            children: /*#__PURE__*/_jsx(\"span\", {\n              children: language.username\n            })\n          })]\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: Style.switchContainer,\n          children: /*#__PURE__*/_jsxs(\"p\", {\n            onClick: function onClick() {\n              return switchTo();\n            },\n            children: [\"siwtch to \", showEmailOrTel == \"tel\" ? \"email\" : \"tel\"]\n          })\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"\".concat(Style.inputContainerTelOrEmail),\n          children: [/*#__PURE__*/_jsx(\"input\", {\n            type: \"text\",\n            name: \"tel\",\n            style: {\n              position: 'absolute',\n              pointerEvents: \"none\",\n              opacity: 0\n            }\n          }), showEmailOrTel == \"tel\" && /*#__PURE__*/_jsxs(_Fragment, {\n            children: [/*#__PURE__*/_jsx(\"input\", {\n              name: \"tel\",\n              id: \"telId\",\n              ref: register({\n                required: \"Required\"\n              }),\n              style: {\n                position: \"absolute\",\n                opacity: 0,\n                pointerEvents: \"none\"\n              }\n            }), /*#__PURE__*/_jsx(PhoneInput, {\n              name: \"tel\",\n              specialLabel: language.phone,\n              country: 'tn',\n              inputProps: {\n                name: 'phone',\n                required: true,\n                autoFocus: true\n              },\n              onChange: function onChange(e, country) {\n                return onChangeHandlerRegisterPhone(e, country);\n              }\n            })]\n          }), showEmailOrTel == \"email\" && /*#__PURE__*/_jsxs(\"div\", {\n            className: Style.inputContainer,\n            children: [/*#__PURE__*/_jsx(\"input\", {\n              name: \"email\",\n              ref: register({\n                required: \"Required\",\n                pattern: {\n                  value: /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/,\n                  message: \"invalid email address\"\n                }\n              }),\n              className: Style.input,\n              required: true\n            }), /*#__PURE__*/_jsx(\"label\", {\n              children: /*#__PURE__*/_jsx(\"span\", {\n                children: language.telephoneoremail\n              })\n            })]\n          })]\n        }), errors.tel && /*#__PURE__*/_jsx(\"div\", {\n          className: Style.error,\n          children: /*#__PURE__*/_jsx(\"p\", {\n            children: \"tel is required\"\n          })\n        }), errors.email && /*#__PURE__*/_jsx(\"div\", {\n          className: Style.error,\n          children: /*#__PURE__*/_jsx(\"p\", {\n            children: \"email is incorect\"\n          })\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: Style.inputContainer,\n          children: [/*#__PURE__*/_jsx(\"input\", {\n            name: \"password\",\n            ref: register({\n              required: \"password required\",\n              minLength: 8\n            }),\n            className: Style.input,\n            required: true\n          }), /*#__PURE__*/_jsx(\"label\", {\n            children: /*#__PURE__*/_jsx(\"span\", {\n              children: language.password\n            })\n          })]\n        }), errors.password && /*#__PURE__*/_jsx(\"div\", {\n          className: Style.error,\n          children: /*#__PURE__*/_jsx(\"p\", {\n            children: \"password length must be 8 at least\"\n          })\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: Style.inputContainer,\n          children: [/*#__PURE__*/_jsx(\"input\", {\n            name: \"confirmPassword\",\n            ref: register({\n              validate: function validate(value) {\n                return value === password.current || \"The passwords do not match\";\n              }\n            }),\n            className: Style.input,\n            required: true\n          }), /*#__PURE__*/_jsx(\"label\", {\n            children: /*#__PURE__*/_jsx(\"span\", {\n              children: language.confirmpassword\n            })\n          })]\n        }), errors.confirmPassword && /*#__PURE__*/_jsxs(\"div\", {\n          className: Style.error,\n          children: [\" \", /*#__PURE__*/_jsx(\"p\", {\n            children: errors.confirmPassword.message\n          })]\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"\".concat(Style.inputContainer, \" \").concat(Style.birthDay),\n          children: /*#__PURE__*/_jsx(DatePicker, {\n            value: birthDay,\n            onChange: function onChange(value) {\n              return setBirthDayfn(value);\n            },\n            label: \"birth Day\",\n            formatStyle: \"large\",\n            locale: language.age\n          })\n        }), errors.age && /*#__PURE__*/_jsx(\"div\", {\n          className: Style.error,\n          children: /*#__PURE__*/_jsx(\"p\", {\n            children: \"age is required\"\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: Style.btnContainer,\n          children: /*#__PURE__*/_jsx(\"button\", {\n            children: language.signin\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: Style.messageToCreateAccounOrForgetPassword,\n          children: /*#__PURE__*/_jsxs(\"p\", {\n            className: Style.message,\n            children: [language.AlreadyHaveAccount, \" \", /*#__PURE__*/_jsx(Link, {\n              href: \"/signin\",\n              children: /*#__PURE__*/_jsx(\"span\", {\n                className: Style.clickHere,\n                children: language.signin\n              })\n            }), /*#__PURE__*/_jsx(\"br\", {}), \" \", /*#__PURE__*/_jsx(Link, {\n              href: \"/forgetPassword\",\n              children: /*#__PURE__*/_jsx(\"span\", {\n                className: Style.forgetPassword,\n                children: language.ForgotPassword\n              })\n            })]\n          })\n        })]\n      })\n    })]\n  });\n};\n\nexport default singup;","map":null,"metadata":{},"sourceType":"module"}